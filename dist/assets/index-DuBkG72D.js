import{d as y,q as c,l as e,f as x,u as t,K as k,J as _,Q as b,z as a,U as S,r as m,F as q,t as N,R as V,L as B,x as C,B as T,v as d}from"./vue-vendor-ntQnFNWs.js";import{a as U,u as j,S as A,t as p}from"./index-C6XK1gma.js";import{J as D}from"./customer-BXjt1XCl.js";import{_ as E}from"./PageHeader.vue_vue_type_script_setup_true_lang-CEmtFThu.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-CXUrgsmq.js";const F={class:"flex min-h-screen justify-center bg-[#eef3f8]"},I={class:"w-full max-w-xl bg-[#f5f7fb] shadow-sm"},M={class:"px-3 pb-20 pt-3"},O={class:"bg-white rounded-xl shadow-sm p-2"},z={class:"flex justify-center items-center"},J={class:"w-1/5 text-gray-700"},K={value:""},L=["value"],P={key:0,class:"mt-1 text-xs text-red-500"},Q={class:"bg-white rounded-xl shadow-sm p-2 mt-2"},R={class:"flex justify-center items-center"},$={class:"w-1/5 text-gray-700"},G=["placeholder"],H={key:0,class:"mt-1 text-xs text-red-500"},W={class:"rounded-lg mb-3 overflow-hidden"},X={class:"flex items-center text-gray-600 px-4 py-3 pb-0"},Y={class:"px-4 py-3 text-gray-600"},Z={class:"relative pl-3 text-gray-600 before:absolute before:left-0 before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:rounded-full before:bg-red-400"},ee={class:"relative pl-3 text-red-600 before:absolute before:left-0 before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:rounded-full before:bg-red-400"},se=["disabled"],ce=y({__name:"index",setup(te){const v=T(),{t:s}=U(),h=j(),i=m(!1),o=m({safe_ask:"",answer:""}),r=m({}),f=!!h.currentCustomer?.securitypass,w=()=>(r.value={},o.value.safe_ask?o.value.answer?o.value.answer.length>50?(r.value.answer=s("mine.security-settings.group-account.password.answer-max"),!1):!0:(r.value.answer=s("common.form.placeholder.enter")+s("mine.toolcase.form-label.answer"),!1):(r.value.safe_ask=s("mine.toolcase.question-options.default"),!1)),g=async()=>{if(w()){i.value=!0;try{const u=await D({safe_ask:o.value.safe_ask,answer:o.value.answer});u.code===200?(p.success(u.message||"设置成功"),v.back()):p.error(u.message||"设置失败")}catch{p.error("设置失败")}finally{i.value=!1}}};return(u,l)=>(d(),c("div",F,[e("div",I,[x(E,{title:t(s)("mine.security-settings.group-pay.security")},null,8,["title"]),e("main",M,[e("form",{onSubmit:k(g,["prevent"]),class:"mt-5"},[e("div",O,[e("div",z,[e("label",J,a(t(s)("mine.toolcase.form-label.question")),1),b(e("select",{"onUpdate:modelValue":l[0]||(l[0]=n=>o.value.safe_ask=n),disabled:f,class:"w-4/5 text-gray-800 placeholder-gray-400 focus:outline-none h-12"},[e("option",K,a(t(s)("mine.toolcase.question-options.default")),1),(d(!0),c(q,null,N(t(A),n=>(d(),c("option",{key:n.value,value:n.value},a(t(s)(n.i18nKey)),9,L))),128))],512),[[S,o.value.safe_ask]])]),r.value.safe_ask?(d(),c("p",P,a(r.value.safe_ask),1)):_("",!0)]),e("div",Q,[e("div",R,[e("label",$,a(t(s)("mine.toolcase.form-label.answer")),1),b(e("input",{"onUpdate:modelValue":l[1]||(l[1]=n=>o.value.answer=n),type:"text",disabled:f,placeholder:t(s)("common.form.placeholder.enter")+t(s)("mine.toolcase.form-label.answer"),class:"w-4/5 text-gray-800 placeholder-gray-400 focus:outline-none h-12"},null,8,G),[[V,o.value.answer]])]),r.value.answer?(d(),c("p",H,a(r.value.answer),1)):_("",!0)]),e("div",W,[e("div",X,[l[2]||(l[2]=e("span",{class:"w-1 h-4 bg-red-600 rounded mr-2"},null,-1)),B(" "+a(t(s)("mine.security-settings.group-account.password.tip")),1)]),e("div",Y,[e("p",Z,a(t(s)("mine.security-settings.group-account.question.tip-1")),1),e("p",ee,a(t(s)("mine.security-settings.group-account.question.tip-2")),1)])]),e("button",{type:"submit",disabled:i.value||f,class:C(["mt-10 h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",i.value||f?"opacity-60 cursor-not-allowed":"cursor-pointer"])},a(i.value?t(s)("common.form.button.submitting"):t(s)("common.form.button.submit")),11,se)],32)]),l[3]||(l[3]=e("div",{class:"h-14"},null,-1))])]))}});export{ce as default};
