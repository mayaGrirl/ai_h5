import{k as p,l as c}from"./customer-D1FIUO_K.js";import{t as r}from"./index-DBwKxXoa.js";import{d as _,o as v,r as u,q as m,n as s,N as o,x as n,u as y,l as g}from"./vue-vendor-2ZNhN7Rr.js";import"./utils-vendor-CbLx3nH2.js";const x={class:"px-4 py-4 bg-white rounded-lg"},b={class:"mb-3"},w={class:"bg-[#f5f5f5] py-3 px-3 rounded"},k={class:"text-red-600 font-semibold"},S={class:"text-red-600 font-semibold"},B={class:"text-red-600 font-semibold"},C={class:"bg-[#fffae8] text-[#f79304] py-3 px-3 my-3 rounded"},j=_({__name:"index",setup(N){const l=u(!1),i=u(!1),e=u();v(async()=>{try{const{data:a}=await p();e.value=a,a.is_sign&&(l.value=!0)}catch(a){console.error("获取签到数据失败",a)}});const f=async()=>{if(!l.value){i.value=!0;try{const{code:a,message:t,data:d}=await c();a===200?(r.success(t),e.value&&(e.value={total_people:e.value.total_people+1,total_points:e.value.total_points+d.total_points,total_base_coin:e.value.total_base_coin+d.total_base_coin,continue_days:e.value.continue_days+1,total_days:e.value.total_days+1,is_sign:!0}),l.value=!0):r.error(t)}catch{r.error("签到失败")}finally{i.value=!1}}};return(a,t)=>(g(),m("div",x,[s("div",b,[s("div",w,[t[0]||(t[0]=o(" 今日已有 ",-1)),s("span",k,n(e.value?.total_people||0),1),t[1]||(t[1]=o(" 人签到， 共获得 ",-1)),s("span",S,n(e.value?.total_points||0),1),t[2]||(t[2]=o(" 积分， ",-1)),s("span",B,n(e.value?.total_base_coin||0),1),t[3]||(t[3]=o(" 金豆 ",-1))]),s("div",C,[t[4]||(t[4]=o(" 您已连续签到 ",-1)),s("strong",null,n(e.value?.continue_days||0),1),t[5]||(t[5]=o(" 天， 累计签到 ",-1)),s("strong",null,n(e.value?.total_days||0),1),t[6]||(t[6]=o(" 天 ",-1))])]),s("button",{type:"button",onClick:f,class:y(["fixed left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2 w-40 h-40 rounded-full","flex items-center justify-center text-white text-base font-medium shadow-lg transition-transform","active:scale-95",l.value||i.value?"bg-[#cccccc]":"bg-[#ff5a1f]"])},n(l.value?"已签到":i.value?"签到中...":"点击签到"),3)]))}});export{j as default};
