import{d as j,o as D,q as o,l as e,k as I,f as r,u as i,z as c,r as d,F as v,t as _,n as L,J as p,K as M,C as z,p as T,B as N,v as s,M as V}from"./vue-vendor-ntQnFNWs.js";import{a as $,_ as F}from"./index-DKPP7pX5.js";import{e as H,d as R}from"./home-m44ZmvYT.js";import{C as S}from"./chevron-left-9eMTeFtj.js";import{B as y}from"./bell-Dpq0m51F.js";import{X as q}from"./x-QH-I_HHJ.js";import{C as A}from"./chevron-right-D_8mvdKc.js";import"./utils-vendor-CbLx3nH2.js";const E={class:"flex min-h-screen justify-center bg-[#eef3f8]"},J={class:"w-full max-w-xl bg-[#f5f7fb] shadow-sm"},K={class:"sticky top-0 z-40 bg-gradient-to-r from-red-600 to-red-500"},O={class:"flex h-12 items-center justify-between px-3"},X={class:"text-white font-bold"},G={class:"px-3 pb-20 pt-3"},P={class:"space-y-3"},Q={key:1,class:"flex flex-col items-center justify-center py-16 text-gray-400"},U=["onClick"],W={class:"flex items-center justify-between"},Y={class:"flex-1"},Z={class:"flex items-center gap-2 text-xs text-gray-400 mb-1"},ee={class:"text-base font-semibold text-gray-900 line-clamp-2"},te={class:"bg-white w-[calc(100vw-32px)] max-w-lg max-h-[80vh] overflow-hidden flex flex-col rounded-2xl shadow-2xl"},se={class:"flex items-center justify-between p-4 border-b"},ae={class:"flex-1 pr-4"},oe={class:"text-lg font-bold text-gray-900"},le={key:0,class:"text-xs text-gray-500 mt-1"},ne={class:"flex-1 overflow-y-auto p-4"},re={key:0,class:"flex items-center justify-center py-8"},ie=["innerHTML"],ce=j({__name:"index",setup(de){const g=N(),{t:w}=$(),u=d([]),f=d(!0),m=d(!1),n=d(null),x=d(!1),b=()=>{g.back()},k=async()=>{try{f.value=!0;const{code:l,data:t}=await H();l===200&&t&&(u.value=t)}catch(l){console.error("获取公告列表失败:",l)}finally{f.value=!1}},C=async l=>{m.value=!0,x.value=!0,n.value=l;try{const{code:t,data:a}=await R(l.id);t===200&&a&&(n.value=a)}catch(t){console.error("获取公告详情失败:",t)}finally{x.value=!1}},h=()=>{m.value=!1};return D(()=>{k()}),(l,t)=>(s(),o("div",E,[e("div",J,[e("header",K,[e("div",O,[e("button",{onClick:b,class:"flex items-center text-white"},[r(i(S),{class:"h-5 w-5"})]),e("span",X,c(i(w)("home.announcement")),1),t[0]||(t[0]=e("div",{class:"w-5"},null,-1))])]),e("main",G,[e("section",P,[f.value?(s(),o(v,{key:0},_(3,a=>e("div",{key:`skeleton-${a}`,class:"bg-white rounded-xl px-4 py-4 shadow-sm"},[...t[1]||(t[1]=[e("div",{class:"h-3 w-24 mb-2 bg-gray-200 rounded animate-pulse"},null,-1),e("div",{class:"h-5 w-3/4 bg-gray-200 rounded animate-pulse"},null,-1)])])),64)):u.value.length===0?(s(),o("div",Q,[r(i(y),{class:"h-16 w-16 mb-4 text-gray-300"}),t[2]||(t[2]=e("p",{class:"text-sm"},"暂无公告",-1))])):(s(!0),o(v,{key:2},_(u.value,(a,B)=>(s(),o("div",{key:a.id,onClick:ue=>C(a),class:"block bg-white rounded-xl px-4 py-4 shadow-sm hover:shadow-md transition-all duration-200 transform hover:scale-[1.01] active:scale-[0.99] cursor-pointer",style:V({animationDelay:`${B*50}ms`})},[e("div",W,[e("div",Y,[e("div",Z,[r(i(y),{class:"h-3 w-3"}),e("span",null,"发布于 "+c(a.created_at),1)]),e("div",ee,c(a.title),1)]),r(i(A),{class:"h-5 w-5 text-gray-300 flex-shrink-0 ml-2"})])],12,U))),128))])])]),(s(),I(T,{to:"body"},[r(z,{name:"dialog"},{default:L(()=>[m.value?(s(),o("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:M(h,["self"])},[e("div",te,[e("div",se,[e("div",ae,[e("h3",oe,c(n.value?.title),1),n.value?.created_at?(s(),o("div",le," 发布于 "+c(n.value.created_at),1)):p("",!0)]),e("button",{onClick:h,class:"p-1.5 rounded-full text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0"},[r(i(q),{class:"h-5 w-5"})])]),e("div",ne,[x.value?(s(),o("div",re,[...t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"},null,-1)])])):(s(),o("div",{key:1,class:"text-sm text-gray-700 leading-7 prose prose-sm max-w-none",innerHTML:n.value?.content||""},null,8,ie))])])])):p("",!0)]),_:1})]))]))}}),ge=F(ce,[["__scopeId","data-v-1fd7d9a0"]]);export{ge as default};
