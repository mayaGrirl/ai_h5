import{_ as C}from"./coin-BjeO1Yvx.js";import{d as j,w as B,o as K,I as L,B as E,c as I,q as r,l as s,z as o,u as v,F as u,t as y,r as k,v as n,x as h,O as R}from"./vue-vendor-ntQnFNWs.js";import{h as b,a as S,t as m}from"./index-CYyiLWN6.js";import"./utils-vendor-CbLx3nH2.js";const _=()=>b.get("/api/app/v1/rank/today",{}),V=()=>b.get("/api/app/v1/rank/yesterday",{}),z=()=>b.get("/api/app/v1/rank/week",{}),D={class:"min-h-screen bg-[#f5f7fb] pb-16"},F={class:"h-14 bg-red-600 flex items-center justify-center"},M={class:"text-white text-xl font-bold"},N={class:"grid grid-cols-3 text-center text-sm bg-white"},T=["onClick"],O={class:"p-2"},P={key:0,class:"bg-white rounded-lg"},W={key:1,class:"bg-white rounded-lg"},A={key:0,class:"py-12 text-center text-gray-500"},G={class:"flex items-center space-x-3"},H=["src","alt"],J={class:"text-gray-800 text-sm"},Q={class:"flex items-center space-x-1"},U={class:"text-red-500 font-semibold text-sm"},se=j({__name:"index",setup(X){const{t:g}=S(),d=L(),p=E(),f=I(()=>d.query.tab||"today"),w=[{key:"today",i18Key:"rank.tab-1"},{key:"yesterday",i18Key:"rank.tab-2"},{key:"last-week",i18Key:"rank.tab-3"}],l=k([]),c=k(!1),x=async a=>{c.value=!0,l.value=[];try{let e;switch(a){case"today":e=await _();break;case"yesterday":e=await V();break;case"last-week":e=await z();break;default:e=await _()}e.code===200&&e.data?l.value=e.data:m.error(e.message||"获取排行数据失败")}catch(e){console.error("获取排行数据失败:",e),m.error("获取排行数据失败")}finally{c.value=!1}},$=a=>{p.replace({query:{tab:a}})},q=a=>{const e="inline-flex items-center justify-center rounded-full text-xs font-bold w-6 h-6 shadow-sm";switch(a){case 1:return`${e} bg-gradient-to-br from-yellow-300 to-yellow-500 text-yellow-900`;case 2:return`${e} bg-gradient-to-br from-blue-300 to-blue-500 text-blue-950`;case 3:return`${e} bg-gradient-to-br from-green-300 to-green-500 text-green-950`;default:return`${e} bg-gray-200 text-gray-700`}};return B(()=>d.query.tab,a=>{x(a||"today")}),K(()=>{d.query.tab?x(f.value):p.replace({query:{tab:"today"}})}),(a,e)=>(n(),r("div",D,[s("header",F,[s("span",M,o(v(g)("tab.ranking")),1)]),s("div",N,[(n(),r(u,null,y(w,t=>s("button",{key:t.key,onClick:i=>$(t.key),class:h(["py-3 text-center transition-colors",f.value===t.key?"text-red-500 font-bold border-b-2 border-red-500":"text-gray-500 hover:text-gray-700"])},o(v(g)(t.i18Key)),11,T)),64))]),s("div",O,[c.value?(n(),r("div",P,[(n(),r(u,null,y(10,t=>s("div",{key:t,class:"flex items-center justify-between px-4 py-3 border-b border-gray-100"},[...e[2]||(e[2]=[R('<div class="flex items-center space-x-3"><div class="w-6 h-6 bg-gray-200 rounded-full animate-pulse"></div><div class="w-5 h-5 bg-gray-200 rounded animate-pulse"></div><div class="w-20 h-4 bg-gray-200 rounded animate-pulse"></div></div><div class="w-16 h-4 bg-gray-200 rounded animate-pulse"></div>',2)])])),64))])):(n(),r("div",W,[l.value.length===0?(n(),r("div",A," 暂无排行数据 ")):(n(!0),r(u,{key:1},y(l.value,t=>(n(),r("div",{key:t.rank,class:"flex items-center justify-between px-4 py-3 border-b border-gray-100 last:border-b-0"},[s("div",G,[s("span",{class:h(q(t.rank))},o(t.rank),3),s("img",{src:`/ranking/vip/${t.level}.png`,alt:`VIP${t.level}`,class:"w-5 h-5",onError:e[0]||(e[0]=i=>i.target.style.display="none")},null,40,H),s("span",J,o(t.name),1)]),s("div",Q,[s("span",U,o(t.score.toLocaleString()),1),s("img",{src:C,alt:"gold",class:"w-[13px] h-[13px]",onError:e[1]||(e[1]=i=>i.target.style.display="none")},null,32)])]))),128))]))])]))}});export{se as default};
