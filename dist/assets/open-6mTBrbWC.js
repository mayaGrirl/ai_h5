import{d as F,w as z,o as C,q as r,l as s,r as x,J as k,F as S,t as L,z as l,I as P,v as o,x as f}from"./vue-vendor-ntQnFNWs.js";import{l as D}from"./game-Bo-c-YFl.js";import"./index-B8Q_Szy2.js";import"./utils-vendor-CbLx3nH2.js";const O={class:"bg-gray-100 pb-16"},R={class:"bg-white mx-3 my-3 rounded-lg shadow"},V={key:0,class:"flex justify-center items-center py-8"},$={key:1,class:"text-center py-8 text-gray-500"},G={key:2,class:"divide-y"},J={class:"grid grid-cols-[1.5fr_1fr_0.8fr_1fr] items-center gap-2"},T={class:"text-sm text-blue-700 truncate mb-1"},W={class:"flex items-center gap-1 flex-wrap"},H={key:0,class:"text-gray-400"},K={class:"text-center"},Q={class:"mb-1"},U={class:"inline-flex h-6 min-w-6 px-1 items-center justify-center rounded-full bg-red-500 text-white text-xs"},X={class:"flex justify-center gap-1"},Y={class:"text-center"},Z={class:"text-xs text-red-600 font-medium"},ee={class:"text-xs text-blue-600 font-medium mt-2"},te={class:"text-center"},se={class:"text-blue-600 font-medium"},ne={key:0,class:"py-4 text-center"},re=["disabled"],oe={key:1,class:"py-4 text-center text-gray-400 text-sm"},j=15,ue=F({__name:"open",setup(ae){const g=P(),i=x([]),c=x(!1),h=x(1),_=x(!0),A=()=>Number(g.query.lottery_id)||0,B=()=>Number(g.query.group_id)||0,y=async(n=1,e=!1)=>{const t=A(),d=B();if(t)try{c.value=!0;const a=await D({lottery_id:t,game_group_id:d,page:n,pageSize:j});if(a.code===200&&a.data){const u=a.data.list||[];e?i.value=u:i.value=[...i.value,...u],_.value=u.length>=j,h.value=n}else e&&(i.value=[])}catch(a){console.error("获取开奖记录失败:",a),e&&(i.value=[])}finally{c.value=!1}},I=()=>{c.value||!_.value||y(h.value+1,!1)},m=n=>{const e=n.final_res?.expect_no||n.expect_no||n.action_no;return e==null?"--":String(e)},N=n=>{const e=n.final_res?.nums||n.action_no_num;return e?Array.isArray(e)?e.join(","):typeof e=="object"?Object.values(e).join(","):String(e):"--"},w=n=>{const e=N(n);return e==="--"?[]:e.includes(",")?e.split(","):e.split("")},M=n=>{const e=n.final_res?.sum;return e!=null?String(e):"--"},v=n=>n.final_res?.bigSmall||"--",b=n=>n.final_res?.oddEven||"--",q=n=>{const e=n.final_res?.shape||"--";return{bao:"豹子",shun:"顺子",ban:"半顺",dui:"对子",za:"杂六"}[e]||"--"},E=n=>{const e=n.final_res?.lungFuPao||"--";return{Dragon:"龙",dragon:"龙",Tiger:"虎",tiger:"虎",Leopard:"豹子",leopard:"豹子"}[e]||"--"},p=n=>{const e=n.memberBet;if(!e||Array.isArray(e)&&e.length===0)return{bet:0,win:0};if(typeof e=="object"&&!Array.isArray(e)){const t=e;return{bet:t.bet_gold||0,win:t.win_gold||0}}if(Array.isArray(e)){let t=0,d=0;return e.forEach(a=>{t+=a.bet_gold||0,d+=a.win_gold||0}),{bet:t,win:d}}return{bet:0,win:0}};return z(()=>[g.query.lottery_id,g.query.group_id],()=>{y(1,!0)}),C(()=>{y(1,!0)}),(n,e)=>(o(),r("div",O,[s("div",R,[e[1]||(e[1]=s("div",{class:"grid grid-cols-[1.5fr_1fr_0.8fr_1fr] text-xs text-gray-500 border-b bg-gray-50 px-3 py-2 gap-2 rounded-t-lg"},[s("span",null,"期号/号码"),s("span",{class:"text-center"},"和值/大小"),s("span",{class:"text-center"},"形态"),s("span",{class:"text-center"},"投注/中奖")],-1)),c.value&&i.value.length===0?(o(),r("div",V,[...e[0]||(e[0]=[s("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"},null,-1),s("span",{class:"ml-2 text-gray-600"},"加载开奖记录中...",-1)])])):i.value.length===0?(o(),r("div",$," 暂无开奖记录 ")):(o(),r("div",G,[(o(!0),r(S,null,L(i.value,(t,d)=>(o(),r("div",{key:`${m(t)}-${d}`,class:f(["px-3 py-3 text-xs",p(t).bet>0?"bg-yellow-50":"bg-white"])},[s("div",J,[s("div",null,[s("div",T,l(m(t)),1),s("div",W,[w(t).length===0?(o(),r("span",H,"--")):(o(!0),r(S,{key:1},L(w(t),(a,u)=>(o(),r("span",{key:u,class:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-gray-500 text-white text-[10px]"},l(a),1))),128))])]),s("div",K,[s("div",Q,[s("span",U,l(M(t)),1)]),s("div",X,[s("span",{class:f(["text-xs font-medium",v(t)==="大"?"text-red-600":v(t)==="小"?"text-green-600":"text-gray-500"])},l(v(t)),3),s("span",{class:f(["text-xs font-medium",b(t)==="单"?"text-orange-600":b(t)==="双"?"text-blue-600":"text-gray-500"])},l(b(t)),3)])]),s("div",Y,[s("div",Z,l(q(t)),1),s("div",ee,l(E(t)),1)]),s("div",te,[s("div",se," 投:"+l(p(t).bet.toLocaleString()),1),s("div",{class:f(p(t).win>0?"text-red-600 font-medium":"text-gray-400 mt-2")}," 中:"+l(p(t).win.toLocaleString()),3)])])],2))),128)),_.value?(o(),r("div",ne,[s("button",{onClick:I,disabled:c.value,class:"px-6 py-2 bg-red-600 text-white text-sm rounded-lg disabled:opacity-50"},l(c.value?"加载中...":"加载更多"),9,re)])):k("",!0),!_.value&&i.value.length>0?(o(),r("div",oe," 没有更多数据了 ")):k("",!0)]))])]))}});export{ue as default};
