import{_ as z}from"./coin-BjeO1Yvx.js";import{d as Y,o as $,I as E,r as x,q as u,l as e,k as C,u as t,L as y,z as s,f as i,n as p,A as W,F as M,t as L,J as j,x as G,p as U,B as Z,v as c,y as J}from"./vue-vendor-ntQnFNWs.js";import{c as o,a as O,u as X,t as v,l as Q}from"./index-CYyiLWN6.js";import{c as ee,v as te}from"./customer-p388jM98.js";import{d as se}from"./dayjs.min-CLb2-34J.js";import{U as S}from"./user-Ctt_0wA-.js";import{C as R}from"./chevron-right-DJ8xyN_7.js";import{X as V,G as ne}from"./x-DKS-_tmY.js";import"./utils-vendor-CbLx3nH2.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=o("BanknoteIcon",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=o("BoxIcon",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=o("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=o("FlagIcon",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=o("HandCoinsIcon",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=o("LandmarkIcon",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=o("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=o("MapPinIcon",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=o("PencilLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=o("ReceiptTextIcon",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=o("RepeatIcon",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=o("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=o("ShieldPlusIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9 12h6",key:"1c52cq"}],["path",{d:"M12 9v6",key:"199k2o"}]]),xe="/mine/slide/01.jpeg",ge={class:"min-h-screen bg-[#f5f7fb] pb-16"},_e={class:"bg-red-600 px-3 text-white"},be={class:"flex items-center justify-between h-16"},ve={class:"flex items-center space-x-2"},ke={class:"h-10 w-10 rounded-full bg-white flex items-center justify-center overflow-hidden"},we={key:0,class:"h-full w-full bg-gray-200 animate-pulse"},Ce=["src"],Me={class:"leading-tight font-medium"},je={class:"text-xs flex items-center"},Ke=["src"],qe={class:"min-w-12 mt-1 inline-flex h-4 items-center rounded-full text-[10px] px-1 bg-[rgb(64,63,63)]"},Ie={class:"mb-3"},ze={class:"relative w-full h-32 overflow-hidden"},Le={class:"mt-2 grid grid-cols-2 gap-2 px-3"},Se={class:"flex items-center gap-1 leading-none"},Re={class:"flex items-center gap-1 leading-none"},Ve={class:"mt-2 grid grid-cols-3 gap-2 px-3"},Be={class:"mt-3 px-3"},De={class:"rounded-t-md border-b border-[#ff3a00] bg-white py-1 text-center text-[#ff3a00]"},He={class:"flex items-center justify-evenly rounded-b-md bg-gradient-to-r from-[#ff8e4a] to-[#ff3a00] px-4 py-3 text-center text-white min-h-20"},Pe={class:"min-h-6 font-semibold"},Ne={key:0,class:"w-xs"},Ae=["disabled"],Fe={class:"mt-3 px-3"},Te={class:"w-full rounded-lg border border-[#c7e6ff] bg-[#f4fbff] px-3 py-2 text-[12px] text-[#4b84b6] flex items-center min-h-9"},Ye={key:0},$e={class:"mt-3 px-3"},Ee={class:"grid grid-cols-3 rounded-md bg-white py-2 text-center border border-gray-200"},We={class:"text-gray-500 text-sm"},Ge={class:"flex items-center justify-center mt-1 text-[13px] font-semibold text-[#ff3a00]"},Ue={class:"text-gray-500 text-sm"},Ze={class:"flex items-center justify-center mt-1 text-[13px] font-semibold text-[#ff3a00]"},Je={class:"flex flex-col"},Oe={class:"text-gray-500 text-sm"},Xe={class:"mt-1 text-[13px] font-semibold text-gray-800"},Qe={class:"mt-3"},et={class:"flex justify-center items-center text-sm"},tt={class:"flex justify-center items-center text-sm"},st={key:0,class:"fixed inset-0 z-50"},nt={class:"absolute bottom-0 left-1/2 -translate-x-1/2 w-full max-w-xl bg-white rounded-t-[10px] pb-[env(safe-area-inset-bottom)]"},at={class:"p-4 rounded-t-[10px]"},it={class:"relative flex items-center justify-center h-8"},ot={class:"text-base font-medium text-gray-900"},lt={class:"p-4"},rt={class:"grid grid-cols-4 gap-2 text-center"},ct=["onClick"],dt={class:"flex h-8 w-8 items-center justify-center text-gray-700"},mt={class:"text-xs text-gray-700 text-center leading-tight"},kt=Y({__name:"index",setup(ut){const g=Z(),k=E(),{t:a}=O(),m=X(),w=x(!0),r=x(null),h=x(!1),_=x(!1),K=x(!1),B=[{i18nKey:"mine.quick.mail",href:"/mine/message"},{i18nKey:"mine.setting.toolcase",href:"/mine/toolcase"},{i18nKey:"mine.quick.challenge",href:"/mine/challenge"},{i18nKey:"mine.quick.relief",href:"/mine/relief"},{i18nKey:"mine.quick.salary",href:"/mine/salary"},{i18nKey:"mine.quick.commission",href:"/mine/spread"}],D=[{labelKey:"mine.setting.mail",href:"/mine/message",icon:de},{labelKey:"mine.setting.receipt-text",href:"/mine/receipt-text?from=drawer",icon:he},{labelKey:"mine.setting.profile",href:"/mine/profile",icon:S},{labelKey:"mine.setting.toolcase",href:"/mine/toolcase",icon:ie},{labelKey:"mine.setting.gift",href:"/mine/gift",icon:ne},{labelKey:"mine.setting.landmark",href:"/mine/customer-transfer",icon:ce},{labelKey:"mine.setting.repeat",href:"/shop/record",icon:fe},{labelKey:"mine.setting.salary",href:"/mine/salary",icon:ae},{labelKey:"mine.setting.hand-coins",href:"/mine/hand-coins",icon:re},{labelKey:"mine.setting.security-settings",href:"/mine/security-settings",icon:pe},{labelKey:"mine.setting.edit-nickname",href:"/mine/edit-nickname",icon:ue},{labelKey:"mine.setting.x",href:"",icon:V}],H=async()=>{try{w.value=!0;const n=await ee();n.code===200&&(r.value=n.data)}catch(n){console.error("加载用户资料失败:",n)}finally{w.value=!1}},P=async()=>{if(!h.value){h.value=!0;try{const n=await te();n.code===200?v.success(n.message||"领取成功"):v.error(n.message||"领取失败")}catch{v.error("领取失败")}finally{h.value=!1}}},N=()=>{_.value=!0,g.replace({query:{...k.query,drawer:"setting"}})},b=()=>{_.value=!1;const n={...k.query};delete n.drawer,g.replace({query:n})},A=async n=>{n===""?await F():(b(),g.push(n))},F=async()=>{if(!K.value){K.value=!0;try{await Q()}catch(n){console.error("logout error",n)}finally{m.logout(),b(),g.replace("/auth/login")}}},q=n=>n===void 0?"0":new Intl.NumberFormat("zh-CN").format(n),T=n=>n?se.unix(n).format("YYYY-MM-DD HH:mm:ss"):"";return $(()=>{H(),k.query.drawer==="setting"&&(_.value=!0)}),(n,d)=>{const f=W("router-link");return c(),u(M,null,[e("div",ge,[e("header",_e,[e("div",be,[e("div",ve,[e("div",ke,[w.value?(c(),u("div",we)):t(m).currentCustomer?.avatar_url?(c(),u("img",{key:1,src:t(m).currentCustomer.avatar_url,alt:"avatar",class:"h-full w-full object-cover"},null,8,Ce)):(c(),C(t(S),{key:2,class:"h-5 w-5 text-gray-400"}))]),e("div",Me,[e("div",je,[y(" ID"+s(t(m).currentCustomer?.id)+"（"+s(r.value?.member_field?.nickname||"用户")+"） ",1),e("img",{src:`/mine/level/${t(m).currentCustomer?.level||0}.png`,alt:"level",class:"w-[15px] h-[15px] ml-1",onError:d[0]||(d[0]=l=>l.target.style.display="none")},null,40,Ke)]),e("div",qe,s(r.value?.customer?.gid_label||""),1)])]),e("div",{class:"flex items-center space-x-3 text-xl cursor-pointer",onClick:N},[i(t(ye),{class:"w-6 h-6"})])])]),e("section",Ie,[e("div",ze,[e("img",{src:xe,alt:"banner",class:"w-full h-full object-cover",onError:d[1]||(d[1]=l=>l.target.style.display="none")},null,32)])]),e("section",Le,[e("button",{class:"flex justify-center items-center h-10 rounded-md bg-[#ff3a00] font-medium text-white",onClick:d[2]||(d[2]=l=>t(v).info("新人任务即将上线"))},[e("span",Se,[i(t(le),{size:17}),y(" "+s(t(a)("mine.btn-tasks")),1)])]),i(f,{to:"/mine/sign?tab=in",class:"flex justify-center items-center h-10 rounded-md bg-[#ff3a00] font-medium text-white"},{default:p(()=>[e("span",Re,[i(t(oe),{size:17}),y(" "+s(t(a)("mine.btn-sign_in")),1)])]),_:1})]),e("section",Ve,[(c(),u(M,null,L(B,(l,I)=>i(f,{key:I,to:l.href,class:"rounded-md bg-white py-3 text-center shadow-sm text-sm"},{default:p(()=>[y(s(t(a)(l.i18nKey)),1)]),_:2},1032,["to"])),64))]),e("section",Be,[e("div",De,s(t(a)("mine.vip_title")),1),e("div",He,[e("div",Pe,s(r.value?.customer&&r.value.customer.vip>0?r.value.customer.vip_label:t(a)("mine.vip_not_found")),1),r.value?.customer&&r.value.customer.vip>0?(c(),u("div",Ne,[e("button",{class:G(["w-full h-11 rounded-full bg-white text-orange-500 font-medium shadow-md active:scale-95 transition px-4",h.value?"opacity-60 cursor-not-allowed":"cursor-pointer"]),onClick:P,disabled:h.value},s(h.value?t(a)("common.form.button.submitting"):t(a)("mine.vip-btn-receive")),11,Ae)])):j("",!0)])]),e("section",Fe,[e("div",Te,[i(t(me),{class:"w-3 h-3 mr-1 text-[#4b84b6]"}),t(m).currentCustomer?(c(),u("span",Ye,s(t(a)("mine.last-login-msg-1"))+" "+s(t(m).currentCustomer.last_login_address)+" ("+s(T(t(m).currentCustomer.last_login_time))+") "+s(t(a)("mine.last-login-msg-2")),1)):j("",!0)])]),e("section",$e,[e("div",Ee,[i(f,{to:"/mine/receipt-text",class:"flex flex-col cursor-pointer"},{default:p(()=>[e("div",We,s(t(a)("mine.account-points")),1),e("div",Ge,[e("span",null,s(q(r.value?.member_capital?.points)),1),d[3]||(d[3]=e("img",{src:z,alt:"gold",class:"inline-block ml-1 w-[13px] h-[13px]"},null,-1))])]),_:1}),i(f,{to:"/mine/customer-transfer",class:"flex flex-col border-x border-gray-200 cursor-pointer"},{default:p(()=>[e("div",Ue,s(t(a)("mine.account-bank-points")),1),e("div",Ze,[e("span",null,s(q(r.value?.member_capital?.bankpoints)),1),d[4]||(d[4]=e("img",{src:z,alt:"gold",class:"inline-block ml-1 w-[13px] h-[13px]"},null,-1))])]),_:1}),e("div",Je,[e("div",Oe,s(t(a)("mine.account-experience")),1),e("div",Xe,s(r.value?.member_capital?.experience||0),1)])])]),e("section",Qe,[i(f,{to:"/mine/rebate?tab=loss",class:"mt-1 flex items-center justify-between bg-[#ff3a00] px-3 py-2 text-white cursor-pointer"},{default:p(()=>[e("span",null,s(t(a)("mine.yesterday_loss")),1),e("span",et,[y(s(t(a)("mine.yesterday_loss_btn"))+" ",1),i(t(R),{class:"w-5 h-5"})])]),_:1}),i(f,{to:"/mine/rebate?tab=recharge",class:"mt-2 flex items-center justify-between bg-[#ff3a00] px-3 py-2 text-white cursor-pointer"},{default:p(()=>[e("span",null,s(t(a)("mine.recharge_rebate")),1),e("span",tt,[y(s(t(a)("mine.recharge_rebate_btn"))+" ",1),i(t(R),{class:"w-5 h-5"})])]),_:1})])]),(c(),C(U,{to:"body"},[_.value?(c(),u("div",st,[e("div",{class:"absolute inset-0 bg-black/40",onClick:b}),e("div",nt,[e("div",at,[e("div",it,[e("span",ot,s(t(a)("mine.setting.title")),1),e("button",{onClick:b,class:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-800"},[i(t(V),{class:"h-7 w-7"})])]),e("div",lt,[e("div",rt,[(c(),u(M,null,L(D,l=>e("button",{key:l.labelKey,onClick:I=>A(l.href),class:"flex flex-col items-center justify-center gap-2 aspect-square rounded-lg border border-[#ebedf0] cursor-pointer bg-white hover:bg-gray-50 active:bg-gray-100 transition-colors"},[e("div",dt,[(c(),C(J(l.icon),{class:"h-7 w-7"}))]),e("span",mt,s(t(a)(l.labelKey)),1)],8,ct)),64))])])])])])):j("",!0)]))],64)}}});export{kt as default};
