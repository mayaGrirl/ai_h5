import{d as We,w as re,o as Ke,r as b,b as Qe,q as v,J as L,l as n,k as le,F as h,t as w,L as W,z as x,u as oe,f as Ue,Q as De,R as Je,c as He,x as C,K as Xe,p as Ye,I as Ze,v as d}from"./vue-vendor-ntQnFNWs.js";import{_ as xe}from"./coin-BjeO1Yvx.js";import{u as et}from"./game-DHGlQcry.js";import{u as tt,t as k}from"./index-B8Q_Szy2.js";import{b as st,m as nt,a as be,p as at,f as rt}from"./game-Bo-c-YFl.js";import{C as lt}from"./chevron-up-CEL-HYSE.js";import{C as he}from"./chevron-down-CZz7BUTa.js";import"./utils-vendor-CbLx3nH2.js";const ot={class:"bg-gray-100 min-h-screen pb-32"},it={key:0,class:"bg-white mx-3 mt-3 rounded-lg shadow p-3"},ct={class:"grid grid-cols-6 gap-2 mb-2"},ut=["onClick"],dt={class:"grid grid-cols-6 gap-2 mb-2"},mt=["onClick"],vt={class:"grid grid-cols-6 gap-2"},pt=["onClick"],gt=["onClick"],ft={key:1,class:"grid grid-cols-4 gap-2"},xt=["onClick"],bt={key:0,class:"mt-4 grid grid-cols-2 gap-3"},ht={class:"grid grid-cols-4 gap-1"},yt=["onClick"],_t={class:"grid grid-cols-4 gap-1 mt-1"},kt=["onClick"],wt={class:"grid grid-cols-4 gap-1 mt-1"},Ct=["onClick"],Et={class:"grid grid-cols-3 gap-1"},St=["onClick"],At={class:"grid grid-cols-4 gap-1 mt-1"},It=["onClick"],Nt={class:"grid grid-cols-5 gap-1 mt-1"},Gt=["onClick"],jt={class:"mt-4"},Mt={class:"grid grid-cols-6 gap-2"},$t=["onClick"],Bt={class:"grid grid-cols-6 gap-2 mt-2"},Tt=["onClick"],Pt={class:"grid grid-cols-2 gap-3 mt-3"},Rt={class:"flex items-center gap-1.5 mt-3"},Ot={class:"flex gap-0.5 flex-shrink-0"},Vt=["onClick"],Lt=["src","alt"],qt={class:"bg-white mx-3 mt-3 mb-[50px] rounded-lg shadow"},zt={key:0,class:"flex justify-center items-center py-8"},Ft={key:1,class:"divide-y"},Wt={class:"flex flex-col items-start"},Kt=["onClick"],Qt={class:"text-xs text-gray-500 mt-1"},Ut=["value","onInput","onFocus"],Dt={class:"flex gap-1 justify-end"},Jt=["onClick"],Ht=["onClick"],Xt=["onClick"],Yt={key:2,class:"text-center py-8 text-gray-500"},Zt={class:"fixed bottom-14 left-0 right-0 bg-white border-t shadow-lg"},es={key:0,class:"flex items-center justify-between px-4 py-1.5 bg-gray-50 border-b text-xs"},ts={class:"flex items-center gap-2"},ss={class:"text-blue-700 font-medium"},ns={class:"flex items-center gap-2"},as={class:"text-red-600 font-bold"},rs={class:"text-gray-400 text-[10px]"},ls={class:"flex justify-between px-4 py-2 border-b"},os={class:"flex items-center text-sm"},is={class:"text-red-600 font-bold ml-1"},cs={class:"flex items-center text-sm"},us={class:"text-red-600 font-bold ml-1"},ds={class:"grid grid-cols-3 h-12"},ms={class:"bg-white text-gray-700 font-bold flex flex-col items-center justify-center border-x"},vs={class:"text-red-600 font-bold"},ps={class:"text-orange-600 font-bold"},gs=["disabled"],fs={class:"mx-4 w-full max-w-sm rounded-lg bg-white flex flex-col max-h-[70vh]"},xs={class:"flex-1 overflow-y-auto"},bs={key:0,class:"flex justify-center items-center py-8"},hs={key:1,class:"text-center py-8 text-gray-500"},ys={key:2,class:"divide-y"},_s=["onClick"],ks={class:"font-medium text-gray-800"},ws={class:"font-bold text-red-600"},Cs={class:"p-3 border-t"},Bs=We({__name:"play",setup(Es){const ye=Ze(),y=et(),K=tt(),q=b([]),Q=b(!0),p=b(null),m=b([]),f=b({}),_=b(null),B=b(!1),U=b(null),T=b(""),N=b(!1),G=b([]),D=b(!1),J=b(null),P=b(null),I=b(null),j=b(0),M=b(0),H=b(200),ie=b(""),S=b({});let X=null,Y=null,$=!1,z=!1,R=0,F="",E=null,Z=y.soundEnabled,ee=!0;const ce=[1,3,10,14,18,22,4,26,5,16,23,6,15,24],_e=["全包","单","大单","小单","单边","双"],ke=["大双","小双","双边","大","小","中"],we=["边","大边","小边"],Ce=["上期","反选","清空"],te=["0尾","1尾","2尾","3尾","4尾","5尾","6尾","7尾","8尾","9尾","小尾","大尾"],Ee=["3余0","3余1","3余2"],Se=["4余0","4余1","4余2","4余3"],Ae=["5余0","5余1","5余2","5余3","5余4"],Ie=[.1,.5,.8,1.2,1.5,2],Ne=[5,10,20,30,50,100],Ge=[{display:"10",value:1e4,img:"/chips/10.png"},{display:"100",value:1e5,img:"/chips/100.png"},{display:"500",value:5e5,img:"/chips/500.png"},{display:"1K",value:1e6,img:"/chips/1000.png"},{display:"5K",value:5e6,img:"/chips/5000.png"}],se=He(()=>m.value.reduce((r,s)=>r+(parseInt(f.value[s]||"0",10)||0),0)),je=()=>{try{const r=window.AudioContext||window.webkitAudioContext;if(!r)return;const s=new r,e=s.createOscillator(),o=s.createGain();e.connect(o),o.connect(s.destination),e.frequency.value=880,e.type="sine",o.gain.setValueAtTime(.3,s.currentTime),o.gain.exponentialRampToValueAtTime(.01,s.currentTime+.3),e.start(s.currentTime),e.stop(s.currentTime+.3);const u=s.createOscillator(),a=s.createGain();u.connect(a),a.connect(s.destination),u.frequency.value=1320,u.type="sine",a.gain.setValueAtTime(0,s.currentTime+.15),a.gain.linearRampToValueAtTime(.3,s.currentTime+.16),a.gain.exponentialRampToValueAtTime(.01,s.currentTime+.5),u.start(s.currentTime+.15),u.stop(s.currentTime+.5)}catch(r){console.error("播放提示音失败",r)}},ue=r=>r?r.split(",").map(s=>parseInt(s.trim(),10)||1):[],de=(r,s,e,o)=>{if(s.length===0)return 1;const u=parseInt(r,10);if(!isNaN(u)){const i=u-e;if(i>=0&&i<s.length)return s[i]}const a=o.findIndex(i=>i.name===r);return a>=0&&a<s.length?s[a]:1},me=async()=>{try{await K.fetchCurrentCustomer()}catch(r){console.error("刷新用户金豆失败",r)}},ve=async r=>{if(!(!y.activeGame?.id||!E||!r))try{const s=await be({lottery_id:y.activeGame.id,game_group_id:E,expect_no:r,page:1,pageSize:100});if(s.code===200&&s.data){const e={};(s.data.list||[]).forEach(u=>{const a=u.bet_no;a&&typeof a=="object"&&(Array.isArray(a)?a:Object.values(a)).forEach(c=>{const g=c.bet_no,t=c.bet_gold||0;g&&(e[g]=(e[g]||0)+t)})}),S.value=e}else S.value={}}catch(s){console.error("获取已投注记录失败",s),S.value={}}},Me=async()=>{if(!y.activeGame?.id||!E||!I.value?.expect_no){k.error("无法获取上期投注记录");return}try{const r=await be({lottery_id:y.activeGame.id,game_group_id:E,expect_no:I.value.expect_no,page:1,pageSize:100});if(r.code===200&&r.data){const s=r.data.list||[];if(s.length===0){k.info("上期没有投注记录");return}const e={};s.forEach(a=>{const i=a.bet_no;i&&typeof i=="object"&&(Array.isArray(i)?i:Object.values(i)).forEach(g=>{const t=g.bet_no,l=g.bet_gold||0;t&&(e[t]=(e[t]||0)+l)})});const o=Object.keys(e);if(o.length===0){k.info("上期没有投注记录");return}m.value=o;const u={};o.forEach(a=>{u[a]=String(e[a])}),f.value=u,k.success(`已加载上期 ${o.length} 个投注`)}else k.info("上期没有投注记录")}catch(r){console.error("获取上期投注记录失败",r),k.error("获取上期投注记录失败")}},$e=()=>{if(!I.value?.finalRes)return"--";const r=I.value.finalRes;if(E){const e=`finalOpenRes${E}`,o=r[e];if(o!=null)return String(o)}const s=r.nums;return s?Array.isArray(s)?s.join(","):typeof s=="object"?Object.values(s).join(","):String(s):"--"},Be=async()=>{if(y.activeGame?.id)try{Q.value=!0;const r=await at({lottery_id:y.activeGame.id});if(r.code===200&&r.data){const{gamePlayMap:s=[],groupArr:e=[]}=r.data,o={};e.forEach(c=>{o[c.id]={betMultiplier:c.bet_multiplier||"",startNum:c.start_num||0}});const u=s.map(c=>{const g=o[c.id]||{betMultiplier:"",startNum:0};return{id:c.id,name:c.name,lang_name:c.lang_name,betMultiplier:g.betMultiplier,startNum:g.startNum,plays:(c.children||[]).map(t=>({id:t.id,name:t.name,lang_name:t.lang_name,odds:t.multiple||0,minBetGold:t.min_bet_gold||0}))}}).filter(c=>c.plays.length>0);q.value=u;let a=null;const i=ye.query.group_id;if(i&&u.length>0){const c=u.find(g=>String(g.id)===i);c?(p.value=c,a=Number(c.id)):(p.value=u[0],a=Number(u[0].id))}else u.length>0&&(p.value=u[0],a=Number(u[0].id));E=a,a&&(ne(a),ee=!1)}else r.code!==3001&&k.error(r.message||"获取玩法列表失败")}catch(r){console.error("获取玩法列表失败",r),k.error("获取玩法列表失败，请稍后重试")}finally{Q.value=!1}},ne=async r=>{const s=r??E;if(!(!y.activeGame?.id||!s))try{const e=await rt({lottery_id:y.activeGame.id,game_group_id:s});if(H.value=e.code,e.code===200&&e.data){const o=e.data.currExpectInfo?.expect_no;o&&o!==F&&(F&&(me(),Z&&je()),F=o,ie.value=o,ve(o)),P.value=e.data.currExpectInfo||null,I.value=e.data.lastExpectInfo||null;const u=e.data.currExpectInfo?.open_countdown||0;R=u,j.value=u,M.value=e.data.currExpectInfo?.close_countdown||0,$=!1}else if(e.code===3001&&e.data){const o=e.data.currExpectInfo,u=e.data.lastExpectInfo;if(o){P.value=o;const a=o.open_countdown||0;R=a,j.value=a,M.value=o.close_countdown||0}u&&(I.value=u),$=!1}else $=!0,k.error(e.message||"获取开奖信息失败")}catch(e){console.error("获取开奖信息失败",e),$=!0,k.error("获取开奖信息失败，请稍后重试")}},pe=r=>{const s=Math.floor(r/60),e=r%60;return`${String(s).padStart(2,"0")}:${String(e).padStart(2,"0")}`};re(()=>y.selectedGroupId,r=>{if(r==null||q.value.length===0)return;const s=q.value.find(e=>Number(e.id)===r);s&&(!p.value||Number(p.value.id)!==r)&&(m.value=[],f.value={},p.value=s,_.value=null,N.value=!1,G.value=[],J.value=null,S.value={},E=r,ee||(ne(r),P.value?.expect_no&&setTimeout(()=>{ve(P.value.expect_no)},100)))}),re(()=>y.soundEnabled,r=>{Z=r}),re(()=>y.activeGame?.id,r=>{r&&($=!1,z=!1,R=0,F="",E=null,ee=!0,ie.value="",q.value=[],p.value=null,m.value=[],f.value={},S.value={},Be())},{immediate:!0});const ge=r=>{const s=r.name;if(m.value.includes(s)){m.value=m.value.filter(o=>o!==s);const e={...f.value};delete e[s],f.value=e}else{const e=r.minBetGold||0;e>0&&(f.value={...f.value,[s]:String(e)}),m.value=[...m.value,s]}},Te=(r,s)=>{f.value={...f.value,[r]:s}},A=r=>{if(!p.value)return;const s=Number(p.value.id),e=p.value.plays.filter(t=>!isNaN(parseInt(t.name,10))).sort((t,l)=>parseInt(t.name,10)-parseInt(l.name,10));if(["全包","单","双","大单","小单","大双","小双","单边","双边","大","小","中","边","大边","小边","0尾","1尾","2尾","3尾","4尾","5尾","6尾","7尾","8尾","9尾","小尾","大尾","3余0","3余1","3余2","4余0","4余1","4余2","4余3","5余0","5余1","5余2","5余3","5余4"].includes(r)&&_.value===r){m.value=[],f.value={},_.value=null;return}const a=(t=>[1,2,3,10,14,18,22].includes(t)?{min:0,max:27,bigStart:14,smallEnd:13,midStart:10,midEnd:17,bigEdgeStart:18,smallEdgeEnd:9}:[6,15,24].includes(t)?{min:3,max:18,bigStart:11,smallEnd:10,midStart:8,midEnd:13,bigEdgeStart:14,smallEdgeEnd:7}:[5,16,23].includes(t)?{min:2,max:12,bigStart:7,smallEnd:6,midStart:5,midEnd:9,bigEdgeStart:10,smallEdgeEnd:4}:[4,26].includes(t)?{min:1,max:10,bigStart:6,smallEnd:5,midStart:4,midEnd:7,bigEdgeStart:8,smallEdgeEnd:3}:null)(s);let i=[],c=r;switch(r){case"清空":m.value=[],f.value={},_.value=null;return;case"反选":i=p.value.plays.filter(t=>!m.value.includes(t.name)).map(t=>t.name),c=null;break;case"上期":Me(),_.value=null;return;case"全包":i=p.value.plays.map(t=>t.name);break;case"单":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.max&&l%2===1}).map(t=>t.name));break;case"双":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.max&&l%2===0}).map(t=>t.name));break;case"大单":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.bigStart&&l<=a.max&&l%2===1}).map(t=>t.name));break;case"小单":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.smallEnd&&l%2===1}).map(t=>t.name));break;case"大双":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.bigStart&&l<=a.max&&l%2===0}).map(t=>t.name));break;case"小双":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.smallEnd&&l%2===0}).map(t=>t.name));break;case"单边":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.max&&(l<a.midStart||l>a.midEnd)&&l%2===1}).map(t=>t.name));break;case"双边":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.max&&(l<a.midStart||l>a.midEnd)&&l%2===0}).map(t=>t.name));break;case"大":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.bigStart&&l<=a.max}).map(t=>t.name));break;case"小":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.smallEnd}).map(t=>t.name));break;case"中":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.midStart&&l<=a.midEnd}).map(t=>t.name));break;case"边":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.max&&(l<a.midStart||l>a.midEnd)}).map(t=>t.name));break;case"大边":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.bigEdgeStart&&l<=a.max}).map(t=>t.name));break;case"小边":a&&(i=e.filter(t=>{const l=parseInt(t.name,10);return l>=a.min&&l<=a.smallEdgeEnd}).map(t=>t.name));break;case"0尾":case"1尾":case"2尾":case"3尾":case"4尾":case"5尾":case"6尾":case"7尾":case"8尾":case"9尾":{const t=parseInt(r.replace("尾",""),10);i=e.filter(l=>parseInt(l.name,10)%10===t).map(l=>l.name);break}case"小尾":i=e.filter(t=>parseInt(t.name,10)%10<=4).map(t=>t.name);break;case"大尾":i=e.filter(t=>parseInt(t.name,10)%10>=5).map(t=>t.name);break;case"3余0":case"3余1":case"3余2":{const t=parseInt(r.replace("3余",""),10);i=e.filter(l=>parseInt(l.name,10)%3===t).map(l=>l.name);break}case"4余0":case"4余1":case"4余2":case"4余3":{const t=parseInt(r.replace("4余",""),10);i=e.filter(l=>parseInt(l.name,10)%4===t).map(l=>l.name);break}case"5余0":case"5余1":case"5余2":case"5余3":case"5余4":{const t=parseInt(r.replace("5余",""),10);i=e.filter(l=>parseInt(l.name,10)%5===t).map(l=>l.name);break}}const g={};i.forEach(t=>{const l=p.value.plays.find(O=>O.name===t);l&&l.minBetGold>0&&(g[t]=String(l.minBetGold))}),f.value=g,m.value=i,_.value=c},fe=r=>{if(U.value=r,m.value.length>0){const s={...f.value};m.value.forEach(e=>{const o=parseInt(s[e]||"0",10);o>0&&(s[e]=String(Math.floor(o*r)))}),f.value=s}},Pe=r=>{T.value=String(r)},Re=()=>{if(!T.value||m.value.length===0||!p.value)return;const r=parseInt(T.value,10);if(isNaN(r)||r<=0)return;const s=ue(p.value.betMultiplier),e=p.value.startNum||0,o=p.value.plays||[];let u=0;const a={};m.value.forEach(t=>{const l=de(t,s,e,o);a[t]=l,u+=l});const i={};let c=0;m.value.forEach(t=>{const l=a[t],O=parseInt(f.value[t]||"0",10)||0,V=Math.floor(l/u*r);c+=V,i[t]=String(V+O)});const g=r-c;if(g>0&&m.value.length>0){const t=m.value[m.value.length-1],l=parseInt(i[t],10);i[t]=String(l+g)}f.value=i},Oe=async()=>{if(!(!y.activeGame?.id||!E))try{D.value=!0;const r=await nt({lottery_id:y.activeGame.id,game_group_id:E,page:1,pageSize:100});r.code===200&&r.data?G.value=r.data.list||[]:G.value=[]}catch(r){console.error("获取模式列表失败",r),G.value=[]}finally{D.value=!1}},Ve=()=>{N.value=!0,Oe()},Le=r=>{if(!p.value)return;const s=r.bet_no.split(",").map(a=>a.trim()).filter(a=>a),e=r.bet_no_gold.split(",").map(a=>a.trim()).filter(a=>a),o=[],u={};s.forEach((a,i)=>{p.value.plays.some(g=>g.name===a)&&(o.push(a),e[i]&&(u[a]=e[i]))}),m.value=o,f.value=u,J.value=r,N.value=!1,k.success(`已应用模式: ${r.mode_name}`)},qe=()=>{if(m.value.length===0||!K.currentCustomer||!p.value)return;const r=K.currentCustomer.points||0;if(r<=0)return;const s=ue(p.value.betMultiplier),e=p.value.startNum||0,o=p.value.plays||[];let u=0;const a={};m.value.forEach(t=>{const l=de(t,s,e,o);a[t]=l,u+=l});const i={};let c=0;m.value.forEach(t=>{const l=a[t],O=parseInt(f.value[t]||"0",10)||0,V=Math.floor(l/u*r);c+=V,i[t]=String(V+O)});const g=r-c;if(g>0&&m.value.length>0){const t=m.value[m.value.length-1],l=parseInt(i[t],10);i[t]=String(l+g)}f.value=i},ae=(r,s)=>{const e=parseInt(f.value[r]||"0",10),o=Math.max(0,Math.floor(e*s));f.value={...f.value,[r]:String(o)}},ze=async()=>{if(!p.value){k.error("请选择玩法分组");return}const r=P.value?.expect_no||"",s=p.value.id,e=m.value.join(","),o=m.value.map(c=>f.value[c]||"0").join(","),u=m.value.map(c=>{const g=p.value.plays.find(t=>t.name===c);return g?g.id:""}).filter(c=>c!=="").join(","),a=m.value.reduce((c,g)=>c+(parseInt(f.value[g]||"0",10)||0),0);if(!r){k.error("期号信息缺失，请稍后重试");return}if(a<=0){k.error("请输入投注金额");return}const i={game_group_id:s,lottery_id:y.activeGame.id,bet_no:e,bet_expect_no:r,bet_gold:o,lottery_played_id:u,total_gold:a};try{const c=await st(i);if(c.code===200){k.success("投注成功！");const g={...S.value};m.value.forEach(t=>{const l=parseInt(f.value[t]||"0",10)||0;l>0&&(g[t]=(g[t]||0)+l)}),S.value=g,m.value=[],f.value={},_.value=null,me()}else c.code!==3001&&k.error(c.message||"投注失败，请稍后重试")}catch(c){console.error("投注失败：",c),k.error("投注失败，请稍后重试")}},Fe=()=>{m.value=[],f.value={},_.value=null};return Ke(()=>{y.initSoundSetting(),Z=y.soundEnabled,X=setInterval(()=>{j.value>0&&(j.value--,R=j.value),M.value>0&&M.value--},1e3),Y=setInterval(()=>{R<=0&&!$&&!z&&(z=!0,ne().finally(()=>{z=!1}))},2e3)}),Qe(()=>{X&&clearInterval(X),Y&&clearInterval(Y)}),(r,s)=>(d(),v("div",ot,[p.value?(d(),v("div",it,[ce.includes(Number(p.value.id))?(d(),v(h,{key:0},[n("div",ct,[(d(),v(h,null,w(_e,e=>n("button",{key:e,onClick:o=>A(e),class:C(["py-1.5 text-xs rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300 hover:border-red-500"])},x(e),11,ut)),64))]),n("div",dt,[(d(),v(h,null,w(ke,e=>n("button",{key:e,onClick:o=>A(e),class:C(["py-1.5 text-xs rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300 hover:border-red-500"])},x(e),11,mt)),64))]),n("div",vt,[(d(),v(h,null,w(we,e=>n("button",{key:e,onClick:o=>A(e),class:C(["py-1.5 text-xs rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300 hover:border-red-500"])},x(e),11,pt)),64)),(d(),v(h,null,w(Ce,e=>n("button",{key:e,onClick:o=>A(e),class:"py-1.5 text-xs rounded bg-red-600 text-white"},x(e),9,gt)),64))])],64)):(d(),v("div",ft,[(d(),v(h,null,w(["全包","上期","反选","清空"],e=>n("button",{key:e,onClick:o=>A(e),class:"py-1.5 text-xs rounded bg-red-600 text-white"},x(e),9,xt)),64))])),B.value?(d(),v(h,{key:2},[ce.includes(Number(p.value.id))?(d(),v("div",bt,[n("div",null,[s[4]||(s[4]=n("div",{class:"flex items-center mb-2"},[n("span",{class:"text-xs text-gray-500"},"—"),n("span",{class:"text-xs text-gray-600 mx-1"},"追加尾数"),n("span",{class:"text-xs text-gray-500 flex-1"},"———")],-1)),n("div",ht,[(d(!0),v(h,null,w(te.slice(0,4),e=>(d(),v("button",{key:e,onClick:o=>A(e),class:C(["py-1 text-[10px] rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300"])},x(e),11,yt))),128))]),n("div",_t,[(d(!0),v(h,null,w(te.slice(4,8),e=>(d(),v("button",{key:e,onClick:o=>A(e),class:C(["py-1 text-[10px] rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300"])},x(e),11,kt))),128))]),n("div",wt,[(d(!0),v(h,null,w(te.slice(8),e=>(d(),v("button",{key:e,onClick:o=>A(e),class:C(["py-1 text-[10px] rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300"])},x(e),11,Ct))),128))])]),n("div",null,[s[5]||(s[5]=n("div",{class:"flex items-center mb-2"},[n("span",{class:"text-xs text-gray-500"},"—"),n("span",{class:"text-xs text-gray-600 mx-1"},"追加余数"),n("span",{class:"text-xs text-gray-500 flex-1"},"———")],-1)),n("div",Et,[(d(),v(h,null,w(Ee,e=>n("button",{key:e,onClick:o=>A(e),class:C(["py-1 text-[10px] rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300"])},x(e),11,St)),64))]),n("div",At,[(d(),v(h,null,w(Se,e=>n("button",{key:e,onClick:o=>A(e),class:C(["py-1 text-[10px] rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300"])},x(e),11,It)),64))]),n("div",Nt,[(d(),v(h,null,w(Ae,e=>n("button",{key:e,onClick:o=>A(e),class:C(["py-1 text-[10px] rounded border",_.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300"])},x(e),11,Gt)),64))])])])):L("",!0),n("div",jt,[s[6]||(s[6]=n("div",{class:"flex items-center mb-2"},[n("span",{class:"text-xs text-gray-500"},"——"),n("span",{class:"text-xs text-gray-600 mx-2"},"倍数投注"),n("span",{class:"text-xs text-gray-500 flex-1"},"——————————")],-1)),n("div",Mt,[(d(),v(h,null,w(Ie,e=>n("button",{key:e,onClick:o=>fe(e),class:C(["py-1.5 text-xs rounded border",U.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300"])},x(e)+"倍 ",11,$t)),64))]),n("div",Bt,[(d(),v(h,null,w(Ne,e=>n("button",{key:e,onClick:o=>fe(e),class:C(["py-1.5 text-xs rounded border",U.value===e?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-red-300"])},x(e)+"倍 ",11,Tt)),64))])])],64)):L("",!0),n("button",{onClick:s[0]||(s[0]=e=>B.value=!B.value),class:"w-full mt-3 py-2 bg-orange-500 text-white rounded-lg flex items-center justify-center gap-1"},[W(x(B.value?"收起":"展开")+" ",1),B.value?(d(),le(oe(lt),{key:0,size:16})):(d(),le(oe(he),{key:1,size:16}))]),n("div",Pt,[n("button",{onClick:Ve,class:"py-2 border border-gray-300 rounded-lg text-sm text-gray-600 flex items-center justify-center gap-1"},[s[7]||(s[7]=W(" 自定义模式 ",-1)),Ue(oe(he),{size:14})]),n("button",{onClick:qe,class:"py-2 border border-gray-300 rounded-lg text-sm text-gray-600"}," 梭哈 ")]),n("div",Rt,[n("div",Ot,[(d(),v(h,null,w(Ge,e=>n("button",{key:e.display,onClick:o=>Pe(e.value),class:"w-9 h-9 flex-shrink-0 hover:scale-110 transition-transform"},[n("img",{src:e.img,alt:e.display,class:"w-full h-full object-contain"},null,8,Lt)],8,Vt)),64))]),De(n("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=e=>T.value=e),class:"w-20 h-8 px-2 border border-gray-300 rounded text-sm flex-shrink-0",placeholder:"金额"},null,512),[[Je,T.value]]),n("button",{onClick:Re,class:"h-8 px-2 bg-red-600 text-white text-xs rounded flex-shrink-0 whitespace-nowrap"}," 定额梭哈 ")])])):L("",!0),n("div",qt,[s[9]||(s[9]=n("div",{class:"grid grid-cols-[80px_1fr_100px_90px] text-xs text-gray-500 border-b px-3 py-2"},[n("span",null,"号码"),n("span",{class:"text-center"},"我的已投注"),n("span",{class:"text-center"},"投注"),n("span")],-1)),Q.value?(d(),v("div",zt,[...s[8]||(s[8]=[n("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"},null,-1),n("span",{class:"ml-2 text-gray-600"},"加载中...",-1)])])):p.value?(d(),v("div",Ft,[(d(!0),v(h,null,w(p.value.plays,e=>(d(),v("div",{key:e.id,class:C(["grid grid-cols-[80px_1fr_100px_90px] items-center px-3 py-2",m.value.includes(e.name)?"bg-orange-50":"bg-white"])},[n("div",Wt,[n("button",{onClick:o=>ge(e),class:C(["w-8 h-8 rounded-full text-white font-bold text-sm flex items-center justify-center",m.value.includes(e.name)?"bg-orange-500":"bg-blue-400"])},x(e.name),11,Kt),n("span",Qt,x((e.odds/1e3).toFixed(2)),1)]),n("div",{class:C(["text-center text-sm",S.value[e.name]>0?"text-red-600 font-medium":"text-gray-400"])},x(S.value[e.name]>0?S.value[e.name].toLocaleString():"-"),3),n("div",null,[n("input",{type:"number",value:f.value[e.name]||"",onInput:o=>Te(e.name,o.target.value),onFocus:()=>{m.value.includes(e.name)||ge(e)},class:"w-full h-8 px-2 border border-gray-300 rounded text-sm text-center",placeholder:""},null,40,Ut)]),n("div",Dt,[n("button",{onClick:o=>ae(e.name,.5),class:"text-xs text-blue-600"},"×0.5",8,Jt),n("button",{onClick:o=>ae(e.name,2),class:"text-xs text-blue-600"},"×2",8,Ht),n("button",{onClick:o=>ae(e.name,10),class:"text-xs text-blue-600"},"×10",8,Xt)])],2))),128))])):(d(),v("div",Yt,"暂无玩法数据"))]),n("div",Zt,[I.value?(d(),v("div",es,[n("div",ts,[s[10]||(s[10]=n("span",{class:"text-gray-500"},"上期:",-1)),n("span",ss,x(I.value.expect_no||"--"),1)]),n("div",ns,[n("span",as,x($e()),1)]),n("div",rs,x(I.value.open_time||""),1)])):L("",!0),n("div",ls,[n("div",os,[s[11]||(s[11]=n("span",{class:"text-gray-600"},"已投注",-1)),n("span",is,x(Object.values(S.value).reduce((e,o)=>e+o,0).toLocaleString()),1),s[12]||(s[12]=n("img",{alt:"coin",class:"inline-block w-4 h-4 ml-0.5",src:xe},null,-1))]),n("div",cs,[s[13]||(s[13]=n("span",{class:"text-gray-600"},"本次投注",-1)),n("span",us,x(se.value.toLocaleString()),1),s[14]||(s[14]=n("img",{alt:"coin",class:"inline-block w-4 h-4 ml-0.5",src:xe},null,-1))])]),n("div",ds,[n("button",{onClick:Fe,class:"bg-blue-600 text-white font-bold flex items-center justify-center gap-1"},[...s[15]||(s[15]=[n("span",{class:"text-lg"},"<",-1),W(" 取消 ",-1)])]),n("button",ms,[M.value>0?(d(),v(h,{key:0},[s[16]||(s[16]=n("span",{class:"text-xs text-gray-500"},"截止投注",-1)),n("span",vs,x(pe(M.value)),1)],64)):(d(),v(h,{key:1},[s[17]||(s[17]=n("span",{class:"text-xs text-gray-500"},"开奖倒计时",-1)),n("span",ps,x(pe(j.value)),1)],64))]),n("button",{onClick:ze,disabled:H.value===3001||se.value<=0,class:C(["font-bold flex items-center justify-center gap-1",H.value===3001||se.value<=0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-red-600 text-white"])},[...s[18]||(s[18]=[n("span",{class:"text-lg"},"✓",-1),W(" 投注 ",-1)])],10,gs)])]),(d(),le(Ye,{to:"body"},[N.value?(d(),v("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:s[3]||(s[3]=Xe(e=>N.value=!1,["self"]))},[n("div",fs,[s[21]||(s[21]=n("div",{class:"p-3 border-b font-medium"},"选择投注模式",-1)),n("div",xs,[D.value?(d(),v("div",bs,[...s[19]||(s[19]=[n("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-red-600 border-r-transparent"},null,-1),n("span",{class:"ml-2 text-gray-600"},"加载中...",-1)])])):G.value.length===0?(d(),v("div",hs,[...s[20]||(s[20]=[n("p",null,"暂无模式",-1),n("p",{class:"text-sm mt-2"},'请先在"模式"页面创建投注模式',-1)])])):(d(),v("div",ys,[(d(!0),v(h,null,w(G.value,e=>(d(),v("button",{key:e.id,onClick:o=>Le(e),class:C(["w-full px-4 py-3 text-left hover:bg-gray-50 flex justify-between items-center",J.value?.id===e.id&&"bg-orange-50"])},[n("span",ks,x(e.mode_name),1),n("span",ws,x(e.bet_gold),1)],10,_s))),128))]))]),n("div",Cs,[n("button",{onClick:s[2]||(s[2]=e=>N.value=!1),class:"w-full py-2 bg-gray-200 text-gray-700 rounded-lg"}," 关闭 ")])])])):L("",!0)]))]))}});export{Bs as default};
