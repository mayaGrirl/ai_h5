import{m as b}from"./customer-DY5pDxa4.js";import{t as _}from"./index-B8Q_Szy2.js";import{d as h,o as w,r as a,b as k,q as n,l as t,J as g,F as p,t as M,z as u,v as o}from"./vue-vendor-ntQnFNWs.js";import"./utils-vendor-CbLx3nH2.js";const B={class:"text-center"},R={class:"text-center font-medium text-red-500"},z={class:"text-center font-medium text-orange-500"},C={key:1,class:"py-4 text-center text-xs text-gray-400"},q=h({__name:"index",setup(D){const l=a([]),x=a(1),i=a(!0),c=a(!1),f=a(null);let d=null;const m=async r=>{c.value=!0;try{const{code:e,data:s,message:v}=await b({pagination:{page:r,size:20}});await new Promise(y=>setTimeout(y,500)),e===200?(s.length<20&&(i.value=!1),r===1&&(l.value=[]),l.value=[...l.value,...s]):_.error(v)}catch{_.error("获取数据失败")}finally{c.value=!1}};return w(async()=>{await m(1),f.value&&i.value&&(d=new IntersectionObserver(([r])=>{if(r.isIntersecting&&!c.value){const e=x.value+1;x.value=e,m(e)}},{threshold:1}),d.observe(f.value))}),k(()=>{d&&d.disconnect()}),(r,e)=>(o(),n(p,null,[e[0]||(e[0]=t("div",{class:"grid grid-cols-[1fr_1fr_1fr] px-3 py-2 text-xs text-gray-500 border-b bg-white"},[t("div",{class:"text-center"},"日期"),t("div",{class:"text-center"},"获得积分"),t("div",{class:"text-center"},"获得金豆")],-1)),(o(!0),n(p,null,M(l.value,(s,v)=>(o(),n("div",{key:`all-key-${v}`,class:"grid grid-cols-[1fr_1fr_1fr] px-3 py-3 border-b text-sm items-center bg-white"},[t("div",B,u(s?.sign_date||""),1),t("div",R,"+"+u(s?.reward_points||0),1),t("div",z,"+"+u(s?.reward_base_coin||0),1)]))),128)),i.value?(o(),n("div",{key:0,ref_key:"loadMoreRef",ref:f,class:"py-4 text-center text-xs text-gray-400"},u(c.value?"加载中...":"上拉加载更多"),513)):g("",!0),i.value?g("",!0):(o(),n("div",C," 没有更多数据了 "))],64))}});export{q as default};
