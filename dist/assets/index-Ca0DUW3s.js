import{_ as b}from"./coin-BjeO1Yvx.js";import{a as w,t as o}from"./index-BFniYAsS.js";import{y as j,z as k}from"./customer-GqufupLc.js";import{_ as N}from"./PageHeader.vue_vue_type_script_setup_true_lang-BMoHJdZR.js";import{d as C,o as R,q as c,f as S,n as t,y as d,x as i,r as n,F as p,t as g,u as V,l as f,Q as B,N as D}from"./vue-vendor-2ZNhN7Rr.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-Wv4pCOXT.js";const q={class:"min-h-screen bg-[#f5f7fb] pb-16"},z={class:"p-2 pt-4"},F={class:"grid grid-cols-[0.5fr_1fr_1.5fr] px-3 py-2 text-xs text-gray-500 border-b bg-white rounded-t-lg"},L={class:"flex items-center justify-center"},$={class:"flex items-center justify-center"},E={class:"flex justify-center items-center"},I={class:"flex items-center justify-center"},M=["src","alt"],Q={class:"flex justify-center items-center gap-1 text-red-500 font-medium"},T={class:"flex justify-center items-center font-medium text-xs text-gray-600"},A={class:"px-3 mt-6"},G=["disabled"],Z=C({__name:"index",setup(H){const{t:r}=w(),u=n(!0),m=n(!0),v=n([]),l=n(0),_=n(10),y=async()=>{u.value=!0;try{const e=await j();if(e.code===200&&e.data){v.value=e.data.options||[],_.value=e.data.limit||10;let s=0;e.data.limit>e.data.receive_count&&(s=e.data.limit-e.data.receive_count),l.value=s,s>0&&(m.value=!1)}}catch(e){console.error("加载救济数据失败",e)}finally{u.value=!1}},x=async()=>{if(l.value<1){o.error(r("mine.relief.receive-limit-hit"));return}try{const e=await k();e.code===200?(o.success(e.message||"领取成功"),l.value=l.value-1):o.error(e.message||"领取失败")}catch{o.error("领取失败")}};return R(()=>{y()}),(e,s)=>(f(),c("div",q,[S(N,{title:d(r)("mine.quick.relief")},null,8,["title"]),t("div",z,[t("div",F,[t("div",L,i(d(r)("mine.relief.table-header-1")),1),t("div",$,i(d(r)("mine.relief.table-header-2")),1),t("div",E,i(d(r)("mine.relief.table-header-3")),1)]),u.value?(f(),c(p,{key:0},g(11,a=>t("div",{key:a,class:"grid grid-cols-[0.5fr_1fr_1.5fr] px-3 py-3 border-b bg-white"},[...s[0]||(s[0]=[B('<div class="flex justify-center"><div class="w-4 h-4 bg-gray-200 rounded animate-pulse"></div></div><div class="flex justify-center"><div class="w-12 h-4 bg-gray-200 rounded animate-pulse"></div></div><div class="flex justify-center"><div class="w-24 h-4 bg-gray-200 rounded animate-pulse"></div></div>',3)])])),64)):(f(!0),c(p,{key:1},g(v.value,(a,h)=>(f(),c("div",{key:h,class:"grid grid-cols-[0.5fr_1fr_1.5fr] px-3 py-3 border-b text-sm items-center bg-white"},[t("div",I,[t("img",{src:`/mine/level/${a.level}.png`,alt:a.name||"",class:"w-[15px] h-[15px]"},null,8,M)]),t("div",Q,[D(i(a.day_jiuji_point)+" ",1),s[1]||(s[1]=t("img",{src:b,alt:"coin",class:"inline-block w-[13px] h-[13px]"},null,-1))]),t("div",T," 金豆≤"+i(a.day_jiuji_point)+"时可领取，每日"+i(_.value)+"次 ",1)]))),128))]),t("div",A,[t("button",{disabled:m.value,class:V(["h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",m.value?"opacity-60 cursor-not-allowed":"cursor-pointer"]),onClick:x}," 领取救济金（剩余"+i(l.value)+"次） ",11,G)])]))}});export{Z as default};
