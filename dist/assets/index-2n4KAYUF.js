import{d as b,o as $,r as u,b as C,q as l,F as p,C as y,t as h,x as d,l as a,n as e,N as L,f as S,y as M,Q as B,k as w,c as T,D as V,u as j,L as q}from"./vue-vendor-2ZNhN7Rr.js";import{_ as R}from"./coin-BjeO1Yvx.js";import{F as z,d as D}from"./customer-Bjn-RgPd.js";import{t as m}from"./index-BBQ2rUtM.js";import{C as I}from"./chevron-left-CUcGB0gT.js";import"./utils-vendor-CbLx3nH2.js";const N={class:"text-center"},P={class:"text-gray-900"},F={class:"text-center font-medium text-red-500"},O={class:"text-center font-medium text-red-500"},E={class:"flex justify-center items-center gap-1 text-red-500 font-medium"},Q={key:1,class:"py-4 text-center text-xs text-gray-400"},U=b({__name:"index",setup(k){const n=u([]),v=u(1),o=u(!0),i=u(!1),f=u(null);let c=null;const x=async s=>{i.value=!0;try{const{code:t,data:r,message:_}=await z({pagination:{page:s,size:20}});await new Promise(g=>setTimeout(g,500)),t===200?(r.length<20&&(o.value=!1),s===1&&(n.value=[]),n.value=[...n.value,...r]):m.error(_)}catch{m.error("获取数据失败")}finally{i.value=!1}};return $(async()=>{await x(1),f.value&&o.value&&(c=new IntersectionObserver(([s])=>{if(s.isIntersecting&&!i.value){const t=v.value+1;v.value=t,x(t)}},{threshold:1}),c.observe(f.value))}),C(()=>{c&&c.disconnect()}),(s,t)=>(a(),l(p,null,[(a(!0),l(p,null,h(n.value,(r,_)=>(a(),l("div",{key:`all-key-${_}`,class:"grid grid-cols-[1.2fr_0.8fr_0.8fr_1fr] px-3 py-3 border-b text-sm items-center"},[e("div",N,[e("div",P,d(r?.type_label||""),1)]),e("div",F,d((r?.b_points||0).toLocaleString()),1),e("div",O,d((r?.points||0).toLocaleString()),1),e("div",E,[L(d((r?.a_points||0).toLocaleString())+" ",1),t[0]||(t[0]=e("img",{src:R,alt:"coin",class:"inline-block w-[13px] h-[13px]"},null,-1))])]))),128)),o.value?(a(),l("div",{key:0,ref_key:"loadMoreRef",ref:f,class:"py-4 text-center text-xs text-gray-400"},d(i.value?"加载中...":"上拉加载更多"),513)):y("",!0),o.value?y("",!0):(a(),l("div",Q," 没有更多数据了 "))],64))}}),A={class:"text-center"},G={class:"text-gray-900"},H={class:"text-center font-medium text-red-500"},J={class:"text-center font-medium text-red-500"},K={class:"flex justify-center items-center gap-1 text-red-500 font-medium"},W={key:1,class:"py-4 text-center text-xs text-gray-400"},X=b({__name:"index",setup(k){const n=u([]),v=u(1),o=u(!0),i=u(!1),f=u(null);let c=null;const x=async s=>{i.value=!0;try{const{code:t,data:r,message:_}=await D({pagination:{page:s,size:20}});await new Promise(g=>setTimeout(g,500)),t===200?(r.length<20&&(o.value=!1),s===1&&(n.value=[]),n.value=[...n.value,...r]):m.error(_)}catch{m.error("获取数据失败")}finally{i.value=!1}};return $(async()=>{await x(1),f.value&&o.value&&(c=new IntersectionObserver(([s])=>{if(s.isIntersecting&&!i.value){const t=v.value+1;v.value=t,x(t)}},{threshold:1}),c.observe(f.value))}),C(()=>{c&&c.disconnect()}),(s,t)=>(a(),l(p,null,[(a(!0),l(p,null,h(n.value,(r,_)=>(a(),l("div",{key:`all-key-${_}`,class:"grid grid-cols-[1.2fr_0.8fr_0.8fr_1fr] px-3 py-3 border-b text-sm items-center"},[e("div",A,[e("div",G,d(r?.type_label||""),1)]),e("div",H,d((r?.b_deposit||0).toLocaleString()),1),e("div",J,d((r?.deposit||0).toLocaleString()),1),e("div",K,[L(d((r?.a_deposit||0).toLocaleString())+" ",1),t[0]||(t[0]=e("img",{src:R,alt:"coin",class:"inline-block w-[13px] h-[13px]"},null,-1))])]))),128)),o.value?(a(),l("div",{key:0,ref_key:"loadMoreRef",ref:f,class:"py-4 text-center text-xs text-gray-400"},d(i.value?"加载中...":"上拉加载更多"),513)):y("",!0),o.value?y("",!0):(a(),l("div",W," 没有更多数据了 "))],64))}}),Y={class:"flex min-h-screen justify-center bg-[#eef3f8]"},Z={class:"w-full max-w-xl bg-[#f5f7fb] shadow-sm"},ee={class:"sticky top-0 z-40 bg-gradient-to-r from-red-600 to-red-500"},te={class:"flex h-12 items-center justify-between px-3"},se={class:"grid grid-cols-2 text-center text-sm bg-white"},re=["onClick"],ae={class:"p-2"},ue=b({__name:"index",setup(k){const n=q(),v=V(),o=T(()=>n.query.tab||"points"),i=[{key:"points",label:"积分记录"},{key:"deposit",label:"账户记录"}],f=x=>{v.replace({query:{...n.query,tab:x}})},c=()=>{v.back()};return(x,s)=>(a(),l("div",Y,[e("div",Z,[e("header",ee,[e("div",te,[e("button",{onClick:c,class:"flex items-center text-white"},[S(M(I),{class:"h-5 w-5"})]),s[0]||(s[0]=e("span",{class:"text-white font-bold"},"账户记录",-1)),s[1]||(s[1]=e("div",{class:"w-5"},null,-1))])]),e("main",null,[e("div",se,[(a(),l(p,null,h(i,t=>e("button",{key:t.key,onClick:r=>f(t.key),class:j(["py-3 text-center",o.value===t.key?"text-red-500 font-bold border-b-2 border-red-500":"text-gray-500"])},d(t.label),11,re)),64))]),e("div",ae,[s[2]||(s[2]=B('<div class="grid grid-cols-[1.2fr_0.8fr_0.8fr_1fr] px-3 py-2 text-xs text-gray-500 border-b"><div class="text-center">来源</div><div class="text-center">变化前</div><div class="text-center">变化</div><div class="text-center">变化后</div></div>',1)),o.value==="points"?(a(),w(U,{key:0})):o.value==="deposit"?(a(),w(X,{key:1})):y("",!0)])]),s[3]||(s[3]=e("div",{class:"h-14"},null,-1))])]))}});export{ue as default};
