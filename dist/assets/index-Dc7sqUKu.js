import{K as b}from"./customer-BSGOFDLz.js";import{t as p}from"./index-BdfOqB2v.js";import{d as h}from"./dayjs.min-CLb2-34J.js";import{d as k,o as w,r,b as M,q as n,l as s,J as g,F as y,t as D,z as u,v as o,u as Y,x as z}from"./vue-vendor-ntQnFNWs.js";import"./utils-vendor-CbLx3nH2.js";const B={class:"text-center"},C={class:"text-center"},R={key:1,class:"py-4 text-center text-xs text-gray-400"},E=k({__name:"index",setup(F){const l=r([]),x=r(1),i=r(!0),c=r(!1),f=r(null);let d=null;const m=async a=>{c.value=!0;try{const{code:e,data:t,message:v}=await b({pagination:{page:a,size:20}});await new Promise(_=>setTimeout(_,500)),e===200?(t.length<20&&(i.value=!1),a===1&&(l.value=[]),l.value=[...l.value,...t]):p.error(v)}catch{p.error("获取数据失败")}finally{c.value=!1}};return w(async()=>{await m(1),f.value&&i.value&&(d=new IntersectionObserver(([a])=>{if(a.isIntersecting&&!c.value){const e=x.value+1;x.value=e,m(e)}},{threshold:1}),d.observe(f.value))}),M(()=>{d&&d.disconnect()}),(a,e)=>(o(),n(y,null,[e[0]||(e[0]=s("div",{class:"grid grid-cols-[1fr_1fr_1fr] px-3 py-2 text-xs text-gray-500 border-b bg-white"},[s("div",{class:"text-center"},"日期"),s("div",{class:"text-center"},"用户"),s("div",{class:"text-center"},"状态")],-1)),(o(!0),n(y,null,D(l.value,(t,v)=>(o(),n("div",{key:`all-key-${v}`,class:"grid grid-cols-[1fr_1fr_1fr] px-3 py-3 border-b text-sm items-center bg-white"},[s("div",B,u(Y(h).unix(t?.addtime||0).format("YYYY-MM-DD")),1),s("div",C,u(t?.username||"--"),1),s("div",{class:z(["text-center font-medium",t?.status===1?"text-green-500":"text-gray-500"])},u(t?.status_label||"--"),3)]))),128)),i.value?(o(),n("div",{key:0,ref_key:"loadMoreRef",ref:f,class:"py-4 text-center text-xs text-gray-400"},u(c.value?"加载中...":"上拉加载更多"),513)):g("",!0),i.value?g("",!0):(o(),n("div",R," 没有更多数据了 "))],64))}});export{E as default};
