import{d as g,q as c,n as e,f as x,y as t,M as k,C as _,S as b,x as a,W as S,r as m,F as N,t as q,U as V,N as C,u as D,l as d,D as M}from"./vue-vendor-2ZNhN7Rr.js";import{a as T,u as U,S as j,t as p}from"./index-CIZoSaJ3.js";import{J as A}from"./customer-CDJyDjhM.js";import{_ as B}from"./PageHeader.vue_vue_type_script_setup_true_lang-BnPQ6QDM.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-DCF22wfj.js";const E={class:"flex min-h-screen justify-center bg-[#eef3f8]"},F={class:"w-full max-w-xl bg-[#f5f7fb] shadow-sm"},I={class:"px-3 pb-20 pt-3"},O={class:"bg-white rounded-xl shadow-sm p-2"},P={class:"flex justify-center items-center"},z={class:"w-1/5 text-gray-700"},J={value:""},K=["value"],L={key:0,class:"mt-1 text-xs text-red-500"},Q={class:"bg-white rounded-xl shadow-sm p-2 mt-2"},R={class:"flex justify-center items-center"},W={class:"w-1/5 text-gray-700"},$=["placeholder"],G={key:0,class:"mt-1 text-xs text-red-500"},H={class:"rounded-lg mb-3 overflow-hidden"},X={class:"flex items-center text-gray-600 px-4 py-3 pb-0"},Y={class:"px-4 py-3 text-gray-600"},Z={class:"relative pl-3 text-gray-600 before:absolute before:left-0 before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:rounded-full before:bg-red-400"},ee={class:"relative pl-3 text-red-600 before:absolute before:left-0 before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:rounded-full before:bg-red-400"},se=["disabled"],ce=g({__name:"index",setup(te){const v=M(),{t:s}=T(),h=U(),i=m(!1),o=m({safe_ask:"",answer:""}),r=m({}),f=!!h.currentCustomer?.securitypass,w=()=>(r.value={},o.value.safe_ask?o.value.answer?o.value.answer.length>50?(r.value.answer=s("mine.security-settings.group-account.password.answer-max"),!1):!0:(r.value.answer=s("common.form.placeholder.enter")+s("mine.toolcase.form-label.answer"),!1):(r.value.safe_ask=s("mine.toolcase.question-options.default"),!1)),y=async()=>{if(w()){i.value=!0;try{const u=await A({safe_ask:o.value.safe_ask,answer:o.value.answer});u.code===200?(p.success(u.message||"设置成功"),v.back()):p.error(u.message||"设置失败")}catch{p.error("设置失败")}finally{i.value=!1}}};return(u,l)=>(d(),c("div",E,[e("div",F,[x(B,{title:t(s)("mine.security-settings.group-pay.security")},null,8,["title"]),e("main",I,[e("form",{onSubmit:k(y,["prevent"]),class:"mt-5"},[e("div",O,[e("div",P,[e("label",z,a(t(s)("mine.toolcase.form-label.question")),1),b(e("select",{"onUpdate:modelValue":l[0]||(l[0]=n=>o.value.safe_ask=n),disabled:f,class:"w-4/5 text-gray-800 placeholder-gray-400 focus:outline-none h-12"},[e("option",J,a(t(s)("mine.toolcase.question-options.default")),1),(d(!0),c(N,null,q(t(j),n=>(d(),c("option",{key:n.value,value:n.value},a(t(s)(n.i18nKey)),9,K))),128))],512),[[S,o.value.safe_ask]])]),r.value.safe_ask?(d(),c("p",L,a(r.value.safe_ask),1)):_("",!0)]),e("div",Q,[e("div",R,[e("label",W,a(t(s)("mine.toolcase.form-label.answer")),1),b(e("input",{"onUpdate:modelValue":l[1]||(l[1]=n=>o.value.answer=n),type:"text",disabled:f,placeholder:t(s)("common.form.placeholder.enter")+t(s)("mine.toolcase.form-label.answer"),class:"w-4/5 text-gray-800 placeholder-gray-400 focus:outline-none h-12"},null,8,$),[[V,o.value.answer]])]),r.value.answer?(d(),c("p",G,a(r.value.answer),1)):_("",!0)]),e("div",H,[e("div",X,[l[2]||(l[2]=e("span",{class:"w-1 h-4 bg-red-600 rounded mr-2"},null,-1)),C(" "+a(t(s)("mine.security-settings.group-account.password.tip")),1)]),e("div",Y,[e("p",Z,a(t(s)("mine.security-settings.group-account.question.tip-1")),1),e("p",ee,a(t(s)("mine.security-settings.group-account.question.tip-2")),1)])]),e("button",{type:"submit",disabled:i.value||f,class:D(["mt-10 h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",i.value||f?"opacity-60 cursor-not-allowed":"cursor-pointer"])},a(i.value?t(s)("common.form.button.submitting"):t(s)("common.form.button.submit")),11,se)],32)]),l[3]||(l[3]=e("div",{class:"h-14"},null,-1))])]))}});export{ce as default};
