import{d as b,o as $,r as u,b as L,q as l,F as p,J as y,t as h,z as d,v as a,l as e,L as C,f as S,u as M,O as B,k as w,c as z,B as I,I as T,x as V}from"./vue-vendor-ntQnFNWs.js";import{_ as R}from"./coin-BjeO1Yvx.js";import{D as j,d as q}from"./customer-Dq31nYw8.js";import{t as m}from"./index-CFMypmBh.js";import{C as D}from"./chevron-left-Cq0BIQK6.js";import"./utils-vendor-CbLx3nH2.js";const P={class:"text-center"},N={class:"text-gray-900"},O={class:"text-center font-medium text-red-500"},F={class:"text-center font-medium text-red-500"},E={class:"flex justify-center items-center gap-1 text-red-500 font-medium"},J={key:1,class:"py-4 text-center text-xs text-gray-400"},U=b({__name:"index",setup(k){const n=u([]),v=u(1),o=u(!0),i=u(!1),f=u(null);let c=null;const x=async s=>{i.value=!0;try{const{code:t,data:r,message:_}=await j({pagination:{page:s,size:20}});await new Promise(g=>setTimeout(g,500)),t===200?(r.length<20&&(o.value=!1),s===1&&(n.value=[]),n.value=[...n.value,...r]):m.error(_)}catch{m.error("获取数据失败")}finally{i.value=!1}};return $(async()=>{await x(1),f.value&&o.value&&(c=new IntersectionObserver(([s])=>{if(s.isIntersecting&&!i.value){const t=v.value+1;v.value=t,x(t)}},{threshold:1}),c.observe(f.value))}),L(()=>{c&&c.disconnect()}),(s,t)=>(a(),l(p,null,[(a(!0),l(p,null,h(n.value,(r,_)=>(a(),l("div",{key:`all-key-${_}`,class:"grid grid-cols-[1.2fr_0.8fr_0.8fr_1fr] px-3 py-3 border-b text-sm items-center"},[e("div",P,[e("div",N,d(r?.type_label||""),1)]),e("div",O,d((r?.b_points||0).toLocaleString()),1),e("div",F,d((r?.points||0).toLocaleString()),1),e("div",E,[C(d((r?.a_points||0).toLocaleString())+" ",1),t[0]||(t[0]=e("img",{src:R,alt:"coin",class:"inline-block w-[13px] h-[13px]"},null,-1))])]))),128)),o.value?(a(),l("div",{key:0,ref_key:"loadMoreRef",ref:f,class:"py-4 text-center text-xs text-gray-400"},d(i.value?"加载中...":"上拉加载更多"),513)):y("",!0),o.value?y("",!0):(a(),l("div",J," 没有更多数据了 "))],64))}}),A={class:"text-center"},G={class:"text-gray-900"},H={class:"text-center font-medium text-red-500"},K={class:"text-center font-medium text-red-500"},Q={class:"flex justify-center items-center gap-1 text-red-500 font-medium"},W={key:1,class:"py-4 text-center text-xs text-gray-400"},X=b({__name:"index",setup(k){const n=u([]),v=u(1),o=u(!0),i=u(!1),f=u(null);let c=null;const x=async s=>{i.value=!0;try{const{code:t,data:r,message:_}=await q({pagination:{page:s,size:20}});await new Promise(g=>setTimeout(g,500)),t===200?(r.length<20&&(o.value=!1),s===1&&(n.value=[]),n.value=[...n.value,...r]):m.error(_)}catch{m.error("获取数据失败")}finally{i.value=!1}};return $(async()=>{await x(1),f.value&&o.value&&(c=new IntersectionObserver(([s])=>{if(s.isIntersecting&&!i.value){const t=v.value+1;v.value=t,x(t)}},{threshold:1}),c.observe(f.value))}),L(()=>{c&&c.disconnect()}),(s,t)=>(a(),l(p,null,[(a(!0),l(p,null,h(n.value,(r,_)=>(a(),l("div",{key:`all-key-${_}`,class:"grid grid-cols-[1.2fr_0.8fr_0.8fr_1fr] px-3 py-3 border-b text-sm items-center"},[e("div",A,[e("div",G,d(r?.type_label||""),1)]),e("div",H,d((r?.b_deposit||0).toLocaleString()),1),e("div",K,d((r?.deposit||0).toLocaleString()),1),e("div",Q,[C(d((r?.a_deposit||0).toLocaleString())+" ",1),t[0]||(t[0]=e("img",{src:R,alt:"coin",class:"inline-block w-[13px] h-[13px]"},null,-1))])]))),128)),o.value?(a(),l("div",{key:0,ref_key:"loadMoreRef",ref:f,class:"py-4 text-center text-xs text-gray-400"},d(i.value?"加载中...":"上拉加载更多"),513)):y("",!0),o.value?y("",!0):(a(),l("div",W," 没有更多数据了 "))],64))}}),Y={class:"flex min-h-screen justify-center bg-[#eef3f8]"},Z={class:"w-full max-w-xl bg-[#f5f7fb] shadow-sm"},ee={class:"sticky top-0 z-40 bg-gradient-to-r from-red-600 to-red-500"},te={class:"flex h-12 items-center justify-between px-3"},se={class:"grid grid-cols-2 text-center text-sm bg-white"},re=["onClick"],ae={class:"p-2"},ue=b({__name:"index",setup(k){const n=T(),v=I(),o=z(()=>n.query.tab||"points"),i=[{key:"points",label:"积分记录"},{key:"deposit",label:"账户记录"}],f=x=>{v.replace({query:{...n.query,tab:x}})},c=()=>{v.back()};return(x,s)=>(a(),l("div",Y,[e("div",Z,[e("header",ee,[e("div",te,[e("button",{onClick:c,class:"flex items-center text-white"},[S(M(D),{class:"h-5 w-5"})]),s[0]||(s[0]=e("span",{class:"text-white font-bold"},"账户记录",-1)),s[1]||(s[1]=e("div",{class:"w-5"},null,-1))])]),e("main",null,[e("div",se,[(a(),l(p,null,h(i,t=>e("button",{key:t.key,onClick:r=>f(t.key),class:V(["py-3 text-center",o.value===t.key?"text-red-500 font-bold border-b-2 border-red-500":"text-gray-500"])},d(t.label),11,re)),64))]),e("div",ae,[s[2]||(s[2]=B('<div class="grid grid-cols-[1.2fr_0.8fr_0.8fr_1fr] px-3 py-2 text-xs text-gray-500 border-b"><div class="text-center">时间</div><div class="text-center">变化</div><div class="text-center">余额</div><div class="text-center">备注</div></div>',1)),o.value==="points"?(a(),w(U,{key:0})):o.value==="deposit"?(a(),w(X,{key:1})):y("",!0)])]),s[3]||(s[3]=e("div",{class:"h-14"},null,-1))])]))}});export{ue as default};
