import{d as C,w as I,o as z,q as r,n as t,x as e,y as o,r as u,u as _,C as b,F as B,t as M,L as N,l as d}from"./vue-vendor-2ZNhN7Rr.js";import{a as F,t as w}from"./index-BBQ2rUtM.js";import{c as V}from"./game-Dd0Ml3yF.js";import"./utils-vendor-CbLx3nH2.js";const $={class:"bg-gray-100 pb-16"},j={class:"bg-white mx-3 my-3 rounded-lg shadow p-4"},D={class:"text-sm text-gray-600 mb-2"},E={class:"grid grid-cols-3 gap-3 text-center"},G={class:"bg-blue-50 rounded-lg p-3"},P={class:"text-xs text-gray-500"},R={class:"text-lg font-bold text-blue-600"},A={class:"bg-green-50 rounded-lg p-3"},H={class:"text-xs text-gray-500"},J={class:"text-lg font-bold text-green-600"},K={class:"text-xs text-gray-500"},O={class:"bg-white mx-3 my-3 rounded-lg shadow"},Q={class:"grid grid-cols-4 text-xs text-gray-500 border-b bg-gray-50 px-3 py-2 gap-2 rounded-t-lg"},T={class:"text-right"},U={class:"text-center"},W={class:"text-right"},X={key:0,class:"flex justify-center items-center py-8"},Y={class:"ml-2 text-gray-600"},Z={key:1,class:"text-center py-8 text-gray-500"},tt={key:2,class:"divide-y"},et={class:"grid grid-cols-4 items-center gap-2"},st={class:"text-sm text-gray-800 font-medium"},at={class:"text-right"},ot={class:"text-blue-600 font-medium"},rt={class:"text-center"},dt={key:0,class:"text-green-600 font-bold"},lt={key:1,class:"text-red-500"},nt={class:"text-[10px] text-gray-400"},it={class:"text-right"},ct={key:0,class:"py-4 text-center"},gt=["disabled"],ut={key:1,class:"py-4 text-center text-gray-400 text-sm"},L=10,ht=C({__name:"stat",setup(_t){const{t:a}=F(),v=N(),l=u([]),i=u(!1),f=u(1),x=u(!0),n=u({}),k=()=>Number(v.query.lottery_id)||0,S=()=>Number(v.query.group_id)||0,p=async(y=1,c=!1)=>{const s=k(),h=S();if(s)try{i.value=!0;const g=await V({lottery_id:s,game_group_id:h,page:y,pageSize:L});if(g.code===200&&g.data){const m=g.data.list||[];c?(l.value=m,n.value=g.data.summary||{}):l.value=[...l.value,...m],x.value=m.length>=L,f.value=y}else w.error(g.message||a("games.stat.load-failed")),c&&(l.value=[])}catch{w.error(a("games.stat.load-failed-retry")),c&&(l.value=[])}finally{i.value=!1}},q=()=>{i.value||!x.value||p(f.value+1,!1)};return I(()=>[v.query.lottery_id,v.query.group_id],()=>{p(1,!0)}),z(()=>{p(1,!0)}),(y,c)=>(d(),r("div",$,[t("div",j,[t("div",D,e(o(a)("games.stat.summary")),1),t("div",E,[t("div",G,[t("div",P,e(o(a)("games.stat.bet-amount")),1),t("div",R,e((n.value.bet_gold||0).toLocaleString()),1)]),t("div",A,[t("div",H,e(o(a)("games.stat.prize-amount")),1),t("div",J,e((n.value.win_gold||0).toLocaleString()),1)]),t("div",{class:_([(n.value.profit||0)>=0?"bg-red-50":"bg-gray-100","rounded-lg p-3"])},[t("div",K,e(o(a)("games.stat.profit-loss")),1),t("div",{class:_(["text-lg font-bold",(n.value.profit||0)>=0?"text-red-600":"text-green-600"])},e((n.value.profit||0)>=0?"+":"")+e((n.value.profit||0).toLocaleString()),3)],2)])]),t("div",O,[t("div",Q,[t("span",null,e(o(a)("games.stat.date")),1),t("span",T,e(o(a)("games.stat.bet-win")),1),t("span",U,e(o(a)("games.stat.auto-count")),1),t("span",W,e(o(a)("games.stat.profit-loss")),1)]),i.value&&l.value.length===0?(d(),r("div",X,[c[0]||(c[0]=t("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"},null,-1)),t("span",Y,e(o(a)("games.stat.loading")),1)])):l.value.length===0?(d(),r("div",Z,e(o(a)("games.stat.no-data")),1)):(d(),r("div",tt,[(d(!0),r(B,null,M(l.value,(s,h)=>(d(),r("div",{key:`${s.id||s.stat_date}-${h}`,class:_(["px-3 py-3 text-xs",(s.profit||0)>0?"bg-red-50":(s.profit||0)<0?"bg-green-50":"bg-white"])},[t("div",et,[t("div",null,[t("div",st,e(s.stat_date?String(s.stat_date).substring(0,10):"--"),1)]),t("div",at,[t("div",ot,e((s.bet_gold||0).toLocaleString()),1),t("div",{class:_(["text-[10px]",s.win_gold&&s.win_gold>0?"text-green-600":"text-gray-400"])},e((s.win_gold||0).toLocaleString()),3)]),t("div",rt,[t("div",null,[(s.auto_bet_gold||0)>0?(d(),r("span",dt,"√")):(d(),r("span",lt,"×"))]),t("div",nt,e(s.bet_count||0)+e(o(a)("games.stat.times")),1)]),t("div",it,[t("div",{class:_(["font-bold",(s.profit||0)>=0?"text-red-600":"text-green-600"])},e((s.profit||0)>=0?"+":"")+e((s.profit||0).toLocaleString()),3)])])],2))),128)),x.value?(d(),r("div",ct,[t("button",{onClick:q,disabled:i.value,class:"px-6 py-2 bg-red-600 text-white text-sm rounded-lg disabled:opacity-50"},e(i.value?o(a)("common.loading"):o(a)("games.stat.load-more")),9,gt)])):b("",!0),!x.value&&l.value.length>0?(d(),r("div",ut,e(o(a)("games.stat.no-more")),1)):b("",!0)]))])]))}});export{ht as default};
