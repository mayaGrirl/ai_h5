import{d as C,w as P,o as D,q as a,l as s,z as r,u as l,r as x,J as L,F as j,t as A,I as O,v as i,x as y}from"./vue-vendor-ntQnFNWs.js";import{a as R}from"./index-jbolejyT.js";import{l as V}from"./game-DedpHW39.js";import"./utils-vendor-CbLx3nH2.js";const $={class:"bg-gray-100 pb-16"},G={class:"bg-white mx-3 my-3 rounded-lg shadow"},J={class:"grid grid-cols-[1.5fr_1fr_0.8fr_1fr] text-xs text-gray-500 border-b bg-gray-50 px-3 py-2 gap-2 rounded-t-lg"},T={class:"text-center"},W={class:"text-center"},H={class:"text-center"},K={key:0,class:"flex justify-center items-center py-8"},Q={class:"ml-2 text-gray-600"},U={key:1,class:"text-center py-8 text-gray-500"},X={key:2,class:"divide-y"},Y={class:"grid grid-cols-[1.5fr_1fr_0.8fr_1fr] items-center gap-2"},Z={class:"text-sm text-blue-700 truncate mb-1"},ee={class:"flex items-center gap-1 flex-wrap"},te={key:0,class:"text-gray-400"},se={class:"text-center"},ne={class:"mb-1"},oe={class:"inline-flex h-6 min-w-6 px-1 items-center justify-center rounded-full bg-red-500 text-white text-xs"},re={class:"flex justify-center gap-1"},ae={class:"text-center"},le={class:"text-xs text-red-600 font-medium"},ie={class:"text-xs text-blue-600 font-medium mt-2"},ce={class:"text-center"},de={class:"text-blue-600 font-medium"},ue={key:0,class:"py-4 text-center"},ge=["disabled"],pe={key:1,class:"py-4 text-center text-gray-400 text-sm"},B=15,he=C({__name:"open",setup(_e){const{t:o}=R(),_=O(),d=x([]),u=x(!1),w=x(1),m=x(!0),I=()=>Number(_.query.lottery_id)||0,N=()=>Number(_.query.group_id)||0,h=async(n=1,e=!1)=>{const t=I(),g=N();if(t)try{u.value=!0;const c=await V({lottery_id:t,game_group_id:g,page:n,pageSize:B});if(c.code===200&&c.data){const p=c.data.list||[];e?d.value=p:d.value=[...d.value,...p],m.value=p.length>=B,w.value=n}else e&&(d.value=[])}catch(c){console.error("获取开奖记录失败:",c),e&&(d.value=[])}finally{u.value=!1}},M=()=>{u.value||!m.value||h(w.value+1,!1)},k=n=>{const e=n.final_res?.expect_no||n.expect_no||n.action_no;return e==null?"--":String(e)},q=n=>{const e=n.final_res?.nums||n.action_no_num;return e?Array.isArray(e)?e.join(","):typeof e=="object"?Object.values(e).join(","):String(e):"--"},S=n=>{const e=q(n);return e==="--"?[]:e.includes(",")?e.split(","):e.split("")},z=n=>{const e=n.final_res?.sum;return e!=null?String(e):"--"},v=n=>n.final_res?.bigSmall||"--",b=n=>n.final_res?.oddEven||"--",E=n=>{const e=n.final_res?.shape||"--";return{bao:o("games.open.leopard"),shun:o("games.open.straight"),ban:o("games.open.half-straight"),dui:o("games.open.pair"),za:o("games.open.mixed")}[e]||"--"},F=n=>{const e=n.final_res?.lungFuPao||"--";return{Dragon:o("games.open.dragon"),dragon:o("games.open.dragon"),Tiger:o("games.open.tiger"),tiger:o("games.open.tiger"),Leopard:o("games.open.leopard"),leopard:o("games.open.leopard")}[e]||"--"},f=n=>{const e=n.memberBet;if(!e||Array.isArray(e)&&e.length===0)return{bet:0,win:0};if(typeof e=="object"&&!Array.isArray(e)){const t=e;return{bet:t.bet_gold||0,win:t.win_gold||0}}if(Array.isArray(e)){let t=0,g=0;return e.forEach(c=>{t+=c.bet_gold||0,g+=c.win_gold||0}),{bet:t,win:g}}return{bet:0,win:0}};return P(()=>[_.query.lottery_id,_.query.group_id],()=>{h(1,!0)}),D(()=>{h(1,!0)}),(n,e)=>(i(),a("div",$,[s("div",G,[s("div",J,[s("span",null,r(l(o)("games.open.period-numbers")),1),s("span",T,r(l(o)("games.open.sum-size")),1),s("span",W,r(l(o)("games.open.shape")),1),s("span",H,r(l(o)("games.open.bet-win")),1)]),u.value&&d.value.length===0?(i(),a("div",K,[e[0]||(e[0]=s("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"},null,-1)),s("span",Q,r(l(o)("games.open.loading")),1)])):d.value.length===0?(i(),a("div",U,r(l(o)("games.open.no-data")),1)):(i(),a("div",X,[(i(!0),a(j,null,A(d.value,(t,g)=>(i(),a("div",{key:`${k(t)}-${g}`,class:y(["px-3 py-3 text-xs",f(t).bet>0?"bg-yellow-50":"bg-white"])},[s("div",Y,[s("div",null,[s("div",Z,r(k(t)),1),s("div",ee,[S(t).length===0?(i(),a("span",te,"--")):(i(!0),a(j,{key:1},A(S(t),(c,p)=>(i(),a("span",{key:p,class:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-gray-500 text-white text-[10px]"},r(c),1))),128))])]),s("div",se,[s("div",ne,[s("span",oe,r(z(t)),1)]),s("div",re,[s("span",{class:y(["text-xs font-medium",v(t)==="大"?"text-red-600":v(t)==="小"?"text-green-600":"text-gray-500"])},r(v(t)),3),s("span",{class:y(["text-xs font-medium",b(t)==="单"?"text-orange-600":b(t)==="双"?"text-blue-600":"text-gray-500"])},r(b(t)),3)])]),s("div",ae,[s("div",le,r(E(t)),1),s("div",ie,r(F(t)),1)]),s("div",ce,[s("div",de,r(l(o)("games.open.bet"))+r(f(t).bet.toLocaleString()),1),s("div",{class:y(f(t).win>0?"text-red-600 font-medium":"text-gray-400 mt-2")},r(l(o)("games.open.win"))+r(f(t).win.toLocaleString()),3)])])],2))),128)),m.value?(i(),a("div",ue,[s("button",{onClick:M,disabled:u.value,class:"px-6 py-2 bg-red-600 text-white text-sm rounded-lg disabled:opacity-50"},r(u.value?l(o)("common.loading"):l(o)("games.open.load-more")),9,ge)])):L("",!0),!m.value&&d.value.length>0?(i(),a("div",pe,r(l(o)("games.open.no-more")),1)):L("",!0)]))])]))}});export{he as default};
