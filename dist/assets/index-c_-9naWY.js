import{d as B,o as j,q as n,f as v,l as e,u as s,z as l,r as _,n as b,L as w,A,k as M,J as u,K as N,Q as p,R as h,x as S,B as z,v as r}from"./vue-vendor-ntQnFNWs.js";import{a as D,C as R,t as x}from"./index-C6XK1gma.js";import{g as F,u as L}from"./customer-BXjt1XCl.js";import{_ as O}from"./PageHeader.vue_vue_type_script_setup_true_lang-CEmtFThu.js";import{C as k}from"./chevron-right-BUTwA79i.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-CXUrgsmq.js";const P={class:"min-h-screen bg-[#f5f7fb] pb-16"},T={class:"px-3 pb-20 pt-3"},$={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},E={class:"flex justify-between items-center"},I={class:"flex items-center gap-2"},J={class:"text-gray-500 w-16"},K={class:"text-gray-700"},Q={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},G={class:"flex justify-between items-center"},H={class:"flex items-center gap-2"},W={class:"text-gray-500 w-16"},X={key:0,class:"text-gray-400"},Y={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},Z={class:"flex items-center gap-2"},ee={class:"text-gray-500 w-16"},te={class:"text-gray-400"},ae={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},se={class:"flex items-center gap-2"},le={class:"text-gray-500 w-16 flex-shrink-0"},oe={key:0,class:"text-gray-400"},ie=["placeholder"],re={key:0,class:"mt-1 text-xs text-red-500"},ne={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},de={class:"flex items-center gap-2"},ce={class:"text-gray-500 w-16 flex-shrink-0"},me={key:0,class:"text-gray-400"},ue=["placeholder"],pe={key:0,class:"mt-1 text-xs text-red-500"},he={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},fe={class:"flex items-center gap-2"},ve={class:"text-gray-500 w-16 flex-shrink-0"},_e={key:0,class:"text-gray-400"},xe=["placeholder"],ge={key:0,class:"mt-1 text-xs text-red-500"},ye={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},be={class:"flex items-center gap-2"},we={class:"text-gray-500 w-16 flex-shrink-0"},ke={key:0,class:"text-gray-400"},qe=["placeholder"],Ve={key:0,class:"mt-1 text-xs text-red-500"},Ce={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},Ue={class:"flex items-center gap-2"},Be={class:"text-gray-500 w-16 flex-shrink-0"},je={key:0,class:"text-gray-400"},Ae=["placeholder"],Me={key:0,class:"mt-1 text-xs text-red-500"},Ne={class:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2"},Se={class:"text-red-600 text-sm"},ze={class:"bg-white rounded-xl shadow-sm p-3 mt-2"},De={class:"flex items-start gap-2"},Re={class:"text-gray-500 w-16 flex-shrink-0 pt-2"},Fe=["placeholder"],Le={key:0,class:"mt-1 text-xs text-red-500"},Oe=["disabled"],He=B({__name:"index",setup(Pe){const q=z(),{t}=D(),d=_(null),g=_(!0),f=_(!1),a=_({qq:"",alipay:"",wchat:"",realname:"",address:"",signature:""}),o=_({}),V=async()=>{try{g.value=!0;const m=await F();m.code===200&&m.data&&(d.value=m.data,m.data.signature&&(a.value.signature=m.data.signature))}catch(m){console.error("加载资料失败:",m)}finally{g.value=!1}},C=()=>(o.value={},a.value.qq&&!/^\d{5,12}$/.test(a.value.qq)&&(o.value.qq=t("mine.profile.validation.qq")),a.value.realname&&a.value.realname.length>50&&(o.value.realname=t("mine.profile.validation.realname")),a.value.alipay&&a.value.alipay.length>50&&(o.value.alipay=t("mine.profile.validation.alipay")),a.value.wchat&&a.value.wchat.length>50&&(o.value.wchat=t("mine.profile.validation.wchat")),a.value.address&&a.value.address.length>150&&(o.value.address=t("mine.profile.validation.address")),a.value.signature&&a.value.signature.length>200&&(o.value.signature=t("mine.profile.validation.signature")),Object.keys(o.value).length===0),U=async()=>{if(!C())return;if(!Object.values(a.value).some(i=>i&&i.trim()!=="")){x.warning("你未填写任何数据，无需提交");return}try{f.value=!0;const i=await L({qq:a.value.qq||void 0,wchat:a.value.wchat||void 0,alipay:a.value.alipay||void 0,realname:a.value.realname||void 0,address:a.value.address||void 0,signature:a.value.signature||void 0});i.code===200?(x.success(i.message||"保存成功"),q.back()):x.error(i.message||"保存失败")}catch{x.error("保存失败")}finally{f.value=!1}};return j(()=>{V()}),(m,i)=>{const y=A("router-link");return r(),n("div",P,[v(O,{title:s(t)("mine.setting.profile")},null,8,["title"]),e("main",T,[e("div",$,[e("div",E,[e("div",I,[e("span",J,l(s(t)("mine.profile.form-label.nickname")),1),e("span",K,l(d.value?.nickname||"-"),1)]),v(y,{to:"/mine/edit-nickname",class:"flex items-center text-red-600 text-sm"},{default:b(()=>[w(l(s(t)("mine.profile.edit-nickname"))+" ",1),v(s(k),{class:"w-4 h-4"})]),_:1})])]),e("div",Q,[e("div",G,[e("div",H,[e("span",W,l(s(t)("mine.profile.form-label.email")),1),d.value?.email?(r(),n("span",X,l(d.value.email),1)):u("",!0)]),d.value?.email?u("",!0):(r(),M(y,{key:0,to:"/mine/bind-email",class:"flex items-center text-red-600 text-sm"},{default:b(()=>[w(l(s(t)("mine.bind-email.title"))+" ",1),v(s(k),{class:"w-4 h-4"})]),_:1}))])]),e("div",Y,[e("div",Z,[e("span",ee,l(s(t)("mine.profile.form-label.mobile")),1),e("span",te,l(d.value?.mobile||"-"),1)])]),e("form",{onSubmit:N(U,["prevent"]),class:"mt-5"},[e("div",ae,[e("div",se,[e("label",le,l(s(t)("mine.profile.form-label.qq")),1),d.value?.qq?(r(),n("span",oe,l(d.value.qq),1)):p((r(),n("input",{key:1,"onUpdate:modelValue":i[0]||(i[0]=c=>a.value.qq=c),type:"text",placeholder:s(t)("common.form.placeholder.enter")+s(t)("mine.profile.form-label.qq"),class:"flex-1 text-gray-800 placeholder-gray-400 focus:outline-none h-10"},null,8,ie)),[[h,a.value.qq]])]),o.value.qq?(r(),n("p",re,l(o.value.qq),1)):u("",!0)]),e("div",ne,[e("div",de,[e("label",ce,l(s(t)("mine.profile.form-label.alipay")),1),d.value?.alipay?(r(),n("span",me,l(d.value.alipay),1)):p((r(),n("input",{key:1,"onUpdate:modelValue":i[1]||(i[1]=c=>a.value.alipay=c),type:"text",placeholder:s(t)("common.form.placeholder.enter")+s(t)("mine.profile.form-label.alipay"),class:"flex-1 text-gray-800 placeholder-gray-400 focus:outline-none h-10"},null,8,ue)),[[h,a.value.alipay]])]),o.value.alipay?(r(),n("p",pe,l(o.value.alipay),1)):u("",!0)]),e("div",he,[e("div",fe,[e("label",ve,l(s(t)("mine.profile.form-label.wchat")),1),d.value?.wchat?(r(),n("span",_e,l(d.value.wchat),1)):p((r(),n("input",{key:1,"onUpdate:modelValue":i[2]||(i[2]=c=>a.value.wchat=c),type:"text",placeholder:s(t)("common.form.placeholder.enter")+s(t)("mine.profile.form-label.wchat"),class:"flex-1 text-gray-800 placeholder-gray-400 focus:outline-none h-10"},null,8,xe)),[[h,a.value.wchat]])]),o.value.wchat?(r(),n("p",ge,l(o.value.wchat),1)):u("",!0)]),e("div",ye,[e("div",be,[e("label",we,l(s(t)("mine.profile.form-label.realname")),1),d.value?.realname?(r(),n("span",ke,l(d.value.realname),1)):p((r(),n("input",{key:1,"onUpdate:modelValue":i[3]||(i[3]=c=>a.value.realname=c),type:"text",placeholder:s(t)("common.form.placeholder.enter")+s(t)("mine.profile.form-label.realname"),class:"flex-1 text-gray-800 placeholder-gray-400 focus:outline-none h-10"},null,8,qe)),[[h,a.value.realname]])]),o.value.realname?(r(),n("p",Ve,l(o.value.realname),1)):u("",!0)]),e("div",Ce,[e("div",Ue,[e("label",Be,l(s(t)("mine.profile.form-label.address")),1),d.value?.address?(r(),n("span",je,l(d.value.address),1)):p((r(),n("input",{key:1,"onUpdate:modelValue":i[4]||(i[4]=c=>a.value.address=c),type:"text",placeholder:s(t)("common.form.placeholder.enter")+s(t)("mine.profile.form-label.address"),class:"flex-1 text-gray-800 placeholder-gray-400 focus:outline-none h-10"},null,8,Ae)),[[h,a.value.address]])]),o.value.address?(r(),n("p",Me,l(o.value.address),1)):u("",!0)]),e("div",Ne,[v(s(R),{class:"w-5 h-5 text-red-500 flex-shrink-0"}),e("span",Se,l(s(t)("mine.profile.alert")),1)]),e("div",ze,[e("div",De,[e("label",Re,l(s(t)("mine.profile.form-label.signature")),1),p(e("textarea",{"onUpdate:modelValue":i[5]||(i[5]=c=>a.value.signature=c),placeholder:s(t)("common.form.placeholder.enter")+s(t)("mine.profile.form-label.signature"),class:"flex-1 text-gray-800 placeholder-gray-400 focus:outline-none h-20 resize-none"},null,8,Fe),[[h,a.value.signature]])]),o.value.signature?(r(),n("p",Le,l(o.value.signature),1)):u("",!0)]),e("button",{type:"submit",disabled:f.value,class:S(["mt-10 h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",f.value?"opacity-60 cursor-not-allowed":"cursor-pointer"])},l(f.value?s(t)("common.form.button.submitting"):s(t)("common.form.button.submit")),11,Oe)],32)])])}}});export{He as default};
