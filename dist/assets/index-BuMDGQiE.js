import{_ as R}from"./coin-BjeO1Yvx.js";import{d as Y,o as $,L as W,r as y,q as l,n as e,k as K,y as t,N as p,x as s,f as r,p as x,E as G,F as _,t as S,C,u as U,m as Z,D as O,l as a,v as X}from"./vue-vendor-2ZNhN7Rr.js";import{c,a as J,u as Q,t as M,l as ee}from"./index-6bPpM1RI.js";import{v as te,c as se,a as ne}from"./customer-BcIAVpq5.js";import{d as ie}from"./dayjs.min-CLb2-34J.js";import{U as L}from"./user-Y-GtaeSN.js";import{X as V}from"./x-BQ3SkoNe.js";import{C as D}from"./chevron-right-Dzpe0bhI.js";import{G as ae}from"./gift-Bvwudmzg.js";import"./utils-vendor-CbLx3nH2.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=c("BanknoteIcon",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=c("BoxIcon",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=c("CalendarCheckIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=c("FlagIcon",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=c("HandCoinsIcon",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=c("LandmarkIcon",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=c("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=c("MapPinIcon",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=c("PencilLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=c("ReceiptTextIcon",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=c("RepeatIcon",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=c("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=c("ShieldPlusIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9 12h6",key:"1c52cq"}],["path",{d:"M12 9v6",key:"199k2o"}]]),_e="/mine/slide/01.jpeg",ve={class:"min-h-screen bg-[#f5f7fb] pb-16"},be={class:"bg-red-600 px-3 text-white"},ke={class:"flex items-center justify-between h-16"},we={class:"flex items-center space-x-2"},Ce={class:"h-10 w-10 rounded-full bg-white flex items-center justify-center overflow-hidden"},Me={key:0,class:"h-full w-full bg-gray-200 animate-pulse"},je=["src"],Ke={class:"leading-tight font-medium"},qe={class:"text-xs flex items-center"},Ie=["src"],ze={class:"min-w-12 mt-1 inline-flex h-4 items-center rounded-full text-[10px] px-1 bg-[rgb(64,63,63)]"},Re={class:"mb-3"},Se={class:"relative w-full h-32 overflow-hidden"},Le={class:"mt-2 grid grid-cols-2 gap-2 px-3"},Ve={class:"flex items-center gap-1 leading-none"},De={class:"flex items-center gap-1 leading-none"},Be={class:"mt-2 grid grid-cols-3 gap-2 px-3"},He={class:"mt-3 px-3"},Ne={class:"rounded-t-md border-b border-[#ff3a00] bg-white py-1 text-center text-[#ff3a00]"},Pe={class:"flex items-center justify-evenly rounded-b-md bg-gradient-to-r from-[#ff8e4a] to-[#ff3a00] px-4 py-3 text-center text-white min-h-20"},Fe={key:0,class:"min-h-6 font-semibold"},Te={class:"min-h-6 font-semibold"},Ae={key:0,class:"w-xs"},Ee=["disabled"],Ye={key:1,class:"w-xs"},$e={class:"w-full h-11 rounded-full bg-white text-orange-500 font-medium shadow-md transition px-4 opacity-60 cursor-not-allowed",disabled:""},We={class:"mt-3 px-3"},Ge={class:"w-full rounded-lg border border-[#c7e6ff] bg-[#f4fbff] px-3 py-2 text-[12px] text-[#4b84b6] flex items-center min-h-9"},Ue={key:0},Ze={key:0},Oe={class:"mt-3 px-3"},Xe={class:"grid grid-cols-3 rounded-md bg-white py-2 text-center border border-gray-200"},Je={class:"text-gray-500 text-sm"},Qe={class:"flex items-center justify-center mt-1 text-[13px] font-semibold text-[#ff3a00]"},et={class:"text-gray-500 text-sm"},tt={class:"flex items-center justify-center mt-1 text-[13px] font-semibold text-[#ff3a00]"},st={class:"flex flex-col"},nt={class:"text-gray-500 text-sm"},it={class:"mt-1 text-[13px] font-semibold text-gray-800"},at={class:"mt-3"},ot={class:"flex justify-center items-center text-sm"},lt={class:"flex justify-center items-center text-sm"},rt={key:0,class:"fixed inset-0 z-50"},ct={class:"absolute bottom-0 left-1/2 -translate-x-1/2 w-full max-w-xl bg-white rounded-t-[10px] pb-[env(safe-area-inset-bottom)]"},dt={class:"p-4 rounded-t-[10px]"},mt={class:"relative flex items-center justify-center h-8"},ut={class:"text-base font-medium text-gray-900"},ht={class:"p-4"},ft={class:"grid grid-cols-4 gap-2 text-center"},yt=["onClick"],pt={class:"flex h-8 w-8 items-center justify-center text-gray-700"},xt={class:"text-xs text-gray-700 text-center leading-tight"},It=Y({__name:"index",setup(gt){const v=O(),j=W(),{t:i}=J(),u=Q(),g=y(!0),m=y(null),h=y(!1),b=y(0),k=y(!1),q=y(!1),B=[{i18nKey:"mine.quick.mail",href:"/mine/message"},{i18nKey:"mine.setting.toolcase",href:"/mine/toolcase"},{i18nKey:"mine.quick.challenge",href:"/mine/challenge"},{i18nKey:"mine.quick.relief",href:"/mine/relief"},{i18nKey:"mine.quick.salary",href:"/mine/salary"},{i18nKey:"mine.quick.commission",href:"/mine/spread"}],H=[{labelKey:"mine.setting.mail",href:"/mine/message",icon:ue},{labelKey:"mine.setting.receipt-text",href:"/mine/receipt-text?from=drawer",icon:ye},{labelKey:"mine.setting.profile",href:"/mine/profile",icon:L},{labelKey:"mine.setting.toolcase",href:"/mine/toolcase",icon:le},{labelKey:"mine.setting.gift",href:"/mine/gift",icon:ae},{labelKey:"mine.setting.landmark",href:"/mine/customer-transfer",icon:me},{labelKey:"mine.setting.repeat",href:"/shop/record",icon:pe},{labelKey:"mine.setting.salary",href:"/mine/salary",icon:oe},{labelKey:"mine.setting.hand-coins",href:"/mine/hand-coins",icon:de},{labelKey:"mine.setting.security-settings",href:"/mine/security-settings",icon:ge},{labelKey:"mine.setting.edit-nickname",href:"/mine/edit-nickname",icon:fe},{labelKey:"mine.setting.x",href:"",icon:V}],N=async()=>{try{g.value=!0;const n=await te();n.code===200&&(b.value=n.data.vip_receive_state);const o=await se();o.code===200&&(m.value=o.data)}catch(n){console.error("加载用户资料失败:",n)}finally{g.value=!1}},P=async()=>{if(!h.value){h.value=!0;try{const n=await ne();n.code===200?(b.value=2,M.success(n.message||"领取成功")):M.error(n.message||"领取失败")}catch{M.error("领取失败")}finally{h.value=!1}}},F=()=>{k.value=!0,v.replace({query:{...j.query,drawer:"setting"}})},w=()=>{k.value=!1;const n={...j.query};delete n.drawer,v.replace({query:n})},T=async n=>{n===""?await A():(w(),v.push(n))},A=async()=>{if(!q.value){q.value=!0;try{await ee()}catch(n){console.error("logout error",n)}finally{u.logout(),w(),v.replace("/auth/login")}}},I=n=>n===void 0?"0":new Intl.NumberFormat("zh-CN").format(n),E=n=>n?ie.unix(n).format("YYYY-MM-DD HH:mm:ss"):"";return $(()=>{N(),j.query.drawer==="setting"&&(k.value=!0)}),(n,o)=>{const f=G("router-link");return a(),l(_,null,[e("div",ve,[e("header",be,[e("div",ke,[e("div",we,[e("div",Ce,[g.value?(a(),l("div",Me)):t(u).currentCustomer?.avatar_url?(a(),l("img",{key:1,src:t(u).currentCustomer.avatar_url,alt:"avatar",class:"h-full w-full object-cover"},null,8,je)):(a(),K(t(L),{key:2,class:"h-5 w-5 text-gray-400"}))]),e("div",Ke,[e("div",qe,[p(" ID"+s(t(u).currentCustomer?.id)+"（"+s(m.value?.member_field?.nickname||"用户")+"） ",1),e("img",{src:`/mine/level/${t(u).currentCustomer?.level||0}.png`,alt:"level",class:"w-[15px] h-[15px] ml-1",onError:o[0]||(o[0]=d=>d.target.style.display="none")},null,40,Ie)]),e("div",ze,s(m.value?.customer?.gid_label||""),1)])]),e("div",{class:"flex items-center space-x-3 text-xl cursor-pointer",onClick:F},[r(t(xe),{class:"w-6 h-6"})])])]),e("section",Re,[e("div",Se,[e("img",{src:_e,alt:"banner",class:"w-full h-full object-cover",onError:o[1]||(o[1]=d=>d.target.style.display="none")},null,32)])]),e("section",Le,[e("button",{class:"flex justify-center items-center h-10 rounded-md bg-[#ff3a00] font-medium text-white",onClick:o[2]||(o[2]=d=>t(M).info("新人任务即将上线"))},[e("span",Ve,[r(t(ce),{size:17}),p(" "+s(t(i)("mine.btn-tasks")),1)])]),r(f,{to:"/mine/sign?tab=in",class:"flex justify-center items-center h-10 rounded-md bg-[#ff3a00] font-medium text-white"},{default:x(()=>[e("span",De,[r(t(re),{size:17}),p(" "+s(t(i)("mine.btn-sign_in")),1)])]),_:1})]),e("section",Be,[(a(),l(_,null,S(B,(d,z)=>r(f,{key:z,to:d.href,class:"rounded-md bg-white py-3 text-center shadow-sm text-sm"},{default:x(()=>[p(s(t(i)(d.i18nKey)),1)]),_:2},1032,["to"])),64))]),e("section",He,[e("div",Ne,s(t(i)("mine.vip_title")),1),e("div",Pe,[g.value?(a(),l("div",Fe,s(t(i)("common.loading")),1)):(a(),l(_,{key:1},[e("div",Te,s(m.value?.customer&&m.value.customer.vip>0?m.value.customer.vip_label:t(i)("mine.vip_not_found")),1),b.value===1?(a(),l("div",Ae,[e("button",{class:U(["w-full h-11 rounded-full bg-white text-orange-500 font-medium shadow-md active:scale-95 transition px-4",h.value?"opacity-60 cursor-not-allowed":"cursor-pointer"]),onClick:P,disabled:h.value},s(h.value?t(i)("common.form.button.submitting"):t(i)("mine.vip-btn-receive")),11,Ee)])):C("",!0),b.value===2?(a(),l("div",Ye,[e("button",$e,s(t(i)("mine.vip-btn-received")),1)])):C("",!0)],64))])]),e("section",We,[e("div",Ge,[r(t(he),{class:"w-3 h-3 mr-1 text-[#4b84b6]"}),g.value?(a(),l("span",Ue,s(t(i)("common.loading")),1)):(a(),l(_,{key:1},[t(u).currentCustomer?(a(),l("span",Ze,s(t(i)("mine.last-login-msg-1"))+" "+s(t(u).currentCustomer.last_login_address)+" ("+s(E(t(u).currentCustomer.last_login_time))+") "+s(t(i)("mine.last-login-msg-2")),1)):C("",!0)],64))])]),e("section",Oe,[e("div",Xe,[r(f,{to:"/mine/receipt-text",class:"flex flex-col cursor-pointer"},{default:x(()=>[e("div",Je,s(t(i)("mine.account-points")),1),e("div",Qe,[e("span",null,s(I(m.value?.member_capital?.points)),1),o[3]||(o[3]=e("img",{src:R,alt:"gold",class:"inline-block ml-1 w-[13px] h-[13px]"},null,-1))])]),_:1}),r(f,{to:"/mine/customer-transfer",class:"flex flex-col border-x border-gray-200 cursor-pointer"},{default:x(()=>[e("div",et,s(t(i)("mine.account-bank-points")),1),e("div",tt,[e("span",null,s(I(m.value?.member_capital?.bankpoints)),1),o[4]||(o[4]=e("img",{src:R,alt:"gold",class:"inline-block ml-1 w-[13px] h-[13px]"},null,-1))])]),_:1}),e("div",st,[e("div",nt,s(t(i)("mine.account-experience")),1),e("div",it,s(m.value?.member_capital?.experience||0),1)])])]),e("section",at,[r(f,{to:"/mine/rebate?tab=loss",class:"mt-1 flex items-center justify-between bg-[#ff3a00] px-3 py-2 text-white cursor-pointer"},{default:x(()=>[e("span",null,s(t(i)("mine.yesterday_loss")),1),e("span",ot,[p(s(t(i)("mine.yesterday_loss_btn"))+" ",1),r(t(D),{class:"w-5 h-5"})])]),_:1}),r(f,{to:"/mine/rebate?tab=recharge",class:"mt-2 flex items-center justify-between bg-[#ff3a00] px-3 py-2 text-white cursor-pointer"},{default:x(()=>[e("span",null,s(t(i)("mine.recharge_rebate")),1),e("span",lt,[p(s(t(i)("mine.recharge_rebate_btn"))+" ",1),r(t(D),{class:"w-5 h-5"})])]),_:1})])]),(a(),K(Z,{to:"body"},[k.value?(a(),l("div",rt,[e("div",{class:"absolute inset-0 bg-black/40",onClick:w}),e("div",ct,[e("div",dt,[e("div",mt,[e("span",ut,s(t(i)("mine.setting.title")),1),e("button",{onClick:w,class:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-800"},[r(t(V),{class:"h-7 w-7"})])]),e("div",ht,[e("div",ft,[(a(),l(_,null,S(H,d=>e("button",{key:d.labelKey,onClick:z=>T(d.href),class:"flex flex-col items-center justify-center gap-2 aspect-square rounded-lg border border-[#ebedf0] cursor-pointer bg-white hover:bg-gray-50 active:bg-gray-100 transition-colors"},[e("div",pt,[(a(),K(X(d.icon),{class:"h-7 w-7"}))]),e("span",xt,s(t(i)(d.labelKey)),1)],8,yt)),64))])])])])])):C("",!0)]))],64)}}});export{It as default};
