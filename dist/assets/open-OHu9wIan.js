import{d as O,w as P,o as D,q as r,n as o,x as a,y as l,r as x,C as L,F as j,t as B,L as V,l as i,u as y}from"./vue-vendor-2ZNhN7Rr.js";import{a as $}from"./index-DBwKxXoa.js";import{l as G}from"./game-BMcaCmtH.js";import"./utils-vendor-CbLx3nH2.js";const T={class:"bg-gray-100 pb-16"},W={class:"bg-white mx-3 my-3 rounded-lg shadow"},H={class:"grid grid-cols-[1.5fr_1fr_0.8fr_1fr] text-xs text-gray-500 border-b bg-gray-50 px-3 py-2 gap-2 rounded-t-lg"},J={class:"text-center"},K={class:"text-center"},Q={class:"text-center"},U={key:0,class:"flex justify-center items-center py-8"},X={class:"ml-2 text-gray-600"},Y={key:1,class:"text-center py-8 text-gray-500"},Z={key:2,class:"divide-y"},ee={class:"grid grid-cols-[1.5fr_1fr_0.8fr_1fr] items-center gap-2"},te={class:"text-sm text-blue-700 truncate mb-1"},se={class:"flex items-center gap-1 flex-wrap"},ne={key:0,class:"text-gray-400"},oe={class:"text-center"},ae={class:"mb-1"},re={class:"inline-flex h-6 min-w-6 px-1 items-center justify-center rounded-full bg-red-500 text-white text-xs"},le={class:"flex justify-center gap-1"},ie={class:"text-center"},ce={class:"text-xs text-red-600 font-medium"},de={class:"text-xs text-blue-600 font-medium mt-2"},ue={class:"text-center"},ge={class:"text-blue-600 font-medium"},pe={key:0,class:"py-4 text-center"},_e=["disabled"],me={key:1,class:"py-4 text-center text-gray-400 text-sm"},A=15,be=O({__name:"open",setup(fe){const{t:n}=$(),_=V(),d=x([]),u=x(!1),w=x(1),m=x(!0),I=()=>Number(_.query.lottery_id)||0,N=()=>Number(_.query.group_id)||0,h=async(s=1,e=!1)=>{const t=I(),g=N();if(t)try{u.value=!0;const c=await G({lottery_id:t,game_group_id:g,page:s,pageSize:A});if(c.code===200&&c.data){const p=c.data.list||[];e?d.value=p:d.value=[...d.value,...p],m.value=p.length>=A,w.value=s}else e&&(d.value=[])}catch(c){console.error("获取开奖记录失败:",c),e&&(d.value=[])}finally{u.value=!1}},E=()=>{u.value||!m.value||h(w.value+1,!1)},S=s=>{const e=s.final_res?.expect_no||s.expect_no||s.action_no;return e==null?"--":String(e)},M=s=>{const e=s.final_res?.nums||s.action_no_num;return e?Array.isArray(e)?e.join(","):typeof e=="object"?Object.values(e).join(","):String(e):"--"},k=s=>{const e=M(s);return e==="--"?[]:e.includes(",")?e.split(","):e.split("")},q=s=>{const e=s.final_res?.sum;return e!=null?String(e):"--"},v=s=>s.final_res?.bigSmall||"--",C=s=>{const e=v(s);return{大:n("games.open.big"),小:n("games.open.small")}[e]||e},b=s=>s.final_res?.oddEven||"--",F=s=>{const e=b(s);return{单:n("games.open.odd"),双:n("games.open.even")}[e]||e},z=s=>{const e=s.final_res?.shape||"--";return{bao:n("games.open.leopard"),shun:n("games.open.straight"),ban:n("games.open.half-straight"),dui:n("games.open.pair"),za:n("games.open.mixed")}[e]||"--"},R=s=>{const e=s.final_res?.lungFuPao||"--";return{Dragon:n("games.open.dragon"),dragon:n("games.open.dragon"),Tiger:n("games.open.tiger"),tiger:n("games.open.tiger"),Leopard:n("games.open.leopard"),leopard:n("games.open.leopard")}[e]||"--"},f=s=>{const e=s.memberBet;if(!e||Array.isArray(e)&&e.length===0)return{bet:0,win:0};if(typeof e=="object"&&!Array.isArray(e)){const t=e;return{bet:t.bet_gold||0,win:t.win_gold||0}}if(Array.isArray(e)){let t=0,g=0;return e.forEach(c=>{t+=c.bet_gold||0,g+=c.win_gold||0}),{bet:t,win:g}}return{bet:0,win:0}};return P(()=>[_.query.lottery_id,_.query.group_id],()=>{h(1,!0)}),D(()=>{h(1,!0)}),(s,e)=>(i(),r("div",T,[o("div",W,[o("div",H,[o("span",null,a(l(n)("games.open.period-numbers")),1),o("span",J,a(l(n)("games.open.sum-size")),1),o("span",K,a(l(n)("games.open.shape")),1),o("span",Q,a(l(n)("games.open.bet-win")),1)]),u.value&&d.value.length===0?(i(),r("div",U,[e[0]||(e[0]=o("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"},null,-1)),o("span",X,a(l(n)("games.open.loading")),1)])):d.value.length===0?(i(),r("div",Y,a(l(n)("games.open.no-data")),1)):(i(),r("div",Z,[(i(!0),r(j,null,B(d.value,(t,g)=>(i(),r("div",{key:`${S(t)}-${g}`,class:y(["px-3 py-3 text-xs",f(t).bet>0?"bg-yellow-50":"bg-white"])},[o("div",ee,[o("div",null,[o("div",te,a(S(t)),1),o("div",se,[k(t).length===0?(i(),r("span",ne,"--")):(i(!0),r(j,{key:1},B(k(t),(c,p)=>(i(),r("span",{key:p,class:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-gray-500 text-white text-[10px]"},a(c),1))),128))])]),o("div",oe,[o("div",ae,[o("span",re,a(q(t)),1)]),o("div",le,[o("span",{class:y(["text-xs font-medium",v(t)==="大"?"text-red-600":v(t)==="小"?"text-green-600":"text-gray-500"])},a(C(t)),3),o("span",{class:y(["text-xs font-medium",b(t)==="单"?"text-orange-600":b(t)==="双"?"text-blue-600":"text-gray-500"])},a(F(t)),3)])]),o("div",ie,[o("div",ce,a(z(t)),1),o("div",de,a(R(t)),1)]),o("div",ue,[o("div",ge,a(l(n)("games.open.bet"))+a(f(t).bet.toLocaleString()),1),o("div",{class:y(f(t).win>0?"text-red-600 font-medium":"text-gray-400 mt-2")},a(l(n)("games.open.win"))+a(f(t).win.toLocaleString()),3)])])],2))),128)),m.value?(i(),r("div",pe,[o("button",{onClick:E,disabled:u.value,class:"px-6 py-2 bg-red-600 text-white text-sm rounded-lg disabled:opacity-50"},a(u.value?l(n)("common.loading"):l(n)("games.open.load-more")),9,_e)])):L("",!0),!m.value&&d.value.length>0?(i(),r("div",me,a(l(n)("games.open.no-more")),1)):L("",!0)]))])]))}});export{be as default};
