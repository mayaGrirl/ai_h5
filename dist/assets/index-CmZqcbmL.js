import{_ as h}from"./coin-BjeO1Yvx.js";import{i as b}from"./customer-BXjt1XCl.js";import{t as p}from"./index-C6XK1gma.js";import{d as k}from"./dayjs.min-CLb2-34J.js";import{d as w,o as M,r as a,b as D,q as o,l as t,J as _,F as g,t as Y,z as n,v as i,L as B,u as R}from"./vue-vendor-ntQnFNWs.js";import"./utils-vendor-CbLx3nH2.js";const V={class:"leading-tight"},j={class:"text-center font-medium"},z={class:"text-center font-medium text-red-500"},C={class:"flex justify-end items-center gap-1 font-medium"},F={key:1,class:"py-4 text-center text-xs text-gray-400"},J=w({__name:"index",setup(I){const l=a([]),v=a(1),c=a(!0),d=a(!1),f=a(null);let u=null;const x=async r=>{d.value=!0;try{const{code:e,data:s,message:m}=await b({pagination:{page:r,size:20}});await new Promise(y=>setTimeout(y,555)),e===200?(s.length<20&&(c.value=!1),r===1&&(l.value=[]),l.value=[...l.value,...s]):p.error(m)}catch{p.error("获取数据失败")}finally{d.value=!1}};return M(async()=>{await x(1),f.value&&c.value&&(u=new IntersectionObserver(([r])=>{if(r.isIntersecting&&!d.value){const e=v.value+1;v.value=e,x(e)}},{threshold:1}),u.observe(f.value))}),D(()=>{u&&u.disconnect()}),(r,e)=>(i(),o(g,null,[e[1]||(e[1]=t("div",{class:"grid grid-cols-[0.2fr_0.8fr_0.5fr_1fr] px-3 py-2 text-xs text-gray-500 border-b bg-white"},[t("div",null,"类型"),t("div",{class:"text-center"},"统计金额"),t("div",{class:"text-center"},"获得工资"),t("div",{class:"text-right"},"记录日期")],-1)),(i(!0),o(g,null,Y(l.value,(s,m)=>(i(),o("div",{key:`all-key-${m}`,class:"grid grid-cols-[0.2fr_0.8fr_0.5fr_1fr] px-3 py-3 border-b text-sm items-center"},[t("div",V,n(s.typestr),1),t("div",j,n(s.basecoin),1),t("div",z,[B(n(s.coin)+" ",1),e[0]||(e[0]=t("img",{src:h,alt:"coin",class:"inline-block w-[13px] h-[13px]"},null,-1))]),t("div",C,n(R(k).unix(s?.addtime||0).format("YYYY-MM-DD")),1)]))),128)),c.value?(i(),o("div",{key:0,ref_key:"loadMoreRef",ref:f,class:"py-4 text-center text-xs text-gray-400"},n(d.value?"加载中...":"上拉加载更多"),513)):_("",!0),c.value?_("",!0):(i(),o("div",F," 没有更多数据了 "))],64))}});export{J as default};
