import{d as _,o as h,r as f,q as u,l as e,f as x,u as l,K as w,F as S,t as C,x as c,z as p,B as V,v as d,Q as k,$ as K,J as M}from"./vue-vendor-ntQnFNWs.js";import{a as N,u as B,t as m}from"./index-BvHA6CJ8.js";import{G as T}from"./customer-Ca0wOw0D.js";import{_ as j}from"./PageHeader.vue_vue_type_script_setup_true_lang-D4YorIBc.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-DHZYbvND.js";const z={class:"flex min-h-screen justify-center bg-[#eef3f8]"},A={class:"w-full max-w-xl bg-[#f5f7fb] shadow-sm"},D={class:"bg-white rounded-lg mb-3 overflow-hidden"},F={class:"flex flex-wrap flex-col items-start content-start px-4 py-3 border-b"},L=["value"],R={key:0,class:"h-2 w-2 rounded-full bg-white"},$={class:"text-sm"},q=["disabled"],P=_({__name:"index",setup(E){const g=V(),{t:a}=N(),r=B(),o=f(!1),t=f("none"),v=[{value:"none",i18nKey:"mine.security-settings.group-account.login-sms.option-1"},{value:"everyloginNeedSMS",i18nKey:"mine.security-settings.group-account.login-sms.option-2"},{value:"otherAddrNeedSMS",i18nKey:"mine.security-settings.group-account.login-sms.option-3"}],y=async()=>{o.value=!0;try{const n=await T({login_verify_type:t.value});n.code===200?(m.success(n.message||"设置成功"),r.currentCustomer&&r.setCurrentCustomer({...r.currentCustomer,loginVerifyType:t.value}),g.back()):m.error(n.message||"设置失败")}catch{m.error("设置失败")}finally{o.value=!1}};return h(()=>{r.currentCustomer?.loginVerifyType&&(t.value=r.currentCustomer.loginVerifyType)}),(n,i)=>(d(),u("div",z,[e("div",A,[x(j,{title:l(a)("mine.security-settings.group-account.login-sms.title")},null,8,["title"]),e("form",{onSubmit:w(y,["prevent"]),class:"w-full bg-gray-100 px-3 py-4"},[e("div",D,[e("div",F,[(d(),u(S,null,C(v,s=>e("label",{key:s.value,class:c(["flex items-center gap-3 px-4 py-3 cursor-pointer",t.value===s.value?"text-blue-600":"text-gray-700"])},[k(e("input",{type:"radio",value:s.value,"onUpdate:modelValue":i[0]||(i[0]=b=>t.value=b),class:"hidden"},null,8,L),[[K,t.value]]),e("span",{class:c(["flex h-4 w-4 items-center justify-center rounded-full border",t.value===s.value?"border-red-600 bg-red-600":"border-gray-300"])},[t.value===s.value?(d(),u("span",R)):M("",!0)],2),e("span",$,p(l(a)(s.i18nKey)),1)],2)),64))])]),e("button",{type:"submit",disabled:o.value,class:c(["mt-10 h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",o.value?"opacity-60 cursor-not-allowed":"cursor-pointer"])},p(o.value?l(a)("common.form.button.submitting"):l(a)("common.form.button.submit")),11,q)],32),i[1]||(i[1]=e("div",{class:"h-14"},null,-1))])]))}});export{P as default};
