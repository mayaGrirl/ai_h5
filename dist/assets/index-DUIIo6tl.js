import{_}from"./coin-BjeO1Yvx.js";import{d as V,w as B,o as I,I as K,B as S,c as h,q as a,l as s,z as o,u as w,F as d,t as c,r as $,J as N,v as r,x as g,O as R}from"./vue-vendor-ntQnFNWs.js";import{h as x,a as z,t as C}from"./index-DKPP7pX5.js";import"./utils-vendor-CbLx3nH2.js";const q=()=>x.get("/api/app/v1/rank/today",{}),D=()=>x.get("/api/app/v1/rank/yesterday",{}),F=()=>x.get("/api/app/v1/rank/week",{}),M={class:"min-h-screen bg-[#f5f7fb] pb-16"},P={class:"h-14 bg-red-600 flex items-center justify-center"},T={class:"text-white text-xl font-bold"},W={class:"grid grid-cols-3 text-center text-sm bg-white"},J=["onClick"],O={class:"p-2"},A={key:0,class:"bg-white rounded-lg"},G={key:1,class:"bg-white rounded-lg"},H={key:0,class:"py-12 text-center text-gray-500"},Q={class:"flex items-center space-x-3"},U=["src","alt"],X={class:"text-gray-800 text-sm"},Y={class:"flex items-center space-x-1"},Z={class:"text-red-500 font-semibold text-sm"},ee={class:"flex items-center space-x-3"},te=["src","alt"],se={class:"text-gray-800 text-sm"},ae={class:"flex items-center space-x-1"},re={class:"text-red-500 font-semibold text-sm"},ce=V({__name:"index",setup(ne){const{t:v}=z(),u=K(),f=S(),y=h(()=>u.query.tab||"today"),L=[{key:"today",i18Key:"rank.tab-1"},{key:"yesterday",i18Key:"rank.tab-2"},{key:"last-week",i18Key:"rank.tab-3"}],i=$([]),b=$(!1),j=h(()=>y.value==="last-week"),m=async n=>{b.value=!0,i.value=[];try{let e;switch(n){case"today":e=await q();break;case"yesterday":e=await D();break;case"last-week":e=await F();break;default:e=await q()}e.code===200&&e.data?i.value=e.data:C.error(e.message||"获取排行数据失败")}catch(e){console.error("获取排行数据失败:",e),C.error("获取排行数据失败")}finally{b.value=!1}},E=n=>{f.replace({query:{tab:n}})},k=n=>{const e="inline-flex items-center justify-center rounded-full text-xs font-bold w-6 h-6 shadow-sm";switch(n){case 1:return`${e} bg-gradient-to-br from-yellow-300 to-yellow-500 text-yellow-900`;case 2:return`${e} bg-gradient-to-br from-blue-300 to-blue-500 text-blue-950`;case 3:return`${e} bg-gradient-to-br from-green-300 to-green-500 text-green-950`;default:return`${e} bg-gray-200 text-gray-700`}};return B(()=>u.query.tab,n=>{m(n||"today")}),I(()=>{u.query.tab?m(y.value):f.replace({query:{tab:"today"}})}),(n,e)=>(r(),a("div",M,[s("header",P,[s("span",T,o(w(v)("tab.ranking")),1)]),s("div",W,[(r(),a(d,null,c(L,t=>s("button",{key:t.key,onClick:l=>E(t.key),class:g(["py-3 text-center transition-colors",y.value===t.key?"text-red-500 font-bold border-b-2 border-red-500":"text-gray-500 hover:text-gray-700"])},o(w(v)(t.i18Key)),11,J)),64))]),s("div",O,[b.value?(r(),a("div",A,[(r(),a(d,null,c(10,t=>s("div",{key:t,class:"flex items-center justify-between px-4 py-3 border-b border-gray-100"},[...e[4]||(e[4]=[R('<div class="flex items-center space-x-3"><div class="w-6 h-6 bg-gray-200 rounded-full animate-pulse"></div><div class="w-5 h-5 bg-gray-200 rounded animate-pulse"></div><div class="w-20 h-4 bg-gray-200 rounded animate-pulse"></div></div><div class="w-16 h-4 bg-gray-200 rounded animate-pulse"></div>',2)])])),64))])):(r(),a("div",G,[i.value.length===0?(r(),a("div",H," 暂无排行数据 ")):N("",!0),j.value?(r(!0),a(d,{key:1},c(i.value,t=>(r(),a("div",{key:t.rank,class:"flex items-center justify-between px-4 py-3 border-b border-gray-100 last:border-b-0"},[s("div",Q,[s("span",{class:g(k(t.rank))},o(t.rank),3),s("img",{src:`/ranking/vip/${t.level}.png`,alt:`VIP${t.level}`,class:"w-5 h-5",onError:e[0]||(e[0]=l=>l.target.style.display="none")},null,40,U),s("span",X,o(t.name),1)]),s("div",Y,[s("span",Z,o(t.score.toLocaleString()),1),s("img",{src:_,alt:"gold",class:"w-[13px] h-[13px]",onError:e[1]||(e[1]=l=>l.target.style.display="none")},null,32)])]))),128)):(r(!0),a(d,{key:2},c(i.value,(t,l)=>(r(),a("div",{key:t.id,class:"flex items-center justify-between px-4 py-3 border-b border-gray-100 last:border-b-0"},[s("div",ee,[s("span",{class:g(k(l+1))},o(l+1),3),s("img",{src:`/ranking/vip/${t.member?.level||1}.png`,alt:`VIP${t.member?.level||1}`,class:"w-5 h-5",onError:e[2]||(e[2]=p=>p.target.style.display="none")},null,40,te),s("span",se,o(t.member_field?.nickname),1)]),s("div",ae,[s("span",re,o(t.profit.toLocaleString()),1),s("img",{src:_,alt:"gold",class:"w-[13px] h-[13px]",onError:e[3]||(e[3]=p=>p.target.style.display="none")},null,32)])]))),128))]))])]))}});export{ce as default};
