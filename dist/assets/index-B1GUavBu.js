import{_ as C}from"./coin-BjeO1Yvx.js";import{d as N,w as S,o as B,L as K,D as R,c as V,q as o,n as t,x as l,y as L,F as y,t as g,r as q,C as v,l as n,u as c,N as I,O as b,Q as M}from"./vue-vendor-2ZNhN7Rr.js";import{h as f,a as T,t as D}from"./index-DBwKxXoa.js";import"./utils-vendor-CbLx3nH2.js";const j=()=>f.get("/api/app/v1/rank/today",{}),F=()=>f.get("/api/app/v1/rank/yesterday",{}),P=()=>f.get("/api/app/v1/rank/week",{}),W={class:"min-h-screen bg-[#f5f7fb] pb-16"},H={class:"h-14 bg-gradient-to-r from-red-600 to-red-500 flex items-center justify-center shadow-md"},O={class:"text-white text-xl font-bold tracking-wide"},Q={class:"grid grid-cols-3 text-center text-sm bg-white shadow-sm sticky top-0 z-10"},A=["onClick"],G={key:0,class:"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-0.5 bg-red-500 rounded-full"},J={class:"p-2"},U={key:0,class:"bg-white rounded-lg overflow-hidden shadow-sm"},X={key:1,class:"bg-white rounded-lg overflow-hidden shadow-sm"},Y={key:0,class:"py-16 text-center"},Z={class:"flex items-center space-x-3"},ee=["src","alt"],te={class:"text-gray-800 text-sm font-medium"},ae={class:"flex items-center space-x-1"},se={class:"flex items-center space-x-3"},re=["src","alt"],oe={class:"text-gray-800 text-sm font-medium"},ne={class:"flex items-center space-x-1"},ye=N({__name:"index",setup(le){const{t:h}=T(),m=K(),x=R(),u=V(()=>m.query.tab||"today"),z=[{key:"today",i18Key:"rank.tab-1"},{key:"yesterday",i18Key:"rank.tab-2"},{key:"last-week",i18Key:"rank.tab-3"}],i=q([]),p=q(!1),k=V(()=>u.value==="last-week"),w=async r=>{p.value=!0,i.value=[];try{let e;switch(r){case"today":e=await j();break;case"yesterday":e=await F();break;case"last-week":e=await P();break;default:e=await j()}e.code===200&&e.data?i.value=e.data:D.error(e.message||"获取排行数据失败")}catch(e){console.error("获取排行数据失败:",e),D.error("获取排行数据失败")}finally{p.value=!1}},E=r=>{x.replace({query:{tab:r}})},_=r=>{const e="inline-flex items-center justify-center rounded-full text-xs font-bold w-7 h-7 shadow-md";switch(r){case 1:return`${e} bg-gradient-to-br from-yellow-300 via-yellow-400 to-yellow-500 text-yellow-900 ring-2 ring-yellow-200`;case 2:return`${e} bg-gradient-to-br from-slate-300 via-slate-400 to-slate-500 text-slate-900 ring-2 ring-slate-200`;case 3:return`${e} bg-gradient-to-br from-amber-500 via-amber-600 to-amber-700 text-amber-100 ring-2 ring-amber-300`;default:return`${e} bg-gray-100 text-gray-600`}},$=r=>{const e="flex items-center justify-between px-4 py-3 border-b border-gray-100 last:border-b-0 transition-all duration-200";switch(r){case 1:return`${e} bg-gradient-to-r from-yellow-50 to-transparent`;case 2:return`${e} bg-gradient-to-r from-slate-50 to-transparent`;case 3:return`${e} bg-gradient-to-r from-amber-50 to-transparent`;default:return`${e} hover:bg-gray-50`}};return S(()=>m.query.tab,r=>{w(r||"today")}),B(()=>{m.query.tab?w(u.value):x.replace({query:{tab:"today"}})}),(r,e)=>(n(),o("div",W,[t("header",H,[t("span",O,l(L(h)("tab.ranking")),1)]),t("div",Q,[(n(),o(y,null,g(z,a=>t("button",{key:a.key,onClick:s=>E(a.key),class:c(["py-3.5 text-center transition-all duration-200 relative",u.value===a.key?"text-red-500 font-bold":"text-gray-500 hover:text-gray-700 active:bg-gray-50"])},[I(l(L(h)(a.i18Key))+" ",1),u.value===a.key?(n(),o("span",G)):v("",!0)],10,A)),64))]),t("div",J,[p.value?(n(),o("div",U,[(n(),o(y,null,g(10,a=>t("div",{key:a,class:"flex items-center justify-between px-4 py-3.5 border-b border-gray-50",style:b({animationDelay:`${a*100}ms`})},[...e[4]||(e[4]=[M('<div class="flex items-center space-x-3"><div class="w-7 h-7 bg-gradient-to-r from-gray-200 to-gray-100 rounded-full animate-pulse"></div><div class="w-5 h-5 bg-gradient-to-r from-gray-200 to-gray-100 rounded animate-pulse"></div><div class="w-24 h-4 bg-gradient-to-r from-gray-200 to-gray-100 rounded animate-pulse"></div></div><div class="flex items-center space-x-1"><div class="w-14 h-4 bg-gradient-to-r from-gray-200 to-gray-100 rounded animate-pulse"></div><div class="w-4 h-4 bg-gradient-to-r from-gray-200 to-gray-100 rounded-full animate-pulse"></div></div>',2)])],4)),64))])):(n(),o("div",X,[i.value.length===0?(n(),o("div",Y,[...e[5]||(e[5]=[t("div",{class:"text-gray-400 mb-2"},[t("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1),t("p",{class:"text-gray-500 text-sm"},"暂无排行数据",-1)])])):v("",!0),k.value&&i.value.length>0?(n(!0),o(y,{key:1},g(i.value,(a,s)=>(n(),o("div",{key:a.id,class:c($(s+1)),style:b({animationDelay:`${s*50}ms`})},[t("div",Z,[t("span",{class:c(_(s+1))},l(s+1),3),t("img",{src:`/ranking/vip/${a.level||1}.png`,alt:`VIP${a.level||1}`,class:"w-5 h-5",onError:e[0]||(e[0]=d=>d.target.style.display="none")},null,40,ee),t("span",te,l(a.nickname),1)]),t("div",ae,[t("span",{class:c(["font-bold text-sm",s<3?"text-red-600":"text-red-500"])},l((a.profit||0).toLocaleString()),3),t("img",{src:C,alt:"gold",class:"w-[14px] h-[14px]",onError:e[1]||(e[1]=d=>d.target.style.display="none")},null,32)])],6))),128)):!k.value&&i.value.length>0?(n(!0),o(y,{key:2},g(i.value,(a,s)=>(n(),o("div",{key:a.id,class:c($(s+1)),style:b({animationDelay:`${s*50}ms`})},[t("div",se,[t("span",{class:c(_(s+1))},l(s+1),3),t("img",{src:`/ranking/vip/${a.level||1}.png`,alt:`VIP${a.level||1}`,class:"w-5 h-5",onError:e[2]||(e[2]=d=>d.target.style.display="none")},null,40,re),t("span",oe,l(a.nickname),1)]),t("div",ne,[t("span",{class:c(["font-bold text-sm",s<3?"text-red-600":"text-red-500"])},l((a.profit||0).toLocaleString()),3),t("img",{src:C,alt:"gold",class:"w-[14px] h-[14px]",onError:e[3]||(e[3]=d=>d.target.style.display="none")},null,32)])],6))),128)):v("",!0)]))])]))}});export{ye as default};
