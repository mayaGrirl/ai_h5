import{c as Le,a as Bt,_ as Ie,u as Ee,L as Pt}from"./index-jbolejyT.js";import{g as Oe,i as Te,a as ke,b as De}from"./home-BOPNk9Cb.js";import{u as ae}from"./useLocalized-BbzZ2Uts.js";import{d as Ot,q as N,x as ut,l as S,z as ht,u as Z,v as P,f as bt,B as Ae,o as le,s as te,N as Me,w as ee,i as ne,J as Ft,F as Lt,t as It,r as rt,k as mt,c as Ce,p as Pe,A as Fe,n as oe,y as Ne,M as ze}from"./vue-vendor-ntQnFNWs.js";import{_ as Be}from"./login-logo-DOFsqlSQ.js";import{B as ue}from"./bell-CxvFfLwS.js";import{X as je,G as $e}from"./x-BVG-lpgH.js";import{S as Ve}from"./star-Cy-xTx5W.js";import{U as Re}from"./users-round-BNp6mSol.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=Le("GlobeIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Ge={class:"flex flex-col items-center gap-3"},Ue={class:"relative"},qe={class:"text-sm text-gray-500 animate-pulse"},Ke=Ot({__name:"PageLoading",props:{size:{default:"md"},text:{},fullScreen:{type:Boolean,default:!1}},setup(t){const{t:e}=Bt(),n={sm:"h-5 w-5 border-2",md:"h-8 w-8 border-2",lg:"h-12 w-12 border-3"};return(i,a)=>(P(),N("div",{class:ut(["flex items-center justify-center",t.fullScreen?"fixed inset-0 bg-white/80 backdrop-blur-sm z-50":"h-40"])},[S("div",Ge,[S("div",Ue,[S("div",{class:ut(["rounded-full border-gray-200 animate-pulse",n[t.size]])},null,2),S("div",{class:ut(["absolute inset-0 rounded-full border-transparent border-t-red-500 border-r-red-500/50 spin-smooth",n[t.size]])},null,2),S("div",{class:ut(["absolute inset-0 rounded-full border-transparent border-b-orange-400/30 spin-smooth",n[t.size]]),style:{"animation-duration":"1.5s","animation-direction":"reverse"}},null,2)]),S("span",qe,ht(t.text||Z(e)("common.loading")),1)])],2))}}),Je=Ie(Ke,[["__scopeId","data-v-ea88b5b5"]]),Qe={class:"sticky top-0 z-40 flex h-12 items-center justify-between bg-gradient-to-r from-red-600 to-red-500 px-4"},Xe={class:"flex items-center gap-3"},Ye=Ot({__name:"HomeHeader",setup(t){const e=Ae(),{locale:n}=Bt(),i=Ee(),a={zh:"中文",en:"EN",fr:"FR"},s=()=>{const r=(Pt.indexOf(n.value)+1)%Pt.length,l=Pt[r];n.value=l},o=()=>{i.isLogin?e.push("/mine/message"):e.push("/auth/login")};return(c,r)=>(P(),N("header",Qe,[r[0]||(r[0]=S("div",{class:"flex items-center gap-2"},[S("img",{src:Be,alt:"Logo",class:"h-8 w-8 rounded-lg"}),S("span",{class:"font-bold text-white"},"顶峰28")],-1)),S("div",Xe,[S("button",{onClick:s,class:"flex items-center gap-1 rounded-full bg-white/20 px-2 py-1 text-xs text-white"},[bt(Z(He),{class:"h-3.5 w-3.5"}),S("span",null,ht(a[Z(n)]),1)]),S("button",{onClick:o,class:"relative text-white"},[bt(Z(ue),{class:"h-5 w-5"})])])]))}});function Ze(t){return Object.prototype.toString.call(t)==="[object Object]"}function se(t){return Ze(t)||Array.isArray(t)}function We(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function jt(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;const a=JSON.stringify(Object.keys(t.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return a!==s?!1:n.every(o=>{const c=t[o],r=e[o];return typeof c=="function"?`${c}`==`${r}`:!se(c)||!se(r)?c===r:jt(c,r)})}function re(t){return t.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function tn(t,e){if(t.length!==e.length)return!1;const n=re(t),i=re(e);return n.every((a,s)=>{const o=i[s];return jt(a,o)})}function $t(t){return typeof t=="number"}function Nt(t){return typeof t=="string"}function Tt(t){return typeof t=="boolean"}function ie(t){return Object.prototype.toString.call(t)==="[object Object]"}function M(t){return Math.abs(t)}function Vt(t){return Math.sign(t)}function yt(t,e){return M(t-e)}function en(t,e){if(t===0||e===0||M(t)<=M(e))return 0;const n=yt(M(t),M(e));return M(n/t)}function nn(t){return Math.round(t*100)/100}function xt(t){return vt(t).map(Number)}function Q(t){return t[wt(t)]}function wt(t){return Math.max(0,t.length-1)}function Rt(t,e){return e===wt(t)}function ce(t,e=0){return Array.from(Array(t),(n,i)=>e+i)}function vt(t){return Object.keys(t)}function fe(t,e){return[t,e].reduce((n,i)=>(vt(i).forEach(a=>{const s=n[a],o=i[a],c=ie(s)&&ie(o);n[a]=c?fe(s,o):o}),n),{})}function zt(t,e){return typeof e.MouseEvent<"u"&&t instanceof e.MouseEvent}function on(t,e){const n={start:i,center:a,end:s};function i(){return 0}function a(r){return s(r)/2}function s(r){return e-r}function o(r,l){return Nt(t)?n[t](r):t(e,r,l)}return{measure:o}}function St(){let t=[];function e(a,s,o,c={passive:!0}){let r;if("addEventListener"in a)a.addEventListener(s,o,c),r=()=>a.removeEventListener(s,o,c);else{const l=a;l.addListener(o),r=()=>l.removeListener(o)}return t.push(r),i}function n(){t=t.filter(a=>a())}const i={add:e,clear:n};return i}function sn(t,e,n,i){const a=St(),s=1e3/60;let o=null,c=0,r=0;function l(){a.add(t,"visibilitychange",()=>{t.hidden&&u()})}function h(){y(),a.clear()}function m(d){if(!r)return;o||(o=d,n(),n());const f=d-o;for(o=d,c+=f;c>=s;)n(),c-=s;const b=c/s;i(b),r&&(r=e.requestAnimationFrame(m))}function g(){r||(r=e.requestAnimationFrame(m))}function y(){e.cancelAnimationFrame(r),o=null,c=0,r=0}function u(){o=null,c=0}return{init:l,destroy:h,start:g,stop:y,update:n,render:i}}function rn(t,e){const n=e==="rtl",i=t==="y",a=i?"y":"x",s=i?"x":"y",o=!i&&n?-1:1,c=h(),r=m();function l(u){const{height:p,width:d}=u;return i?p:d}function h(){return i?"top":n?"right":"left"}function m(){return i?"bottom":n?"left":"right"}function g(u){return u*o}return{scroll:a,cross:s,startEdge:c,endEdge:r,measureSize:l,direction:g}}function at(t=0,e=0){const n=M(t-e);function i(l){return l<t}function a(l){return l>e}function s(l){return i(l)||a(l)}function o(l){return s(l)?i(l)?t:e:l}function c(l){return n?l-n*Math.ceil((l-e)/n):l}return{length:n,max:e,min:t,constrain:o,reachedAny:s,reachedMax:a,reachedMin:i,removeOffset:c}}function de(t,e,n){const{constrain:i}=at(0,t),a=t+1;let s=o(e);function o(g){return n?M((a+g)%a):i(g)}function c(){return s}function r(g){return s=o(g),m}function l(g){return h().set(c()+g)}function h(){return de(t,c(),n)}const m={get:c,set:r,add:l,clone:h};return m}function cn(t,e,n,i,a,s,o,c,r,l,h,m,g,y,u,p,d,f,b){const{cross:v,direction:L}=t,T=["INPUT","SELECT","TEXTAREA"],I={passive:!1},w=St(),_=St(),E=at(50,225).constrain(y.measure(20)),C={mouse:300,touch:400},O={mouse:500,touch:600},z=u?43:25;let q=!1,k=0,B=0,R=!1,H=!1,K=!1,J=!1;function X(x){if(!b)return;function D($){(Tt(b)||b(x,$))&&dt($)}const F=e;w.add(F,"dragstart",$=>$.preventDefault(),I).add(F,"touchmove",()=>{},I).add(F,"touchend",()=>{}).add(F,"touchstart",D).add(F,"mousedown",D).add(F,"touchcancel",j).add(F,"contextmenu",j).add(F,"click",nt,!0)}function G(){w.clear(),_.clear()}function W(){const x=J?n:e;_.add(x,"touchmove",V,I).add(x,"touchend",j).add(x,"mousemove",V,I).add(x,"mouseup",j)}function tt(x){const D=x.nodeName||"";return T.includes(D)}function et(){return(u?O:C)[J?"mouse":"touch"]}function ft(x,D){const F=m.add(Vt(x)*-1),$=h.byDistance(x,!u).distance;return u||M(x)<E?$:d&&D?$*.5:h.byIndex(F.get(),0).distance}function dt(x){const D=zt(x,i);J=D,K=u&&D&&!x.buttons&&q,q=yt(a.get(),o.get())>=2,!(D&&x.button!==0)&&(tt(x.target)||(R=!0,s.pointerDown(x),l.useFriction(0).useDuration(0),a.set(o),W(),k=s.readPoint(x),B=s.readPoint(x,v),g.emit("pointerDown")))}function V(x){if(!zt(x,i)&&x.touches.length>=2)return j(x);const F=s.readPoint(x),$=s.readPoint(x,v),Y=yt(F,k),ot=yt($,B);if(!H&&!J&&(!x.cancelable||(H=Y>ot,!H)))return j(x);const it=s.pointerMove(x);Y>p&&(K=!0),l.useFriction(.3).useDuration(.75),c.start(),a.add(L(it)),x.preventDefault()}function j(x){const F=h.byDistance(0,!1).index!==m.get(),$=s.pointerUp(x)*et(),Y=ft(L($),F),ot=en($,Y),it=z-10*ot,st=f+ot/50;H=!1,R=!1,_.clear(),l.useDuration(it).useFriction(st),r.distance(Y,!u),J=!1,g.emit("pointerUp")}function nt(x){K&&(x.stopPropagation(),x.preventDefault(),K=!1)}function U(){return R}return{init:X,destroy:G,pointerDown:U}}function an(t,e){let i,a;function s(m){return m.timeStamp}function o(m,g){const u=`client${(g||t.scroll)==="x"?"X":"Y"}`;return(zt(m,e)?m:m.touches[0])[u]}function c(m){return i=m,a=m,o(m)}function r(m){const g=o(m)-o(a),y=s(m)-s(i)>170;return a=m,y&&(i=m),g}function l(m){if(!i||!a)return 0;const g=o(a)-o(i),y=s(m)-s(i),u=s(m)-s(a)>170,p=g/y;return y&&!u&&M(p)>.1?p:0}return{pointerDown:c,pointerMove:r,pointerUp:l,readPoint:o}}function ln(){function t(n){const{offsetTop:i,offsetLeft:a,offsetWidth:s,offsetHeight:o}=n;return{top:i,right:a+s,bottom:i+o,left:a,width:s,height:o}}return{measure:t}}function un(t){function e(i){return t*(i/100)}return{measure:e}}function fn(t,e,n,i,a,s,o){const c=[t].concat(i);let r,l,h=[],m=!1;function g(d){return a.measureSize(o.measure(d))}function y(d){if(!s)return;l=g(t),h=i.map(g);function f(b){for(const v of b){if(m)return;const L=v.target===t,T=i.indexOf(v.target),I=L?l:h[T],w=g(L?t:i[T]);if(M(w-I)>=.5){d.reInit(),e.emit("resize");break}}}r=new ResizeObserver(b=>{(Tt(s)||s(d,b))&&f(b)}),n.requestAnimationFrame(()=>{c.forEach(b=>r.observe(b))})}function u(){m=!0,r&&r.disconnect()}return{init:y,destroy:u}}function dn(t,e,n,i,a,s){let o=0,c=0,r=a,l=s,h=t.get(),m=0;function g(){const I=i.get()-t.get(),w=!r;let _=0;return w?(o=0,n.set(i),t.set(i),_=I):(n.set(t),o+=I/r,o*=l,h+=o,t.add(o),_=h-m),c=Vt(_),m=h,T}function y(){const I=i.get()-e.get();return M(I)<.001}function u(){return r}function p(){return c}function d(){return o}function f(){return v(a)}function b(){return L(s)}function v(I){return r=I,T}function L(I){return l=I,T}const T={direction:p,duration:u,velocity:d,seek:g,settled:y,useBaseFriction:b,useBaseDuration:f,useFriction:L,useDuration:v};return T}function pn(t,e,n,i,a){const s=a.measure(10),o=a.measure(50),c=at(.1,.99);let r=!1;function l(){return!(r||!t.reachedAny(n.get())||!t.reachedAny(e.get()))}function h(y){if(!l())return;const u=t.reachedMin(e.get())?"min":"max",p=M(t[u]-e.get()),d=n.get()-e.get(),f=c.constrain(p/o);n.subtract(d*f),!y&&M(d)<s&&(n.set(t.constrain(n.get())),i.useDuration(25).useBaseFriction())}function m(y){r=!y}return{shouldConstrain:l,constrain:h,toggleActive:m}}function mn(t,e,n,i,a){const s=at(-e+t,0),o=m(),c=h(),r=g();function l(u,p){return yt(u,p)<=1}function h(){const u=o[0],p=Q(o),d=o.lastIndexOf(u),f=o.indexOf(p)+1;return at(d,f)}function m(){return n.map((u,p)=>{const{min:d,max:f}=s,b=s.constrain(u),v=!p,L=Rt(n,p);return v?f:L||l(d,b)?d:l(f,b)?f:b}).map(u=>parseFloat(u.toFixed(3)))}function g(){if(e<=t+a)return[s.max];if(i==="keepSnaps")return o;const{min:u,max:p}=c;return o.slice(u,p)}return{snapsContained:r,scrollContainLimit:c}}function gn(t,e,n){const i=e[0],a=n?i-t:Q(e);return{limit:at(a,i)}}function hn(t,e,n,i){const s=e.min+.1,o=e.max+.1,{reachedMin:c,reachedMax:r}=at(s,o);function l(g){return g===1?r(n.get()):g===-1?c(n.get()):!1}function h(g){if(!l(g))return;const y=t*(g*-1);i.forEach(u=>u.add(y))}return{loop:h}}function bn(t){const{max:e,length:n}=t;function i(s){const o=s-e;return n?o/-n:0}return{get:i}}function yn(t,e,n,i,a){const{startEdge:s,endEdge:o}=t,{groupSlides:c}=a,r=m().map(e.measure),l=g(),h=y();function m(){return c(i).map(p=>Q(p)[o]-p[0][s]).map(M)}function g(){return i.map(p=>n[s]-p[s]).map(p=>-M(p))}function y(){return c(l).map(p=>p[0]).map((p,d)=>p+r[d])}return{snaps:l,snapsAligned:h}}function xn(t,e,n,i,a,s){const{groupSlides:o}=a,{min:c,max:r}=i,l=h();function h(){const g=o(s),y=!t||e==="keepSnaps";return n.length===1?[s]:y?g:g.slice(c,r).map((u,p,d)=>{const f=!p,b=Rt(d,p);if(f){const v=Q(d[0])+1;return ce(v)}if(b){const v=wt(s)-Q(d)[0]+1;return ce(v,Q(d)[0])}return u})}return{slideRegistry:l}}function vn(t,e,n,i,a){const{reachedAny:s,removeOffset:o,constrain:c}=i;function r(u){return u.concat().sort((p,d)=>M(p)-M(d))[0]}function l(u){const p=t?o(u):c(u),d=e.map((b,v)=>({diff:h(b-p,0),index:v})).sort((b,v)=>M(b.diff)-M(v.diff)),{index:f}=d[0];return{index:f,distance:p}}function h(u,p){const d=[u,u+n,u-n];if(!t)return u;if(!p)return r(d);const f=d.filter(b=>Vt(b)===p);return f.length?r(f):Q(d)-n}function m(u,p){const d=e[u]-a.get(),f=h(d,p);return{index:u,distance:f}}function g(u,p){const d=a.get()+u,{index:f,distance:b}=l(d),v=!t&&s(d);if(!p||v)return{index:f,distance:u};const L=e[f]-b,T=u+h(L,0);return{index:f,distance:T}}return{byDistance:g,byIndex:m,shortcut:h}}function Sn(t,e,n,i,a,s,o){function c(m){const g=m.distance,y=m.index!==e.get();s.add(g),g&&(i.duration()?t.start():(t.update(),t.render(1),t.update())),y&&(n.set(e.get()),e.set(m.index),o.emit("select"))}function r(m,g){const y=a.byDistance(m,g);c(y)}function l(m,g){const y=e.clone().set(m),u=a.byIndex(y.get(),g);c(u)}return{distance:r,index:l}}function wn(t,e,n,i,a,s,o,c){const r={passive:!0,capture:!0};let l=0;function h(y){if(!c)return;function u(p){if(new Date().getTime()-l>10)return;o.emit("slideFocusStart"),t.scrollLeft=0;const b=n.findIndex(v=>v.includes(p));$t(b)&&(a.useDuration(0),i.index(b,0),o.emit("slideFocus"))}s.add(document,"keydown",m,!1),e.forEach((p,d)=>{s.add(p,"focus",f=>{(Tt(c)||c(y,f))&&u(d)},r)})}function m(y){y.code==="Tab"&&(l=new Date().getTime())}return{init:h}}function gt(t){let e=t;function n(){return e}function i(r){e=o(r)}function a(r){e+=o(r)}function s(r){e-=o(r)}function o(r){return $t(r)?r:r.get()}return{get:n,set:i,add:a,subtract:s}}function pe(t,e){const n=t.scroll==="x"?o:c,i=e.style;let a=null,s=!1;function o(g){return`translate3d(${g}px,0px,0px)`}function c(g){return`translate3d(0px,${g}px,0px)`}function r(g){if(s)return;const y=nn(t.direction(g));y!==a&&(i.transform=n(y),a=y)}function l(g){s=!g}function h(){s||(i.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:h,to:r,toggleActive:l}}function _n(t,e,n,i,a,s,o,c,r){const h=xt(a),m=xt(a).reverse(),g=f().concat(b());function y(w,_){return w.reduce((E,C)=>E-a[C],_)}function u(w,_){return w.reduce((E,C)=>y(E,_)>0?E.concat([C]):E,[])}function p(w){return s.map((_,E)=>({start:_-i[E]+.5+w,end:_+e-.5+w}))}function d(w,_,E){const C=p(_);return w.map(O=>{const z=E?0:-n,q=E?n:0,k=E?"end":"start",B=C[O][k];return{index:O,loopPoint:B,slideLocation:gt(-1),translate:pe(t,r[O]),target:()=>c.get()>B?z:q}})}function f(){const w=o[0],_=u(m,w);return d(_,n,!1)}function b(){const w=e-o[0]-1,_=u(h,w);return d(_,-n,!0)}function v(){return g.every(({index:w})=>{const _=h.filter(E=>E!==w);return y(_,e)<=.1})}function L(){g.forEach(w=>{const{target:_,translate:E,slideLocation:C}=w,O=_();O!==C.get()&&(E.to(O),C.set(O))})}function T(){g.forEach(w=>w.translate.clear())}return{canLoop:v,clear:T,loop:L,loopPoints:g}}function Ln(t,e,n){let i,a=!1;function s(r){if(!n)return;function l(h){for(const m of h)if(m.type==="childList"){r.reInit(),e.emit("slidesChanged");break}}i=new MutationObserver(h=>{a||(Tt(n)||n(r,h))&&l(h)}),i.observe(t,{childList:!0})}function o(){i&&i.disconnect(),a=!0}return{init:s,destroy:o}}function In(t,e,n,i){const a={};let s=null,o=null,c,r=!1;function l(){c=new IntersectionObserver(u=>{r||(u.forEach(p=>{const d=e.indexOf(p.target);a[d]=p}),s=null,o=null,n.emit("slidesInView"))},{root:t.parentElement,threshold:i}),e.forEach(u=>c.observe(u))}function h(){c&&c.disconnect(),r=!0}function m(u){return vt(a).reduce((p,d)=>{const f=parseInt(d),{isIntersecting:b}=a[f];return(u&&b||!u&&!b)&&p.push(f),p},[])}function g(u=!0){if(u&&s)return s;if(!u&&o)return o;const p=m(u);return u&&(s=p),u||(o=p),p}return{init:l,destroy:h,get:g}}function En(t,e,n,i,a,s){const{measureSize:o,startEdge:c,endEdge:r}=t,l=n[0]&&a,h=u(),m=p(),g=n.map(o),y=d();function u(){if(!l)return 0;const b=n[0];return M(e[c]-b[c])}function p(){if(!l)return 0;const b=s.getComputedStyle(Q(i));return parseFloat(b.getPropertyValue(`margin-${r}`))}function d(){return n.map((b,v,L)=>{const T=!v,I=Rt(L,v);return T?g[v]+h:I?g[v]+m:L[v+1][c]-b[c]}).map(M)}return{slideSizes:g,slideSizesWithGaps:y,startGap:h,endGap:m}}function On(t,e,n,i,a,s,o,c,r){const{startEdge:l,endEdge:h,direction:m}=t,g=$t(n);function y(f,b){return xt(f).filter(v=>v%b===0).map(v=>f.slice(v,v+b))}function u(f){return f.length?xt(f).reduce((b,v,L)=>{const T=Q(b)||0,I=T===0,w=v===wt(f),_=a[l]-s[T][l],E=a[l]-s[v][h],C=!i&&I?m(o):0,O=!i&&w?m(c):0,z=M(E-O-(_+C));return L&&z>e+r&&b.push(v),w&&b.push(f.length),b},[]).map((b,v,L)=>{const T=Math.max(L[v-1]||0);return f.slice(T,b)}):[]}function p(f){return g?y(f,n):u(f)}return{groupSlides:p}}function Tn(t,e,n,i,a,s,o){const{align:c,axis:r,direction:l,startIndex:h,loop:m,duration:g,dragFree:y,dragThreshold:u,inViewThreshold:p,slidesToScroll:d,skipSnaps:f,containScroll:b,watchResize:v,watchSlides:L,watchDrag:T,watchFocus:I}=s,w=2,_=ln(),E=_.measure(e),C=n.map(_.measure),O=rn(r,l),z=O.measureSize(E),q=un(z),k=on(c,z),B=!m&&!!b,R=m||!!b,{slideSizes:H,slideSizesWithGaps:K,startGap:J,endGap:X}=En(O,E,C,n,R,a),G=On(O,z,d,m,E,C,J,X,w),{snaps:W,snapsAligned:tt}=yn(O,k,E,C,G),et=-Q(W)+Q(K),{snapsContained:ft,scrollContainLimit:dt}=mn(z,et,tt,b,w),V=B?ft:tt,{limit:j}=gn(et,V,m),nt=de(wt(V),h,m),U=nt.clone(),A=xt(n),x=({dragHandler:lt,scrollBody:Mt,scrollBounds:Ct,options:{loop:_t}})=>{_t||Ct.constrain(lt.pointerDown()),Mt.seek()},D=({scrollBody:lt,translate:Mt,location:Ct,offsetLocation:_t,previousLocation:he,scrollLooper:be,slideLooper:ye,dragHandler:xe,animation:ve,eventHandler:Jt,scrollBounds:Se,options:{loop:Qt}},Xt)=>{const Yt=lt.settled(),we=!Se.shouldConstrain(),Zt=Qt?Yt:Yt&&we,Wt=Zt&&!xe.pointerDown();Wt&&ve.stop();const _e=Ct.get()*Xt+he.get()*(1-Xt);_t.set(_e),Qt&&(be.loop(lt.direction()),ye.loop()),Mt.to(_t.get()),Wt&&Jt.emit("settle"),Zt||Jt.emit("scroll")},F=sn(i,a,()=>x(At),lt=>D(At,lt)),$=.68,Y=V[nt.get()],ot=gt(Y),it=gt(Y),st=gt(Y),ct=gt(Y),pt=dn(ot,st,it,ct,g,$),kt=vn(m,V,et,j,ct),Dt=Sn(F,nt,U,pt,kt,ct,o),Ut=bn(j),qt=St(),me=In(e,n,o,p),{slideRegistry:Kt}=xn(B,b,V,dt,G,A),ge=wn(t,n,Kt,Dt,pt,qt,o,I),At={ownerDocument:i,ownerWindow:a,eventHandler:o,containerRect:E,slideRects:C,animation:F,axis:O,dragHandler:cn(O,t,i,a,ct,an(O,a),ot,F,Dt,pt,kt,nt,o,q,y,u,f,$,T),eventStore:qt,percentOfView:q,index:nt,indexPrevious:U,limit:j,location:ot,offsetLocation:st,previousLocation:it,options:s,resizeHandler:fn(e,o,a,n,O,v,_),scrollBody:pt,scrollBounds:pn(j,st,ct,pt,q),scrollLooper:hn(et,j,st,[ot,st,it,ct]),scrollProgress:Ut,scrollSnapList:V.map(Ut.get),scrollSnaps:V,scrollTarget:kt,scrollTo:Dt,slideLooper:_n(O,z,et,H,K,W,V,st,n),slideFocus:ge,slidesHandler:Ln(e,o,L),slidesInView:me,slideIndexes:A,slideRegistry:Kt,slidesToScroll:G,target:ct,translate:pe(O,e)};return At}function kn(){let t={},e;function n(l){e=l}function i(l){return t[l]||[]}function a(l){return i(l).forEach(h=>h(e,l)),r}function s(l,h){return t[l]=i(l).concat([h]),r}function o(l,h){return t[l]=i(l).filter(m=>m!==h),r}function c(){t={}}const r={init:n,emit:a,off:o,on:s,clear:c};return r}const Dn={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function An(t){function e(s,o){return fe(s,o||{})}function n(s){const o=s.breakpoints||{},c=vt(o).filter(r=>t.matchMedia(r).matches).map(r=>o[r]).reduce((r,l)=>e(r,l),{});return e(s,c)}function i(s){return s.map(o=>vt(o.breakpoints||{})).reduce((o,c)=>o.concat(c),[]).map(t.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:i}}function Mn(t){let e=[];function n(s,o){return e=o.filter(({options:c})=>t.optionsAtMedia(c).active!==!1),e.forEach(c=>c.init(s,t)),o.reduce((c,r)=>Object.assign(c,{[r.name]:r}),{})}function i(){e=e.filter(s=>s.destroy())}return{init:n,destroy:i}}function Et(t,e,n){const i=t.ownerDocument,a=i.defaultView,s=An(a),o=Mn(s),c=St(),r=kn(),{mergeOptions:l,optionsAtMedia:h,optionsMediaQueries:m}=s,{on:g,off:y,emit:u}=r,p=O;let d=!1,f,b=l(Dn,Et.globalOptions),v=l(b),L=[],T,I,w;function _(){const{container:A,slides:x}=v;I=(Nt(A)?t.querySelector(A):A)||t.children[0];const F=Nt(x)?I.querySelectorAll(x):x;w=[].slice.call(F||I.children)}function E(A){const x=Tn(t,I,w,i,a,A,r);if(A.loop&&!x.slideLooper.canLoop()){const D=Object.assign({},A,{loop:!1});return E(D)}return x}function C(A,x){d||(b=l(b,A),v=h(b),L=x||L,_(),f=E(v),m([b,...L.map(({options:D})=>D)]).forEach(D=>c.add(D,"change",O)),v.active&&(f.translate.to(f.location.get()),f.animation.init(),f.slidesInView.init(),f.slideFocus.init(U),f.eventHandler.init(U),f.resizeHandler.init(U),f.slidesHandler.init(U),f.options.loop&&f.slideLooper.loop(),I.offsetParent&&w.length&&f.dragHandler.init(U),T=o.init(U,L)))}function O(A,x){const D=G();z(),C(l({startIndex:D},A),x),r.emit("reInit")}function z(){f.dragHandler.destroy(),f.eventStore.clear(),f.translate.clear(),f.slideLooper.clear(),f.resizeHandler.destroy(),f.slidesHandler.destroy(),f.slidesInView.destroy(),f.animation.destroy(),o.destroy(),c.clear()}function q(){d||(d=!0,c.clear(),z(),r.emit("destroy"),r.clear())}function k(A,x,D){!v.active||d||(f.scrollBody.useBaseFriction().useDuration(x===!0?0:v.duration),f.scrollTo.index(A,D||0))}function B(A){const x=f.index.add(1).get();k(x,A,-1)}function R(A){const x=f.index.add(-1).get();k(x,A,1)}function H(){return f.index.add(1).get()!==G()}function K(){return f.index.add(-1).get()!==G()}function J(){return f.scrollSnapList}function X(){return f.scrollProgress.get(f.offsetLocation.get())}function G(){return f.index.get()}function W(){return f.indexPrevious.get()}function tt(){return f.slidesInView.get()}function et(){return f.slidesInView.get(!1)}function ft(){return T}function dt(){return f}function V(){return t}function j(){return I}function nt(){return w}const U={canScrollNext:H,canScrollPrev:K,containerNode:j,internalEngine:dt,destroy:q,off:y,on:g,emit:u,plugins:ft,previousScrollSnap:W,reInit:p,rootNode:V,scrollNext:B,scrollPrev:R,scrollProgress:X,scrollSnapList:J,scrollTo:k,selectedScrollSnap:G,slideNodes:nt,slidesInView:tt,slidesNotInView:et};return C(e,n),setTimeout(()=>r.emit("init"),0),U}Et.globalOptions=void 0;function Ht(t={},e=[]){const n=ne(t),i=ne(e);let a=n?t.value:t,s=i?e.value:e;const o=te(),c=te();function r(){c.value&&c.value.reInit(a,s)}return le(()=>{!We()||!o.value||(Et.globalOptions=Ht.globalOptions,c.value=Et(o.value,a,s))}),Me(()=>{c.value&&c.value.destroy()}),n&&ee(t,l=>{jt(a,l)||(a=l,r())}),i&&ee(e,l=>{tn(s,l)||(s=l,r())}),[o,c]}Ht.globalOptions=void 0;const Cn={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function Pn(t,e){const n=t.scrollSnapList();return typeof e=="number"?n.map(()=>e):e(n,t)}function Fn(t,e){const n=t.rootNode();return e&&e(n)||n}function Gt(t={}){let e,n,i,a,s=null,o=0,c=!1,r=!1,l=!1,h=!1;function m(k,B){n=k;const{mergeOptions:R,optionsAtMedia:H}=B,K=R(Cn,Gt.globalOptions),J=R(K,t);if(e=H(J),n.scrollSnapList().length<=1)return;h=e.jump,i=!1,a=Pn(n,e.delay);const{eventStore:X,ownerDocument:G}=n.internalEngine(),W=!!n.internalEngine().options.watchDrag,tt=Fn(n,e.rootNode);X.add(G,"visibilitychange",f),W&&n.on("pointerDown",v),W&&!e.stopOnInteraction&&n.on("pointerUp",L),e.stopOnMouseEnter&&X.add(tt,"mouseenter",T),e.stopOnMouseEnter&&!e.stopOnInteraction&&X.add(tt,"mouseleave",I),e.stopOnFocusIn&&n.on("slideFocusStart",d),e.stopOnFocusIn&&!e.stopOnInteraction&&X.add(n.containerNode(),"focusout",p),e.playOnInit&&p()}function g(){n.off("pointerDown",v).off("pointerUp",L).off("slideFocusStart",d),d(),i=!0,c=!1}function y(){const{ownerWindow:k}=n.internalEngine();k.clearTimeout(o),o=k.setTimeout(O,a[n.selectedScrollSnap()]),s=new Date().getTime(),n.emit("autoplay:timerset")}function u(){const{ownerWindow:k}=n.internalEngine();k.clearTimeout(o),o=0,s=null,n.emit("autoplay:timerstopped")}function p(){if(!i){if(b()){l=!0;return}c||n.emit("autoplay:play"),y(),c=!0}}function d(){i||(c&&n.emit("autoplay:stop"),u(),c=!1)}function f(){if(b())return l=c,d();l&&p()}function b(){const{ownerDocument:k}=n.internalEngine();return k.visibilityState==="hidden"}function v(){r||d()}function L(){r||p()}function T(){r=!0,d()}function I(){r=!1,p()}function w(k){typeof k<"u"&&(h=k),p()}function _(){c&&d()}function E(){c&&p()}function C(){return c}function O(){const{index:k}=n.internalEngine(),B=k.clone().add(1).get(),R=n.scrollSnapList().length-1,H=e.stopOnLastSnap&&B===R;if(n.canScrollNext()?n.scrollNext(h):n.scrollTo(0,h),n.emit("autoplay:select"),H)return d();p()}function z(){if(!s)return null;const k=a[n.selectedScrollSnap()],B=new Date().getTime()-s;return k-B}return{name:"autoplay",options:t,init:m,destroy:g,play:w,stop:_,reset:E,isPlaying:C,timeUntilNext:z}}Gt.globalOptions=void 0;const Nn={key:0,class:"relative"},zn={class:"flex"},Bn=["src","alt"],jn={key:0,class:"absolute bottom-2 left-1/2 flex -translate-x-1/2 gap-1.5"},$n={key:1,class:"flex h-40 items-center justify-center bg-gradient-to-r from-red-500 to-red-600"},Vn=Ot({__name:"BannerCarousel",props:{banners:{},imageBaseUrl:{default:""}},setup(t){const e=t,{localize:n}=ae(),[i]=Ht({loop:!0},[Gt({delay:3e3,stopOnInteraction:!1})]),a=rt(0),s=o=>o?o.startsWith("http")?o:`${e.imageBaseUrl}${o}`:"";return(o,c)=>t.banners.length>0?(P(),N("div",Nn,[S("div",{ref_key:"emblaRef",ref:i,class:"overflow-hidden"},[S("div",zn,[(P(!0),N(Lt,null,It(t.banners,(r,l)=>(P(),N("div",{key:r.id||l,class:"relative min-w-0 flex-[0_0_100%]"},[S("img",{src:s(r.pic||""),alt:Z(n)(r.lang_title,r.title),class:"h-40 w-full object-cover",onError:c[0]||(c[0]=h=>h.target.style.display="none")},null,40,Bn)]))),128))])],512),t.banners.length>1?(P(),N("div",jn,[(P(!0),N(Lt,null,It(t.banners,(r,l)=>(P(),N("span",{key:l,class:ut(["h-1.5 w-1.5 rounded-full transition-colors",l===a.value?"bg-white":"bg-white/50"])},null,2))),128))])):Ft("",!0)])):(P(),N("div",$n,[...c[1]||(c[1]=[S("span",{class:"text-lg font-bold text-white"},"顶峰28",-1)])]))}}),Rn={class:"flex min-h-screen justify-center bg-[#eef3f8]"},Hn={class:"w-full max-w-xl bg-[#f5f7fb] shadow-sm"},Gn={key:1,class:"px-3 pb-20 pt-3"},Un={class:"grid grid-cols-4 gap-2 mb-3"},qn={class:"mt-1 text-[12px] text-gray-700"},Kn={class:"mb-2 flex items-center justify-between text-[13px]"},Jn={class:"flex items-center gap-2"},Qn={class:"text-black font-bold"},Xn={class:"mb-4 grid grid-cols-3 gap-2"},Yn=["src","alt"],Zn={key:1,class:"col-span-3 text-center py-4 text-gray-400 text-sm"},Wn={key:0,class:"space-y-3"},to=["href"],eo=["href"],no={key:1,class:"space-y-3"},oo={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},so={class:"bg-white rounded-2xl max-w-sm w-full max-h-[70vh] overflow-hidden shadow-2xl"},ro={class:"flex items-center justify-between p-4 border-b bg-gradient-to-r from-red-500 to-red-600"},io={class:"font-bold text-white text-lg"},co={class:"p-4 overflow-y-auto max-h-[50vh]"},ao=["innerHTML"],lo={class:"p-4 border-t bg-gray-50"},wo=Ot({__name:"index",setup(t){const{t:e}=Bt(),{localize:n}=ae(),i="https://img.kaixin28.com",a=rt(!0),s=rt(!0),o=rt([]),c=rt(null),r=rt(null),l=rt(!1),h=rt(null),m=Ce(()=>[{name:e("home.announcement"),icon:ue,color:"bg-[#ffb84d]",href:"/index/announce"},{name:e("home.events"),icon:Ve,color:"bg-[#b47cff]",href:"/index/activities"},{name:e("home.rewards"),icon:$e,color:"bg-[#ff6b6b]",href:"/mine/relief"},{name:e("home.partners"),icon:Re,color:"bg-[#4ec5ff]",href:"/index/partners"}]),g=async()=>{try{a.value=!0,s.value=!0;const[y,u,p]=await Promise.all([Oe(),Te({hot_count:6,new_count:3}),ke()]);y.code===200&&(o.value=y.data||[]),u.code===200&&(c.value=u.data),p.code===200&&p.data&&(h.value=p.data),s.value=!1;const d=await De();if(d.code===200&&d.data?.length>0){const f=d.data[0];r.value=f;const b=`home_popup_${f.id}`;sessionStorage.getItem(b)||(l.value=!0,sessionStorage.setItem(b,"true"))}}catch(y){console.error("加载首页数据失败:",y)}finally{a.value=!1}};return le(()=>{g()}),(y,u)=>{const p=Fe("router-link");return P(),N("div",Rn,[S("div",Hn,[bt(Ye),a.value?(P(),mt(Je,{key:0})):(P(),N("main",Gn,[bt(Vn,{banners:o.value,"image-base-url":Z(i),class:"mb-3"},null,8,["banners","image-base-url"]),S("section",Un,[(P(!0),N(Lt,null,It(m.value,(d,f)=>(P(),mt(p,{key:d.href,to:d.href,class:"flex flex-col items-center justify-center text-[13px] relative transform transition-transform duration-200 hover:scale-105 active:scale-95",style:ze({animationDelay:`${f*50}ms`})},{default:oe(()=>[S("div",{class:ut(["flex h-11 w-11 items-center justify-center rounded-lg text-xl text-white shadow-md relative transition-shadow hover:shadow-lg",d.color])},[(P(),mt(Ne(d.icon),{class:"h-5 w-5"}))],2),S("span",qn,ht(d.name),1)]),_:2},1032,["to","style"]))),128))]),S("section",Kn,[S("div",Jn,[u[2]||(u[2]=S("span",{class:"w-1 h-4 bg-red-500 rounded-full"},null,-1)),S("span",Qn,ht(Z(e)("home.hot-games")),1)])]),S("section",Xn,[c.value?.hot&&c.value.hot.length>0?(P(!0),N(Lt,{key:0},It(c.value.hot,(d,f)=>(P(),mt(p,{key:"hot-games"+f,to:`/games?lottery_id=${d.id}`,class:"block transform transition-all duration-200 hover:scale-105 hover:shadow-lg active:scale-95 rounded-md overflow-hidden"},{default:oe(()=>[S("img",{src:d.logo||"",alt:d.name||"",class:"w-full rounded-md"},null,8,Yn)]),_:2},1032,["to"]))),128)):(P(),N("div",Zn," 暂无热门游戏 "))]),!s.value&&h.value?(P(),N("section",Wn,[S("a",{href:h.value.pc_url,class:"block"},[...u[3]||(u[3]=[S("button",{class:"flex h-11 w-full items-center justify-center rounded-full bg-gradient-to-r from-[#ff3a00] to-[#ff6b35] text-[14px] font-medium text-white shadow-md hover:shadow-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]"}," 电脑版 ",-1)])],8,to),S("a",{href:h.value.customer_link,class:"block"},[...u[4]||(u[4]=[S("button",{class:"flex h-11 w-full items-center justify-center rounded-full bg-gradient-to-r from-[#ff3a00] to-[#ff6b35] text-[14px] font-medium text-white shadow-md hover:shadow-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]"}," 联系客服 ",-1)])],8,eo)])):s.value?(P(),N("section",no,[...u[5]||(u[5]=[S("div",{class:"h-11 w-full rounded-full bg-gray-200 animate-pulse"},null,-1),S("div",{class:"h-11 w-full rounded-full bg-gray-200 animate-pulse"},null,-1)])])):Ft("",!0)])),(P(),mt(Pe,{to:"body"},[l.value&&r.value?(P(),N("div",oo,[S("div",so,[S("div",ro,[S("h3",io,ht(Z(n)(r.value.lang_title,r.value.title)),1),S("button",{onClick:u[0]||(u[0]=d=>l.value=!1),class:"text-white/80 hover:text-white p-1.5 rounded-full hover:bg-white/20 transition-colors"},[bt(Z(je),{class:"h-5 w-5"})])]),S("div",co,[S("div",{class:"text-sm text-gray-600 leading-relaxed",innerHTML:Z(n)(r.value.lang_content,r.value.content)},null,8,ao)]),S("div",lo,[S("button",{onClick:u[1]||(u[1]=d=>l.value=!1),class:"w-full bg-gradient-to-r from-[#ff3a00] to-[#ff6b35] text-white rounded-full py-3 text-sm font-bold hover:shadow-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]"}," 我知道了 ")])])])):Ft("",!0)]))])])}}});export{wo as default};
