import{d as v,q as d,f as u,l as e,u as t,L as x,z as l,K as g,J as k,Q as w,R as y,r as c,x as C,B as N,v as f}from"./vue-vendor-ntQnFNWs.js";import{_ as V}from"./coin-BjeO1Yvx.js";import{a as B,C as S,t as m}from"./index-FdFg60UN.js";import{b as z}from"./customer-D_FikQ7t.js";import{_ as D}from"./PageHeader.vue_vue_type_script_setup_true_lang-BXIr5qQq.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-Dp8QZFdo.js";const M={class:"min-h-screen bg-[#f5f7fb] pb-16"},R={class:"px-3 pb-20 pt-3"},T={class:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2"},q={class:"text-red-600 text-sm"},A={class:"bg-white rounded-xl shadow-sm p-3"},E={class:"flex items-center gap-2"},I={class:"text-gray-700 w-16 flex-shrink-0"},J=["placeholder"],K={key:0,class:"mt-1 text-xs text-red-500"},L=["disabled"],W=v({__name:"edit-nickname",setup(Q){const p=N(),{t:s}=B(),a=c(""),o=c(""),r=c(!1),_=()=>(o.value="",a.value.trim()?a.value.length>50?(o.value="昵称最多50个字符",!1):!0:(o.value="请输入昵称",!1)),b=async()=>{if(_()){r.value=!0;try{const n=await z({nickname:a.value});n.code===200?(m.success(n.message||"修改成功"),p.back()):m.error(n.message||"修改失败")}catch{m.error("修改失败")}finally{r.value=!1}}};return(n,i)=>(f(),d("div",M,[u(D,{title:t(s)("mine.setting.edit-nickname")},null,8,["title"]),e("main",R,[e("div",T,[u(t(S),{class:"w-5 h-5 text-red-500 flex-shrink-0"}),e("span",q,[x(l(t(s)("mine.edit-nickname.alert"))+" ",1),i[1]||(i[1]=e("img",{src:V,alt:"coin",class:"inline-block ml-1 w-[13px] h-[13px]"},null,-1))])]),e("form",{onSubmit:g(b,["prevent"]),class:"mt-5"},[e("div",A,[e("div",E,[e("label",I,l(t(s)("mine.profile.form-label.nickname")),1),w(e("input",{"onUpdate:modelValue":i[0]||(i[0]=h=>a.value=h),type:"text",placeholder:t(s)("common.form.placeholder.enter")+t(s)("mine.profile.form-label.nickname"),class:"flex-1 text-gray-800 placeholder-gray-400 focus:outline-none h-12"},null,8,J),[[y,a.value]])]),o.value?(f(),d("p",K,l(o.value),1)):k("",!0)]),e("button",{type:"submit",disabled:r.value,class:C(["mt-10 h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",r.value?"opacity-60 cursor-not-allowed":"cursor-pointer"])},l(r.value?t(s)("common.form.button.submitting"):t(s)("common.form.button.submit")),11,L)],32)])]))}});export{W as default};
