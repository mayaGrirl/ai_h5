import{d as P,o as R,c as _,I as W,w as S,q as i,k as b,l as o,f as c,A as D,u as r,J as u,r as C,z as m,F as g,t as k,K as $,p as I,B as F,v as n,x as w,L as N}from"./vue-vendor-ntQnFNWs.js";import{_ as H}from"./coin-BjeO1Yvx.js";import{u as O}from"./game-CbdZckfQ.js";import{c as T,u as U,_ as J}from"./index-BvHA6CJ8.js";import{_ as z}from"./TabBar.vue_vue_type_script_setup_true_lang-Cjy22b3L.js";import{C as B}from"./chevron-down-DfN8-A1F.js";import{B as K}from"./bell-DA0Ucy8e.js";import"./game-DANEdZjg.js";import"./utils-vendor-CbLx3nH2.js";import"./user-CS6esdsb.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=T("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=T("BellOffIcon",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),Y={class:"min-h-screen bg-gray-100 flex flex-col"},Z={key:0,class:"flex flex-col flex-1"},ee={class:"flex-1"},te={key:1,class:"flex min-h-screen justify-center items-center bg-zinc-50"},se={key:2,class:"flex flex-col flex-1"},oe={class:"bg-red-600 text-white px-4 py-3 flex items-center h-11 justify-between relative"},ae={class:"flex items-center gap-1 mx-auto"},re={key:0,class:"text-white/60 mx-1"},ne={class:"flex items-center gap-3"},ie=["title"],le={class:"font-bold text-sm"},de={class:"bg-white border-b"},ce={class:"flex overflow-x-auto no-scrollbar"},ue=["onClick"],me={class:"flex-1 pb-14"},pe={class:"mx-4 w-full max-w-sm rounded-lg bg-white max-h-[70vh] flex flex-col"},fe={class:"flex-1 overflow-y-auto p-3"},he={class:"grid grid-cols-2 gap-3"},ve=["onClick"],xe={key:0,class:"text-xs mt-1"},ye={class:"mx-4 w-full max-w-sm rounded-lg bg-white max-h-[70vh] flex flex-col"},be={class:"flex-1 overflow-y-auto p-3"},_e={key:0,class:"text-center py-8 text-gray-500"},ge={key:1,class:"grid grid-cols-2 gap-3"},ke=["onClick"],we={key:0,class:"text-xs mt-1"},Ge=P({__name:"GamesLayout",setup(Se){const l=W(),p=F(),e=O(),q=U(),f=_(()=>{const a=l.path;return a==="/games"||a==="/games/"}),h=[{name:"投注",path:"play"},{name:"开奖记录",path:"open"},{name:"投注记录",path:"record"},{name:"模式",path:"mode"},{name:"自动",path:"auto"},{name:"走势",path:"trend"},{name:"盈亏",path:"stat"},{name:"规则",path:"rules"}],v=C(!1),x=C(!1),G=_(()=>{const a=l.path;for(const t of h)if(a.startsWith(`/games/${t.path}`))return t.name;return"投注"}),A=_(()=>(q.currentCustomer?.points??0).toLocaleString());R(async()=>{if(!f.value){e.initSoundSetting();const a=l.query.lottery_id,t=l.query.group_id;await e.fetchGameAll(a,t)}}),S(()=>l.fullPath,async()=>{if(!f.value&&!e.activeGame){e.initSoundSetting();const a=l.query.lottery_id,t=l.query.group_id;await e.fetchGameAll(a,t)}}),S(()=>[l.query.lottery_id,l.query.group_id],async([a,t])=>{if(!f.value){if(a&&e.activeGame?.id!==Number(a)){const d=e.allGames.find(s=>String(s.id)===String(a));d&&await e.handleGameSwitch(d)}t&&e.selectedGroupId!==Number(t)&&e.setSelectedGroupId(Number(t))}});const L=a=>{if(a.name===G.value||!e.activeGame)return;const t=`/games/${a.path}?lottery_id=${e.activeGame.id}&group_id=${e.selectedGroupId}`;p.push(t)},M=async a=>{v.value=!1;const t=await e.handleGameSwitch(a),s=`/games/${h.find(y=>l.path.startsWith(`/games/${y.path}`))?.path||"play"}?lottery_id=${a.id}&group_id=${t}`;p.push(s)},E=a=>{if(e.setSelectedGroupId(a),x.value=!1,e.activeGame){const d=`/games/${h.find(s=>l.path.startsWith(`/games/${s.path}`))?.path||"play"}?lottery_id=${e.activeGame.id}&group_id=${a}`;p.push(d)}},j=()=>{p.back()},V=()=>{p.push("/mine/receipt-text?tab=points")};return(a,t)=>{const d=D("router-view");return n(),i("div",Y,[f.value?(n(),i("div",Z,[o("div",ee,[c(d)]),c(z)])):r(e).isLoadingGames?(n(),i("div",te,[...t[5]||(t[5]=[o("div",{class:"text-center"},[o("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-red-600 border-r-transparent"}),o("p",{class:"mt-3 text-gray-600"},"加载中...")],-1)])])):(n(),i("div",se,[o("header",oe,[o("button",{class:"absolute left-2 p-1 text-white hover:bg-white/10 rounded-full cursor-pointer",onClick:j},[c(r(Q),{class:"h-5 w-5"})]),o("div",ae,[o("button",{class:"flex items-center gap-0.5 text-base font-bold cursor-pointer hover:opacity-80 transition-opacity",onClick:t[0]||(t[0]=s=>v.value=!0)},[o("span",null,m(r(e).gameName),1),c(r(B),{size:14})]),r(e).currentGroupName?(n(),i("span",re,"|")):u("",!0),r(e).currentGroupName?(n(),i("button",{key:1,class:"flex items-center gap-0.5 text-sm font-medium cursor-pointer hover:opacity-80 transition-opacity",onClick:t[1]||(t[1]=s=>x.value=!0)},[o("span",null,m(r(e).currentGroupName),1),c(r(B),{size:12})])):u("",!0)]),o("div",ne,[o("button",{onClick:t[2]||(t[2]=s=>r(e).setSoundEnabled(!r(e).soundEnabled)),class:"p-1 rounded-full hover:bg-white/20 transition-colors",title:r(e).soundEnabled?"关闭开奖提示音":"开启开奖提示音"},[r(e).soundEnabled?(n(),b(r(K),{key:0,size:18,class:"text-yellow-300"})):(n(),b(r(X),{key:1,size:18,class:"text-white/60"}))],8,ie),o("div",{class:"flex items-center cursor-pointer hover:opacity-80 transition-opacity",onClick:V},[o("span",le,m(A.value),1),t[6]||(t[6]=o("img",{alt:"coin",class:"inline-block w-[13px] h-[13px]",src:H},null,-1))])])]),o("div",de,[o("div",ce,[(n(),i(g,null,k(h,s=>o("button",{key:s.name,onClick:y=>L(s),class:w(["px-4 py-2 text-xs whitespace-nowrap",G.value===s.name?"text-red-600 border-b-2 border-red-600 font-bold":"text-gray-700"])},m(s.name),11,ue)),64))])]),o("div",me,[c(d)]),c(z)])),(n(),b(I,{to:"body"},[v.value?(n(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t[3]||(t[3]=$(s=>v.value=!1,["self"]))},[o("div",pe,[t[7]||(t[7]=o("div",{class:"p-3 border-b font-medium"},"选择彩种",-1)),o("div",fe,[o("div",he,[(n(!0),i(g,null,k(r(e).allGames,s=>(n(),i("button",{key:s.id,onClick:y=>M(s),class:w(["p-3 rounded-lg text-center font-bold text-sm border transition-all",r(e).activeGame&&String(s.id)===String(r(e).activeGame.id)?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-gray-300 hover:border-red-600 hover:text-red-600"])},[N(m(s.name)+" ",1),r(e).activeGame&&String(s.id)===String(r(e).activeGame.id)?(n(),i("div",xe," 当前 ")):u("",!0)],10,ve))),128))])])])])):u("",!0)])),(n(),b(I,{to:"body"},[x.value?(n(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t[4]||(t[4]=$(s=>x.value=!1,["self"]))},[o("div",ye,[t[8]||(t[8]=o("div",{class:"p-3 border-b font-medium"},"选择玩法分组",-1)),o("div",be,[r(e).playGroups.length===0?(n(),i("div",_e," 暂无分组数据 ")):(n(),i("div",ge,[(n(!0),i(g,null,k(r(e).playGroups,s=>(n(),i("button",{key:s.id,onClick:y=>E(s.id),class:w(["p-3 rounded-lg text-center font-bold text-sm border transition-all",r(e).selectedGroupId===s.id?"bg-red-600 text-white border-red-600":"bg-white text-gray-700 border-gray-300 hover:border-red-600 hover:text-red-600"])},[N(m(s.name)+" ",1),r(e).selectedGroupId===s.id?(n(),i("div",we," 当前 ")):u("",!0)],10,ke))),128))]))])])])):u("",!0)]))])}}}),Me=J(Ge,[["__scopeId","data-v-16cfabed"]]);export{Me as default};
