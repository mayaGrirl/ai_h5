import{d as v,q as d,f as u,n as e,y as t,N as x,x as l,M as g,C as k,S as w,U as y,r as c,u as C,l as f,D as N}from"./vue-vendor-2ZNhN7Rr.js";import{_ as S}from"./coin-BjeO1Yvx.js";import{a as V,C as B,t as m}from"./index-BC9sSM5C.js";import{b as D}from"./customer-jpBR9lPt.js";import{_ as M}from"./PageHeader.vue_vue_type_script_setup_true_lang-XoqE462H.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-Cd9iVQbM.js";const T={class:"min-h-screen bg-[#f5f7fb] pb-16"},U={class:"px-3 pb-20 pt-3"},q={class:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2"},z={class:"text-red-600 text-sm"},A={class:"bg-white rounded-xl shadow-sm p-3"},E={class:"flex items-center gap-2"},I={class:"text-gray-700 w-16 flex-shrink-0"},R=["placeholder"],$={key:0,class:"mt-1 text-xs text-red-500"},j=["disabled"],W=v({__name:"edit-nickname",setup(F){const p=N(),{t:s}=V(),a=c(""),o=c(""),r=c(!1),_=()=>(o.value="",a.value.trim()?a.value.length>50?(o.value="昵称最多50个字符",!1):!0:(o.value="请输入昵称",!1)),b=async()=>{if(_()){r.value=!0;try{const n=await D({nickname:a.value});n.code===200?(m.success(n.message||"修改成功"),p.back()):m.error(n.message||"修改失败")}catch{m.error("修改失败")}finally{r.value=!1}}};return(n,i)=>(f(),d("div",T,[u(M,{title:t(s)("mine.setting.edit-nickname")},null,8,["title"]),e("main",U,[e("div",q,[u(t(B),{class:"w-5 h-5 text-red-500 flex-shrink-0"}),e("span",z,[x(l(t(s)("mine.edit-nickname.alert"))+" ",1),i[1]||(i[1]=e("img",{src:S,alt:"coin",class:"inline-block ml-1 w-[13px] h-[13px]"},null,-1))])]),e("form",{onSubmit:g(b,["prevent"]),class:"mt-5"},[e("div",A,[e("div",E,[e("label",I,l(t(s)("mine.profile.form-label.nickname")),1),w(e("input",{"onUpdate:modelValue":i[0]||(i[0]=h=>a.value=h),type:"text",placeholder:t(s)("common.form.placeholder.enter")+t(s)("mine.profile.form-label.nickname"),class:"flex-1 text-gray-800 placeholder-gray-400 focus:outline-none h-12"},null,8,R),[[y,a.value]])]),o.value?(f(),d("p",$,l(o.value),1)):k("",!0)]),e("button",{type:"submit",disabled:r.value,class:C(["mt-10 h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",r.value?"opacity-60 cursor-not-allowed":"cursor-pointer"])},l(r.value?t(s)("common.form.button.submitting"):t(s)("common.form.button.submit")),11,j)],32)])]))}});export{W as default};
