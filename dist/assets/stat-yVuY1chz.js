import{d as S,w as q,o as I,q as a,l as t,z as o,r as c,x as g,J as f,F as C,t as z,I as B,v as r}from"./vue-vendor-ntQnFNWs.js";import{c as M}from"./game-CV6KYeLZ.js";import{t as h}from"./index-DWbiG9GH.js";import"./utils-vendor-CbLx3nH2.js";const N={class:"bg-gray-100 pb-16"},F={class:"bg-white mx-3 my-3 rounded-lg shadow p-4"},V={class:"grid grid-cols-3 gap-3 text-center"},$={class:"bg-blue-50 rounded-lg p-3"},j={class:"text-lg font-bold text-blue-600"},D={class:"bg-green-50 rounded-lg p-3"},E={class:"text-lg font-bold text-green-600"},G={class:"bg-white mx-3 my-3 rounded-lg shadow"},J={key:0,class:"flex justify-center items-center py-8"},P={key:1,class:"text-center py-8 text-gray-500"},R={key:2,class:"divide-y"},A={class:"grid grid-cols-4 items-center gap-2"},H={class:"text-sm text-gray-800 font-medium"},K={class:"text-right"},O={class:"text-blue-600 font-medium"},Q={class:"text-center"},T={key:0,class:"text-green-600 font-bold"},U={key:1,class:"text-red-500"},W={class:"text-[10px] text-gray-400"},X={class:"text-right"},Y={key:0,class:"py-4 text-center"},Z=["disabled"],tt={key:1,class:"py-4 text-center text-gray-400 text-sm"},m=10,lt=S({__name:"stat",setup(et){const u=B(),l=c([]),n=c(!1),b=c(1),v=c(!0),d=c({}),w=()=>Number(u.query.lottery_id)||0,L=()=>Number(u.query.group_id)||0,x=async(_=1,s=!1)=>{const e=w(),p=L();if(e)try{n.value=!0;const i=await M({lottery_id:e,game_group_id:p,page:_,pageSize:m});if(i.code===200&&i.data){const y=i.data.list||[];s?(l.value=y,d.value=i.data.summary||{}):l.value=[...l.value,...y],v.value=y.length>=m,b.value=_}else h.error(i.message||"获取盈亏统计失败"),s&&(l.value=[])}catch{h.error("获取盈亏统计失败，请稍后重试"),s&&(l.value=[])}finally{n.value=!1}},k=()=>{n.value||!v.value||x(b.value+1,!1)};return q(()=>[u.query.lottery_id,u.query.group_id],()=>{x(1,!0)}),I(()=>{x(1,!0)}),(_,s)=>(r(),a("div",N,[t("div",F,[s[3]||(s[3]=t("div",{class:"text-sm text-gray-600 mb-2"},"总计（当前游戏/分组）",-1)),t("div",V,[t("div",$,[s[0]||(s[0]=t("div",{class:"text-xs text-gray-500"},"投注金额",-1)),t("div",j,o((d.value.bet_gold||0).toLocaleString()),1)]),t("div",D,[s[1]||(s[1]=t("div",{class:"text-xs text-gray-500"},"中奖金额",-1)),t("div",E,o((d.value.win_gold||0).toLocaleString()),1)]),t("div",{class:g([(d.value.profit||0)>=0?"bg-red-50":"bg-gray-100","rounded-lg p-3"])},[s[2]||(s[2]=t("div",{class:"text-xs text-gray-500"},"盈亏",-1)),t("div",{class:g(["text-lg font-bold",(d.value.profit||0)>=0?"text-red-600":"text-green-600"])},o((d.value.profit||0)>=0?"+":"")+o((d.value.profit||0).toLocaleString()),3)],2)])]),t("div",G,[s[5]||(s[5]=t("div",{class:"grid grid-cols-4 text-xs text-gray-500 border-b bg-gray-50 px-3 py-2 gap-2 rounded-t-lg"},[t("span",null,"日期"),t("span",{class:"text-right"},"投注/中奖"),t("span",{class:"text-center"},"自动/次数"),t("span",{class:"text-right"},"盈亏")],-1)),n.value&&l.value.length===0?(r(),a("div",J,[...s[4]||(s[4]=[t("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"},null,-1),t("span",{class:"ml-2 text-gray-600"},"加载盈亏统计中...",-1)])])):l.value.length===0?(r(),a("div",P," 暂无盈亏记录 ")):(r(),a("div",R,[(r(!0),a(C,null,z(l.value,(e,p)=>(r(),a("div",{key:`${e.id||e.stat_date}-${p}`,class:g(["px-3 py-3 text-xs",(e.profit||0)>0?"bg-red-50":(e.profit||0)<0?"bg-green-50":"bg-white"])},[t("div",A,[t("div",null,[t("div",H,o(e.stat_date?String(e.stat_date).substring(0,10):"--"),1)]),t("div",K,[t("div",O,o((e.bet_gold||0).toLocaleString()),1),t("div",{class:g(["text-[10px]",e.win_gold&&e.win_gold>0?"text-green-600":"text-gray-400"])},o((e.win_gold||0).toLocaleString()),3)]),t("div",Q,[t("div",null,[(e.auto_bet_gold||0)>0?(r(),a("span",T,"√")):(r(),a("span",U,"×"))]),t("div",W,o(e.bet_count||0)+"次 ",1)]),t("div",X,[t("div",{class:g(["font-bold",(e.profit||0)>=0?"text-red-600":"text-green-600"])},o((e.profit||0)>=0?"+":"")+o((e.profit||0).toLocaleString()),3)])])],2))),128)),v.value?(r(),a("div",Y,[t("button",{onClick:k,disabled:n.value,class:"px-6 py-2 bg-red-600 text-white text-sm rounded-lg disabled:opacity-50"},o(n.value?"加载中...":"加载更多"),9,Z)])):f("",!0),!v.value&&l.value.length>0?(r(),a("div",tt," 没有更多数据了 ")):f("",!0)]))])]))}});export{lt as default};
