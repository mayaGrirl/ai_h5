import{d as x,q as d,f as _,l as a,u as r,K as b,J as y,L as w,z as i,r as c,x as k,v as f}from"./vue-vendor-ntQnFNWs.js";import{a as z,t as u}from"./index-DKHIMzl2.js";import{C}from"./customer-B5IwTx45.js";import{_ as D}from"./PageHeader.vue_vue_type_script_setup_true_lang-CXJsQIxj.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-WmLVr1nx.js";const N={class:"min-h-screen bg-[#f5f7fb] pb-16"},S={class:"bg-gray-100 flex justify-center"},V={class:"bg-white rounded-lg mb-3 overflow-hidden"},A={class:"flex items-center text-gray-600 px-4 py-3 pb-0"},B={class:"flex items-center px-4 py-3 border-b"},I={class:"w-20 text-gray-700 flex-shrink-0"},Z=["value","placeholder"],E={key:0,class:"px-4 py-2 text-xs text-red-500"},P=["disabled"],F=x({__name:"index",setup($){const{t}=z(),s=c(""),l=c(""),n=c(!1),m=()=>(l.value="",s.value.trim()?s.value.length>20?(l.value=t("gift.code-max"),!1):/^[a-zA-Z0-9]+$/.test(s.value)?!0:(l.value=t("gift.code-regex"),!1):(l.value=t("gift.code-placeholder"),!1)),p=e=>{const o=e.target;o.value=o.value.replace(/[^a-zA-Z0-9]/g,""),s.value=o.value},g=e=>{e.preventDefault();const h=(e.clipboardData?.getData("text")||"").replace(/[^a-zA-Z0-9]/g,"");s.value=h},v=async()=>{if(m()){n.value=!0;try{const e=await C({code:s.value});e.code===200?(u.success(e.message||"兑换成功"),s.value=""):u.error(e.message||"兑换失败")}catch{u.error("兑换失败")}finally{n.value=!1}}};return(e,o)=>(f(),d("div",N,[_(D,{title:r(t)("mine.setting.gift")},null,8,["title"]),a("div",S,[a("form",{onSubmit:b(v,["prevent"]),class:"w-full bg-gray-100 px-3 py-4"},[a("div",V,[a("div",A,[o[0]||(o[0]=a("span",{class:"w-1 h-4 bg-red-600 rounded mr-2"},null,-1)),w(" "+i(r(t)("gift.title")),1)]),a("div",B,[a("label",I,i(r(t)("gift.code-label")),1),a("input",{value:s.value,onInput:p,onPaste:g,type:"text",autocomplete:"off",placeholder:r(t)("gift.code-placeholder"),class:"text-gray-600 flex-1 placeholder-gray-400 focus:outline-none h-10"},null,40,Z)]),l.value?(f(),d("p",E,i(l.value),1)):y("",!0)]),a("button",{type:"submit",disabled:n.value,class:k(["mt-10 h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",n.value?"opacity-60 cursor-not-allowed":"cursor-pointer"])},i(n.value?r(t)("common.form.button.submitting"):r(t)("common.form.button.submit")),11,P)],32)])]))}});export{F as default};
