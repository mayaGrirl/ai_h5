import{d as C,o as k,r as c,q as m,l as s,f as v,u as a,K as S,J as b,z as l,x as g,Q as x,R as y,B as V,v as p}from"./vue-vendor-ntQnFNWs.js";import{a as B,u as A,C as D,t as f}from"./index-BvHA6CJ8.js";import{F as L}from"./customer-Ca0wOw0D.js";import{_ as M}from"./PageHeader.vue_vue_type_script_setup_true_lang-D4YorIBc.js";import"./utils-vendor-CbLx3nH2.js";import"./index-C6jzfBHC.js";import"./chevron-left-DHZYbvND.js";const N={class:"flex min-h-screen justify-center bg-[#eef3f8]"},z={class:"w-full max-w-xl bg-[#f5f7fb] shadow-sm"},R={class:"bg-white rounded-lg mb-3 overflow-hidden"},U={class:"flex items-center px-4 py-3 border-b"},$={class:"w-2/7 text-gray-700"},j={class:"flex items-center px-4 py-3 border-b"},q={class:"w-2/7 text-gray-700"},E=["placeholder"],F={key:0,class:"mt-1 px-4 text-xs text-red-500"},I={class:"flex items-center px-4 py-3"},J={class:"w-2/7 text-gray-700"},K=["placeholder"],Q={key:1,class:"mt-1 px-4 text-xs text-red-500"},T={class:"flex items-start gap-2 p-4 bg-yellow-50 rounded-lg border border-yellow-200"},G={class:"text-sm text-yellow-800"},H=["disabled"],te=C({__name:"index",setup(O){const h=V(),{t}=B(),n=A(),i=c(!1),e=c({enabled:!1,address1:"",address2:""}),o=c({}),_=()=>(o.value={},e.value.enabled&&!e.value.address1&&!e.value.address2?(o.value.address1=t("mine.security-settings.group-account.login-location.address1-empty"),!1):e.value.address1&&e.value.address1.length>20?(o.value.address1=t("mine.security-settings.group-account.login-location.address1-max"),!1):e.value.address2&&e.value.address2.length>20?(o.value.address2=t("mine.security-settings.group-account.login-location.address1-max"),!1):!0),w=async()=>{if(_()){i.value=!0;try{const d=await L({enabled:e.value.enabled?1:0,address1:e.value.address1,address2:e.value.address2});d.code===200?(f.success(d.message||"设置成功"),n.currentCustomer&&n.setCurrentCustomer({...n.currentCustomer,isLogin:e.value.enabled?1:0,address1:e.value.address1,address2:e.value.address2}),h.back()):f.error(d.message||"设置失败")}catch{f.error("设置失败")}finally{i.value=!1}}};return k(()=>{n.currentCustomer&&(e.value.enabled=!!n.currentCustomer.isLogin,e.value.address1=n.currentCustomer.address1||"",e.value.address2=n.currentCustomer.address2||"")}),(d,r)=>(p(),m("div",N,[s("div",z,[v(M,{title:a(t)("mine.security-settings.group-account.login-location.title")},null,8,["title"]),s("form",{onSubmit:S(w,["prevent"]),class:"w-full bg-gray-100 px-3 py-4"},[s("div",R,[s("div",U,[s("label",$,l(a(t)("mine.security-settings.group-account.login-location.enabled-label")),1),s("button",{type:"button",onClick:r[0]||(r[0]=u=>e.value.enabled=!e.value.enabled),class:g(["relative inline-flex h-6 w-11 items-center cursor-pointer rounded-full transition",e.value.enabled?"bg-red-500":"bg-gray-300"])},[s("span",{class:g(["inline-block h-6 w-6 rounded-full bg-white transition",e.value.enabled?"translate-x-5":"translate-x-0"])},null,2)],2)]),s("div",j,[s("label",q,l(a(t)("mine.security-settings.group-account.login-location.address1-label")),1),x(s("input",{"onUpdate:modelValue":r[1]||(r[1]=u=>e.value.address1=u),type:"text",placeholder:a(t)("common.form.placeholder.enter")+a(t)("mine.security-settings.group-account.login-location.address2-label"),class:"text-gray-600 w-5/7 placeholder-gray-400 focus:outline-none h-10"},null,8,E),[[y,e.value.address1]])]),o.value.address1?(p(),m("p",F,l(o.value.address1),1)):b("",!0),s("div",I,[s("label",J,l(a(t)("mine.security-settings.group-account.login-location.address2-label")),1),x(s("input",{"onUpdate:modelValue":r[2]||(r[2]=u=>e.value.address2=u),type:"text",placeholder:a(t)("common.form.placeholder.enter")+a(t)("mine.security-settings.group-account.login-location.address2-label"),class:"text-gray-600 w-5/7 placeholder-gray-400 focus:outline-none h-10"},null,8,K),[[y,e.value.address2]])]),o.value.address2?(p(),m("p",Q,l(o.value.address2),1)):b("",!0)]),s("div",T,[v(a(D),{class:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s("div",G,[s("p",null,l(a(t)("mine.security-settings.group-account.login-location.alert-1")),1),s("p",null,l(a(t)("mine.security-settings.group-account.login-location.alert-2")),1)])]),s("button",{type:"submit",disabled:i.value,class:g(["mt-10 h-12 w-full rounded-full bg-gradient-to-r from-[#ff6a3a] to-[#ff1020] text-white font-medium tracking-wide transition transform active:scale-95",i.value?"opacity-60 cursor-not-allowed":"cursor-pointer"])},l(i.value?a(t)("common.form.button.submitting"):a(t)("common.form.button.submit")),11,H)],32),r[3]||(r[3]=s("div",{class:"h-14"},null,-1))])]))}});export{te as default};
